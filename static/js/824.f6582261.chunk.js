/*! For license information please see 824.f6582261.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkStar_Wars_TestTask_STARNAVI=self.webpackChunkStar_Wars_TestTask_STARNAVI||[]).push([[824],{9824:function(e,n,t){t.r(n),t.d(n,{default:function(){return qu}});var o=t(5861),r=t(7757),i=t.n(r),a=t(2791),l=t(4942),u=t(9439),s=t(7762),c=t(3433),d=t(1413),f=t(4925),h=t(184);function v(e){if("string"===typeof e||"number"===typeof e)return""+e;var n="";if(Array.isArray(e))for(var t,o=0;o<e.length;o++)""!==(t=v(e[o]))&&(n+=(n&&" ")+t);else for(var r in e)e[r]&&(n+=(n&&" ")+r);return n}var p={value:function(){}};function g(){for(var e,n=0,t=arguments.length,o={};n<t;++n){if(!(e=arguments[n]+"")||e in o||/[\s.]/.test(e))throw new Error("illegal type: "+e);o[e]=[]}return new m(o)}function m(e){this._=e}function y(e,n){return e.trim().split(/^|\s+/).map((function(e){var t="",o=e.indexOf(".");if(o>=0&&(t=e.slice(o+1),e=e.slice(0,o)),e&&!n.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}}))}function x(e,n){for(var t,o=0,r=e.length;o<r;++o)if((t=e[o]).name===n)return t.value}function w(e,n,t){for(var o=0,r=e.length;o<r;++o)if(e[o].name===n){e[o]=p,e=e.slice(0,o).concat(e.slice(o+1));break}return null!=t&&e.push({name:n,value:t}),e}m.prototype=g.prototype={constructor:m,on:function(e,n){var t,o=this._,r=y(e+"",o),i=-1,a=r.length;if(!(arguments.length<2)){if(null!=n&&"function"!==typeof n)throw new Error("invalid callback: "+n);for(;++i<a;)if(t=(e=r[i]).type)o[t]=w(o[t],e.name,n);else if(null==n)for(t in o)o[t]=w(o[t],e.name,null);return this}for(;++i<a;)if((t=(e=r[i]).type)&&(t=x(o[t],e.name)))return t},copy:function(){var e={},n=this._;for(var t in n)e[t]=n[t].slice();return new m(e)},call:function(e,n){if((t=arguments.length-2)>0)for(var t,o,r=new Array(t),i=0;i<t;++i)r[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=0,t=(o=this._[e]).length;i<t;++i)o[i].value.apply(n,r)},apply:function(e,n,t){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(n,t)}};var b=g;function S(){}function C(e){return null==e?S:function(){return this.querySelector(e)}}function E(e){return null==e?[]:Array.isArray(e)?e:Array.from(e)}function k(){return[]}function _(e){return null==e?k:function(){return this.querySelectorAll(e)}}function M(e){return function(){return this.matches(e)}}function N(e){return function(n){return n.matches(e)}}var Z=Array.prototype.find;function P(){return this.firstElementChild}var O=Array.prototype.filter;function D(){return Array.from(this.children)}function z(e){return new Array(e.length)}function I(e,n){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=n}function A(e){return function(){return e}}function R(e,n,t,o,r,i){for(var a,l=0,u=n.length,s=i.length;l<s;++l)(a=n[l])?(a.__data__=i[l],o[l]=a):t[l]=new I(e,i[l]);for(;l<u;++l)(a=n[l])&&(r[l]=a)}function T(e,n,t,o,r,i,a){var l,u,s,c=new Map,d=n.length,f=i.length,h=new Array(d);for(l=0;l<d;++l)(u=n[l])&&(h[l]=s=a.call(u,u.__data__,l,n)+"",c.has(s)?r[l]=u:c.set(s,u));for(l=0;l<f;++l)s=a.call(e,i[l],l,i)+"",(u=c.get(s))?(o[l]=u,u.__data__=i[l],c.delete(s)):t[l]=new I(e,i[l]);for(l=0;l<d;++l)(u=n[l])&&c.get(h[l])===u&&(r[l]=u)}function L(e){return e.__data__}function B(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}function j(e,n){return e<n?-1:e>n?1:e>=n?0:NaN}I.prototype={constructor:I,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,n){return this._parent.insertBefore(e,n)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var V="http://www.w3.org/1999/xhtml",H={svg:"http://www.w3.org/2000/svg",xhtml:V,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function X(e){var n=e+="",t=n.indexOf(":");return t>=0&&"xmlns"!==(n=e.slice(0,t))&&(e=e.slice(t+1)),H.hasOwnProperty(n)?{space:H[n],local:e}:e}function Y(e){return function(){this.removeAttribute(e)}}function W(e){return function(){this.removeAttributeNS(e.space,e.local)}}function K(e,n){return function(){this.setAttribute(e,n)}}function F(e,n){return function(){this.setAttributeNS(e.space,e.local,n)}}function G(e,n){return function(){var t=n.apply(this,arguments);null==t?this.removeAttribute(e):this.setAttribute(e,t)}}function q(e,n){return function(){var t=n.apply(this,arguments);null==t?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,t)}}function U(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Q(e){return function(){this.style.removeProperty(e)}}function $(e,n,t){return function(){this.style.setProperty(e,n,t)}}function J(e,n,t){return function(){var o=n.apply(this,arguments);null==o?this.style.removeProperty(e):this.style.setProperty(e,o,t)}}function ee(e,n){return e.style.getPropertyValue(n)||U(e).getComputedStyle(e,null).getPropertyValue(n)}function ne(e){return function(){delete this[e]}}function te(e,n){return function(){this[e]=n}}function oe(e,n){return function(){var t=n.apply(this,arguments);null==t?delete this[e]:this[e]=t}}function re(e){return e.trim().split(/^|\s+/)}function ie(e){return e.classList||new ae(e)}function ae(e){this._node=e,this._names=re(e.getAttribute("class")||"")}function le(e,n){for(var t=ie(e),o=-1,r=n.length;++o<r;)t.add(n[o])}function ue(e,n){for(var t=ie(e),o=-1,r=n.length;++o<r;)t.remove(n[o])}function se(e){return function(){le(this,e)}}function ce(e){return function(){ue(this,e)}}function de(e,n){return function(){(n.apply(this,arguments)?le:ue)(this,e)}}function fe(){this.textContent=""}function he(e){return function(){this.textContent=e}}function ve(e){return function(){var n=e.apply(this,arguments);this.textContent=null==n?"":n}}function pe(){this.innerHTML=""}function ge(e){return function(){this.innerHTML=e}}function me(e){return function(){var n=e.apply(this,arguments);this.innerHTML=null==n?"":n}}function ye(){this.nextSibling&&this.parentNode.appendChild(this)}function xe(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function we(e){return function(){var n=this.ownerDocument,t=this.namespaceURI;return t===V&&n.documentElement.namespaceURI===V?n.createElement(e):n.createElementNS(t,e)}}function be(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Se(e){var n=X(e);return(n.local?be:we)(n)}function Ce(){return null}function Ee(){var e=this.parentNode;e&&e.removeChild(this)}function ke(){var e=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function _e(){var e=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function Me(e){return e.trim().split(/^|\s+/).map((function(e){var n="",t=e.indexOf(".");return t>=0&&(n=e.slice(t+1),e=e.slice(0,t)),{type:e,name:n}}))}function Ne(e){return function(){var n=this.__on;if(n){for(var t,o=0,r=-1,i=n.length;o<i;++o)t=n[o],e.type&&t.type!==e.type||t.name!==e.name?n[++r]=t:this.removeEventListener(t.type,t.listener,t.options);++r?n.length=r:delete this.__on}}}function Ze(e,n,t){return function(){var o,r=this.__on,i=function(e){return function(n){e.call(this,n,this.__data__)}}(n);if(r)for(var a=0,l=r.length;a<l;++a)if((o=r[a]).type===e.type&&o.name===e.name)return this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=i,o.options=t),void(o.value=n);this.addEventListener(e.type,i,t),o={type:e.type,name:e.name,value:n,listener:i,options:t},r?r.push(o):this.__on=[o]}}function Pe(e,n,t){var o=U(e),r=o.CustomEvent;"function"===typeof r?r=new r(n,t):(r=o.document.createEvent("Event"),t?(r.initEvent(n,t.bubbles,t.cancelable),r.detail=t.detail):r.initEvent(n,!1,!1)),e.dispatchEvent(r)}function Oe(e,n){return function(){return Pe(this,e,n)}}function De(e,n){return function(){return Pe(this,e,n.apply(this,arguments))}}ae.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var n=this._names.indexOf(e);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var ze=r.mark(Ie);function Ie(){var e,n,t,o,i,a,l;return r.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:e=this._groups,n=0,t=e.length;case 1:if(!(n<t)){r.next=13;break}o=e[n],i=0,a=o.length;case 3:if(!(i<a)){r.next=10;break}if(!(l=o[i])){r.next=7;break}return r.next=7,l;case 7:++i,r.next=3;break;case 10:++n,r.next=1;break;case 13:case"end":return r.stop()}}),ze,this)}var Ae=[null];function Re(e,n){this._groups=e,this._parents=n}function Te(){return new Re([[document.documentElement]],Ae)}Re.prototype=Te.prototype=(0,l.Z)({constructor:Re,select:function(e){"function"!==typeof e&&(e=C(e));for(var n=this._groups,t=n.length,o=new Array(t),r=0;r<t;++r)for(var i,a,l=n[r],u=l.length,s=o[r]=new Array(u),c=0;c<u;++c)(i=l[c])&&(a=e.call(i,i.__data__,c,l))&&("__data__"in i&&(a.__data__=i.__data__),s[c]=a);return new Re(o,this._parents)},selectAll:function(e){e="function"===typeof e?function(e){return function(){return E(e.apply(this,arguments))}}(e):_(e);for(var n=this._groups,t=n.length,o=[],r=[],i=0;i<t;++i)for(var a,l=n[i],u=l.length,s=0;s<u;++s)(a=l[s])&&(o.push(e.call(a,a.__data__,s,l)),r.push(a));return new Re(o,r)},selectChild:function(e){return this.select(null==e?P:function(e){return function(){return Z.call(this.children,e)}}("function"===typeof e?e:N(e)))},selectChildren:function(e){return this.selectAll(null==e?D:function(e){return function(){return O.call(this.children,e)}}("function"===typeof e?e:N(e)))},filter:function(e){"function"!==typeof e&&(e=M(e));for(var n=this._groups,t=n.length,o=new Array(t),r=0;r<t;++r)for(var i,a=n[r],l=a.length,u=o[r]=[],s=0;s<l;++s)(i=a[s])&&e.call(i,i.__data__,s,a)&&u.push(i);return new Re(o,this._parents)},data:function(e,n){if(!arguments.length)return Array.from(this,L);var t=n?T:R,o=this._parents,r=this._groups;"function"!==typeof e&&(e=A(e));for(var i=r.length,a=new Array(i),l=new Array(i),u=new Array(i),s=0;s<i;++s){var c=o[s],d=r[s],f=d.length,h=B(e.call(c,c&&c.__data__,s,o)),v=h.length,p=l[s]=new Array(v),g=a[s]=new Array(v),m=u[s]=new Array(f);t(c,d,p,g,m,h,n);for(var y,x,w=0,b=0;w<v;++w)if(y=p[w]){for(w>=b&&(b=w+1);!(x=g[b])&&++b<v;);y._next=x||null}}return(a=new Re(a,o))._enter=l,a._exit=u,a},enter:function(){return new Re(this._enter||this._groups.map(z),this._parents)},exit:function(){return new Re(this._exit||this._groups.map(z),this._parents)},join:function(e,n,t){var o=this.enter(),r=this,i=this.exit();return"function"===typeof e?(o=e(o))&&(o=o.selection()):o=o.append(e+""),null!=n&&(r=n(r))&&(r=r.selection()),null==t?i.remove():t(i),o&&r?o.merge(r).order():r},merge:function(e){for(var n=e.selection?e.selection():e,t=this._groups,o=n._groups,r=t.length,i=o.length,a=Math.min(r,i),l=new Array(r),u=0;u<a;++u)for(var s,c=t[u],d=o[u],f=c.length,h=l[u]=new Array(f),v=0;v<f;++v)(s=c[v]||d[v])&&(h[v]=s);for(;u<r;++u)l[u]=t[u];return new Re(l,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,n=-1,t=e.length;++n<t;)for(var o,r=e[n],i=r.length-1,a=r[i];--i>=0;)(o=r[i])&&(a&&4^o.compareDocumentPosition(a)&&a.parentNode.insertBefore(o,a),a=o);return this},sort:function(e){function n(n,t){return n&&t?e(n.__data__,t.__data__):!n-!t}e||(e=j);for(var t=this._groups,o=t.length,r=new Array(o),i=0;i<o;++i){for(var a,l=t[i],u=l.length,s=r[i]=new Array(u),c=0;c<u;++c)(a=l[c])&&(s[c]=a);s.sort(n)}return new Re(r,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,n=0,t=e.length;n<t;++n)for(var o=e[n],r=0,i=o.length;r<i;++r){var a=o[r];if(a)return a}return null},size:function(){var e,n=0,t=(0,s.Z)(this);try{for(t.s();!(e=t.n()).done;){e.value;++n}}catch(o){t.e(o)}finally{t.f()}return n},empty:function(){return!this.node()},each:function(e){for(var n=this._groups,t=0,o=n.length;t<o;++t)for(var r,i=n[t],a=0,l=i.length;a<l;++a)(r=i[a])&&e.call(r,r.__data__,a,i);return this},attr:function(e,n){var t=X(e);if(arguments.length<2){var o=this.node();return t.local?o.getAttributeNS(t.space,t.local):o.getAttribute(t)}return this.each((null==n?t.local?W:Y:"function"===typeof n?t.local?q:G:t.local?F:K)(t,n))},style:function(e,n,t){return arguments.length>1?this.each((null==n?Q:"function"===typeof n?J:$)(e,n,null==t?"":t)):ee(this.node(),e)},property:function(e,n){return arguments.length>1?this.each((null==n?ne:"function"===typeof n?oe:te)(e,n)):this.node()[e]},classed:function(e,n){var t=re(e+"");if(arguments.length<2){for(var o=ie(this.node()),r=-1,i=t.length;++r<i;)if(!o.contains(t[r]))return!1;return!0}return this.each(("function"===typeof n?de:n?se:ce)(t,n))},text:function(e){return arguments.length?this.each(null==e?fe:("function"===typeof e?ve:he)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?pe:("function"===typeof e?me:ge)(e)):this.node().innerHTML},raise:function(){return this.each(ye)},lower:function(){return this.each(xe)},append:function(e){var n="function"===typeof e?e:Se(e);return this.select((function(){return this.appendChild(n.apply(this,arguments))}))},insert:function(e,n){var t="function"===typeof e?e:Se(e),o=null==n?Ce:"function"===typeof n?n:C(n);return this.select((function(){return this.insertBefore(t.apply(this,arguments),o.apply(this,arguments)||null)}))},remove:function(){return this.each(Ee)},clone:function(e){return this.select(e?_e:ke)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,n,t){var o,r,i=Me(e+""),a=i.length;if(!(arguments.length<2)){for(l=n?Ze:Ne,o=0;o<a;++o)this.each(l(i[o],n,t));return this}var l=this.node().__on;if(l)for(var u,s=0,c=l.length;s<c;++s)for(o=0,u=l[s];o<a;++o)if((r=i[o]).type===u.type&&r.name===u.name)return u.value},dispatch:function(e,n){return this.each(("function"===typeof n?De:Oe)(e,n))}},Symbol.iterator,Ie);var Le=Te;function Be(e){return"string"===typeof e?new Re([[document.querySelector(e)]],[document.documentElement]):new Re([[e]],Ae)}function je(e,n){if(e=function(e){for(var n;n=e.sourceEvent;)e=n;return e}(e),void 0===n&&(n=e.currentTarget),n){var t=n.ownerSVGElement||n;if(t.createSVGPoint){var o=t.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,[(o=o.matrixTransform(n.getScreenCTM().inverse())).x,o.y]}if(n.getBoundingClientRect){var r=n.getBoundingClientRect();return[e.clientX-r.left-n.clientLeft,e.clientY-r.top-n.clientTop]}}return[e.pageX,e.pageY]}var Ve={passive:!1},He={capture:!0,passive:!1};function Xe(e){e.stopImmediatePropagation()}function Ye(e){e.preventDefault(),e.stopImmediatePropagation()}function We(e){var n=e.document.documentElement,t=Be(e).on("dragstart.drag",Ye,He);"onselectstart"in n?t.on("selectstart.drag",Ye,He):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function Ke(e,n){var t=e.document.documentElement,o=Be(e).on("dragstart.drag",null);n&&(o.on("click.drag",Ye,He),setTimeout((function(){o.on("click.drag",null)}),0)),"onselectstart"in t?o.on("selectstart.drag",null):(t.style.MozUserSelect=t.__noselect,delete t.__noselect)}var Fe=function(e){return function(){return e}};function Ge(e,n){var t=n.sourceEvent,o=n.subject,r=n.target,i=n.identifier,a=n.active,l=n.x,u=n.y,s=n.dx,c=n.dy,d=n.dispatch;Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:o,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:l,enumerable:!0,configurable:!0},y:{value:u,enumerable:!0,configurable:!0},dx:{value:s,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:d}})}function qe(e){return!e.ctrlKey&&!e.button}function Ue(){return this.parentNode}function Qe(e,n){return null==n?{x:e.x,y:e.y}:n}function $e(){return navigator.maxTouchPoints||"ontouchstart"in this}function Je(){var e,n,t,o,r=qe,i=Ue,a=Qe,l=$e,u={},s=b("start","drag","end"),c=0,d=0;function f(e){e.on("mousedown.drag",h).filter(l).on("touchstart.drag",g).on("touchmove.drag",m,Ve).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(a,l){if(!o&&r.call(this,a,l)){var u=x(this,i.call(this,a,l),a,l,"mouse");u&&(Be(a.view).on("mousemove.drag",v,He).on("mouseup.drag",p,He),We(a.view),Xe(a),t=!1,e=a.clientX,n=a.clientY,u("start",a))}}function v(o){if(Ye(o),!t){var r=o.clientX-e,i=o.clientY-n;t=r*r+i*i>d}u.mouse("drag",o)}function p(e){Be(e.view).on("mousemove.drag mouseup.drag",null),Ke(e.view,t),Ye(e),u.mouse("end",e)}function g(e,n){if(r.call(this,e,n)){var t,o,a=e.changedTouches,l=i.call(this,e,n),u=a.length;for(t=0;t<u;++t)(o=x(this,l,e,n,a[t].identifier,a[t]))&&(Xe(e),o("start",e,a[t]))}}function m(e){var n,t,o=e.changedTouches,r=o.length;for(n=0;n<r;++n)(t=u[o[n].identifier])&&(Ye(e),t("drag",e,o[n]))}function y(e){var n,t,r=e.changedTouches,i=r.length;for(o&&clearTimeout(o),o=setTimeout((function(){o=null}),500),n=0;n<i;++n)(t=u[r[n].identifier])&&(Xe(e),t("end",e,r[n]))}function x(e,n,t,o,r,i){var l,d,h,v=s.copy(),p=je(i||t,n);if(null!=(h=a.call(e,new Ge("beforestart",{sourceEvent:t,target:f,identifier:r,active:c,x:p[0],y:p[1],dx:0,dy:0,dispatch:v}),o)))return l=h.x-p[0]||0,d=h.y-p[1]||0,function t(i,a,s){var g,m=p;switch(i){case"start":u[r]=t,g=c++;break;case"end":delete u[r],--c;case"drag":p=je(s||a,n),g=c}v.call(i,e,new Ge(i,{sourceEvent:a,subject:h,target:f,identifier:r,active:g,x:p[0]+l,y:p[1]+d,dx:p[0]-m[0],dy:p[1]-m[1],dispatch:v}),o)}}return f.filter=function(e){return arguments.length?(r="function"===typeof e?e:Fe(!!e),f):r},f.container=function(e){return arguments.length?(i="function"===typeof e?e:Fe(e),f):i},f.subject=function(e){return arguments.length?(a="function"===typeof e?e:Fe(e),f):a},f.touchable=function(e){return arguments.length?(l="function"===typeof e?e:Fe(!!e),f):l},f.on=function(){var e=s.on.apply(s,arguments);return e===s?f:e},f.clickDistance=function(e){return arguments.length?(d=(e=+e)*e,f):Math.sqrt(d)},f}Ge.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function en(e){return((e=Math.exp(e))+1/e)/2}var nn,tn,on=function e(n,t,o){function r(e,r){var i,a,l=e[0],u=e[1],s=e[2],c=r[0],d=r[1],f=r[2],h=c-l,v=d-u,p=h*h+v*v;if(p<1e-12)a=Math.log(f/s)/n,i=function(e){return[l+e*h,u+e*v,s*Math.exp(n*e*a)]};else{var g=Math.sqrt(p),m=(f*f-s*s+o*p)/(2*s*t*g),y=(f*f-s*s-o*p)/(2*f*t*g),x=Math.log(Math.sqrt(m*m+1)-m),w=Math.log(Math.sqrt(y*y+1)-y);a=(w-x)/n,i=function(e){var o,r=e*a,i=en(x),c=s/(t*g)*(i*(o=n*r+x,((o=Math.exp(2*o))-1)/(o+1))-function(e){return((e=Math.exp(e))-1/e)/2}(x));return[l+c*h,u+c*v,s*i/en(n*r+x)]}}return i.duration=1e3*a*n/Math.SQRT2,i}return r.rho=function(n){var t=Math.max(.001,+n),o=t*t;return e(t,o,o*o)},r}(Math.SQRT2,2,4),rn=0,an=0,ln=0,un=0,sn=0,cn=0,dn="object"===typeof performance&&performance.now?performance:Date,fn="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function hn(){return sn||(fn(vn),sn=dn.now()+cn)}function vn(){sn=0}function pn(){this._call=this._time=this._next=null}function gn(e,n,t){var o=new pn;return o.restart(e,n,t),o}function mn(){sn=(un=dn.now())+cn,rn=an=0;try{!function(){hn(),++rn;for(var e,n=nn;n;)(e=sn-n._time)>=0&&n._call.call(void 0,e),n=n._next;--rn}()}finally{rn=0,function(){var e,n,t=nn,o=1/0;for(;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:nn=n);tn=e,xn(o)}(),sn=0}}function yn(){var e=dn.now(),n=e-un;n>1e3&&(cn-=n,un=e)}function xn(e){rn||(an&&(an=clearTimeout(an)),e-sn>24?(e<1/0&&(an=setTimeout(mn,e-dn.now()-cn)),ln&&(ln=clearInterval(ln))):(ln||(un=dn.now(),ln=setInterval(yn,1e3)),rn=1,fn(mn)))}function wn(e,n,t){var o=new pn;return n=null==n?0:+n,o.restart((function(t){o.stop(),e(t+n)}),n,t),o}pn.prototype=gn.prototype={constructor:pn,restart:function(e,n,t){if("function"!==typeof e)throw new TypeError("callback is not a function");t=(null==t?hn():+t)+(null==n?0:+n),this._next||tn===this||(tn?tn._next=this:nn=this,tn=this),this._call=e,this._time=t,xn()},stop:function(){this._call&&(this._call=null,this._time=1/0,xn())}};var bn=b("start","end","cancel","interrupt"),Sn=[];function Cn(e,n,t,o,r,i){var a=e.__transition;if(a){if(t in a)return}else e.__transition={};!function(e,n,t){var o,r=e.__transition;function i(e){t.state=1,t.timer.restart(a,t.delay,t.time),t.delay<=e&&a(e-t.delay)}function a(i){var s,c,d,f;if(1!==t.state)return u();for(s in r)if((f=r[s]).name===t.name){if(3===f.state)return wn(a);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",e,e.__data__,f.index,f.group),delete r[s]):+s<n&&(f.state=6,f.timer.stop(),f.on.call("cancel",e,e.__data__,f.index,f.group),delete r[s])}if(wn((function(){3===t.state&&(t.state=4,t.timer.restart(l,t.delay,t.time),l(i))})),t.state=2,t.on.call("start",e,e.__data__,t.index,t.group),2===t.state){for(t.state=3,o=new Array(d=t.tween.length),s=0,c=-1;s<d;++s)(f=t.tween[s].value.call(e,e.__data__,t.index,t.group))&&(o[++c]=f);o.length=c+1}}function l(n){for(var r=n<t.duration?t.ease.call(null,n/t.duration):(t.timer.restart(u),t.state=5,1),i=-1,a=o.length;++i<a;)o[i].call(e,r);5===t.state&&(t.on.call("end",e,e.__data__,t.index,t.group),u())}function u(){for(var o in t.state=6,t.timer.stop(),delete r[n],r)return;delete e.__transition}r[n]=t,t.timer=gn(i,0,t.time)}(e,t,{name:n,index:o,group:r,on:bn,tween:Sn,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:0})}function En(e,n){var t=_n(e,n);if(t.state>0)throw new Error("too late; already scheduled");return t}function kn(e,n){var t=_n(e,n);if(t.state>3)throw new Error("too late; already running");return t}function _n(e,n){var t=e.__transition;if(!t||!(t=t[n]))throw new Error("transition not found");return t}function Mn(e,n){var t,o,r,i=e.__transition,a=!0;if(i){for(r in n=null==n?null:n+"",i)(t=i[r]).name===n?(o=t.state>2&&t.state<5,t.state=6,t.timer.stop(),t.on.call(o?"interrupt":"cancel",e,e.__data__,t.index,t.group),delete i[r]):a=!1;a&&delete e.__transition}}function Nn(e,n){return e=+e,n=+n,function(t){return e*(1-t)+n*t}}var Zn,Pn=180/Math.PI,On={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Dn(e,n,t,o,r,i){var a,l,u;return(a=Math.sqrt(e*e+n*n))&&(e/=a,n/=a),(u=e*t+n*o)&&(t-=e*u,o-=n*u),(l=Math.sqrt(t*t+o*o))&&(t/=l,o/=l,u/=l),e*o<n*t&&(e=-e,n=-n,u=-u,a=-a),{translateX:r,translateY:i,rotate:Math.atan2(n,e)*Pn,skewX:Math.atan(u)*Pn,scaleX:a,scaleY:l}}function zn(e,n,t,o){function r(e){return e.length?e.pop()+" ":""}return function(i,a){var l=[],u=[];return i=e(i),a=e(a),function(e,o,r,i,a,l){if(e!==r||o!==i){var u=a.push("translate(",null,n,null,t);l.push({i:u-4,x:Nn(e,r)},{i:u-2,x:Nn(o,i)})}else(r||i)&&a.push("translate("+r+n+i+t)}(i.translateX,i.translateY,a.translateX,a.translateY,l,u),function(e,n,t,i){e!==n?(e-n>180?n+=360:n-e>180&&(e+=360),i.push({i:t.push(r(t)+"rotate(",null,o)-2,x:Nn(e,n)})):n&&t.push(r(t)+"rotate("+n+o)}(i.rotate,a.rotate,l,u),function(e,n,t,i){e!==n?i.push({i:t.push(r(t)+"skewX(",null,o)-2,x:Nn(e,n)}):n&&t.push(r(t)+"skewX("+n+o)}(i.skewX,a.skewX,l,u),function(e,n,t,o,i,a){if(e!==t||n!==o){var l=i.push(r(i)+"scale(",null,",",null,")");a.push({i:l-4,x:Nn(e,t)},{i:l-2,x:Nn(n,o)})}else 1===t&&1===o||i.push(r(i)+"scale("+t+","+o+")")}(i.scaleX,i.scaleY,a.scaleX,a.scaleY,l,u),i=a=null,function(e){for(var n,t=-1,o=u.length;++t<o;)l[(n=u[t]).i]=n.x(e);return l.join("")}}}var In=zn((function(e){var n=new("function"===typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return n.isIdentity?On:Dn(n.a,n.b,n.c,n.d,n.e,n.f)}),"px, ","px)","deg)"),An=zn((function(e){return null==e?On:(Zn||(Zn=document.createElementNS("http://www.w3.org/2000/svg","g")),Zn.setAttribute("transform",e),(e=Zn.transform.baseVal.consolidate())?Dn((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):On)}),", ",")",")");function Rn(e,n){var t,o;return function(){var r=kn(this,e),i=r.tween;if(i!==t)for(var a=0,l=(o=t=i).length;a<l;++a)if(o[a].name===n){(o=o.slice()).splice(a,1);break}r.tween=o}}function Tn(e,n,t){var o,r;if("function"!==typeof t)throw new Error;return function(){var i=kn(this,e),a=i.tween;if(a!==o){r=(o=a).slice();for(var l={name:n,value:t},u=0,s=r.length;u<s;++u)if(r[u].name===n){r[u]=l;break}u===s&&r.push(l)}i.tween=r}}function Ln(e,n,t){var o=e._id;return e.each((function(){var e=kn(this,o);(e.value||(e.value={}))[n]=t.apply(this,arguments)})),function(e){return _n(e,o).value[n]}}function Bn(e,n,t){e.prototype=n.prototype=t,t.constructor=e}function jn(e,n){var t=Object.create(e.prototype);for(var o in n)t[o]=n[o];return t}function Vn(){}var Hn=.7,Xn=1/Hn,Yn="\\s*([+-]?\\d+)\\s*",Wn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Kn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Fn=/^#([0-9a-f]{3,8})$/,Gn=new RegExp("^rgb\\(".concat(Yn,",").concat(Yn,",").concat(Yn,"\\)$")),qn=new RegExp("^rgb\\(".concat(Kn,",").concat(Kn,",").concat(Kn,"\\)$")),Un=new RegExp("^rgba\\(".concat(Yn,",").concat(Yn,",").concat(Yn,",").concat(Wn,"\\)$")),Qn=new RegExp("^rgba\\(".concat(Kn,",").concat(Kn,",").concat(Kn,",").concat(Wn,"\\)$")),$n=new RegExp("^hsl\\(".concat(Wn,",").concat(Kn,",").concat(Kn,"\\)$")),Jn=new RegExp("^hsla\\(".concat(Wn,",").concat(Kn,",").concat(Kn,",").concat(Wn,"\\)$")),et={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function nt(){return this.rgb().formatHex()}function tt(){return this.rgb().formatRgb()}function ot(e){var n,t;return e=(e+"").trim().toLowerCase(),(n=Fn.exec(e))?(t=n[1].length,n=parseInt(n[1],16),6===t?rt(n):3===t?new ut(n>>8&15|n>>4&240,n>>4&15|240&n,(15&n)<<4|15&n,1):8===t?it(n>>24&255,n>>16&255,n>>8&255,(255&n)/255):4===t?it(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|240&n,((15&n)<<4|15&n)/255):null):(n=Gn.exec(e))?new ut(n[1],n[2],n[3],1):(n=qn.exec(e))?new ut(255*n[1]/100,255*n[2]/100,255*n[3]/100,1):(n=Un.exec(e))?it(n[1],n[2],n[3],n[4]):(n=Qn.exec(e))?it(255*n[1]/100,255*n[2]/100,255*n[3]/100,n[4]):(n=$n.exec(e))?vt(n[1],n[2]/100,n[3]/100,1):(n=Jn.exec(e))?vt(n[1],n[2]/100,n[3]/100,n[4]):et.hasOwnProperty(e)?rt(et[e]):"transparent"===e?new ut(NaN,NaN,NaN,0):null}function rt(e){return new ut(e>>16&255,e>>8&255,255&e,1)}function it(e,n,t,o){return o<=0&&(e=n=t=NaN),new ut(e,n,t,o)}function at(e){return e instanceof Vn||(e=ot(e)),e?new ut((e=e.rgb()).r,e.g,e.b,e.opacity):new ut}function lt(e,n,t,o){return 1===arguments.length?at(e):new ut(e,n,t,null==o?1:o)}function ut(e,n,t,o){this.r=+e,this.g=+n,this.b=+t,this.opacity=+o}function st(){return"#".concat(ht(this.r)).concat(ht(this.g)).concat(ht(this.b))}function ct(){var e=dt(this.opacity);return"".concat(1===e?"rgb(":"rgba(").concat(ft(this.r),", ").concat(ft(this.g),", ").concat(ft(this.b)).concat(1===e?")":", ".concat(e,")"))}function dt(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ft(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ht(e){return((e=ft(e))<16?"0":"")+e.toString(16)}function vt(e,n,t,o){return o<=0?e=n=t=NaN:t<=0||t>=1?e=n=NaN:n<=0&&(e=NaN),new gt(e,n,t,o)}function pt(e){if(e instanceof gt)return new gt(e.h,e.s,e.l,e.opacity);if(e instanceof Vn||(e=ot(e)),!e)return new gt;if(e instanceof gt)return e;var n=(e=e.rgb()).r/255,t=e.g/255,o=e.b/255,r=Math.min(n,t,o),i=Math.max(n,t,o),a=NaN,l=i-r,u=(i+r)/2;return l?(a=n===i?(t-o)/l+6*(t<o):t===i?(o-n)/l+2:(n-t)/l+4,l/=u<.5?i+r:2-i-r,a*=60):l=u>0&&u<1?0:a,new gt(a,l,u,e.opacity)}function gt(e,n,t,o){this.h=+e,this.s=+n,this.l=+t,this.opacity=+o}function mt(e){return(e=(e||0)%360)<0?e+360:e}function yt(e){return Math.max(0,Math.min(1,e||0))}function xt(e,n,t){return 255*(e<60?n+(t-n)*e/60:e<180?t:e<240?n+(t-n)*(240-e)/60:n)}function wt(e,n,t,o,r){var i=e*e,a=i*e;return((1-3*e+3*i-a)*n+(4-6*i+3*a)*t+(1+3*e+3*i-3*a)*o+a*r)/6}Bn(Vn,ot,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:nt,formatHex:nt,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return pt(this).formatHsl()},formatRgb:tt,toString:tt}),Bn(ut,lt,jn(Vn,{brighter:function(e){return e=null==e?Xn:Math.pow(Xn,e),new ut(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?Hn:Math.pow(Hn,e),new ut(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},clamp:function(){return new ut(ft(this.r),ft(this.g),ft(this.b),dt(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:st,formatHex:st,formatHex8:function(){return"#".concat(ht(this.r)).concat(ht(this.g)).concat(ht(this.b)).concat(ht(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:ct,toString:ct})),Bn(gt,(function(e,n,t,o){return 1===arguments.length?pt(e):new gt(e,n,t,null==o?1:o)}),jn(Vn,{brighter:function(e){return e=null==e?Xn:Math.pow(Xn,e),new gt(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?Hn:Math.pow(Hn,e),new gt(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),n=isNaN(e)||isNaN(this.s)?0:this.s,t=this.l,o=t+(t<.5?t:1-t)*n,r=2*t-o;return new ut(xt(e>=240?e-240:e+120,r,o),xt(e,r,o),xt(e<120?e+240:e-120,r,o),this.opacity)},clamp:function(){return new gt(mt(this.h),yt(this.s),yt(this.l),dt(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=dt(this.opacity);return"".concat(1===e?"hsl(":"hsla(").concat(mt(this.h),", ").concat(100*yt(this.s),"%, ").concat(100*yt(this.l),"%").concat(1===e?")":", ".concat(e,")"))}}));var bt=function(e){return function(){return e}};function St(e,n){return function(t){return e+t*n}}function Ct(e){return 1===(e=+e)?Et:function(n,t){return t-n?function(e,n,t){return e=Math.pow(e,t),n=Math.pow(n,t)-e,t=1/t,function(o){return Math.pow(e+o*n,t)}}(n,t,e):bt(isNaN(n)?t:n)}}function Et(e,n){var t=n-e;return t?St(e,t):bt(isNaN(e)?n:e)}var kt=function e(n){var t=Ct(n);function o(e,n){var o=t((e=lt(e)).r,(n=lt(n)).r),r=t(e.g,n.g),i=t(e.b,n.b),a=Et(e.opacity,n.opacity);return function(n){return e.r=o(n),e.g=r(n),e.b=i(n),e.opacity=a(n),e+""}}return o.gamma=e,o}(1);function _t(e){return function(n){var t,o,r=n.length,i=new Array(r),a=new Array(r),l=new Array(r);for(t=0;t<r;++t)o=lt(n[t]),i[t]=o.r||0,a[t]=o.g||0,l[t]=o.b||0;return i=e(i),a=e(a),l=e(l),o.opacity=1,function(e){return o.r=i(e),o.g=a(e),o.b=l(e),o+""}}}_t((function(e){var n=e.length-1;return function(t){var o=t<=0?t=0:t>=1?(t=1,n-1):Math.floor(t*n),r=e[o],i=e[o+1],a=o>0?e[o-1]:2*r-i,l=o<n-1?e[o+2]:2*i-r;return wt((t-o/n)*n,a,r,i,l)}})),_t((function(e){var n=e.length;return function(t){var o=Math.floor(((t%=1)<0?++t:t)*n),r=e[(o+n-1)%n],i=e[o%n],a=e[(o+1)%n],l=e[(o+2)%n];return wt((t-o/n)*n,r,i,a,l)}}));var Mt=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Nt=new RegExp(Mt.source,"g");function Zt(e,n){var t,o,r,i=Mt.lastIndex=Nt.lastIndex=0,a=-1,l=[],u=[];for(e+="",n+="";(t=Mt.exec(e))&&(o=Nt.exec(n));)(r=o.index)>i&&(r=n.slice(i,r),l[a]?l[a]+=r:l[++a]=r),(t=t[0])===(o=o[0])?l[a]?l[a]+=o:l[++a]=o:(l[++a]=null,u.push({i:a,x:Nn(t,o)})),i=Nt.lastIndex;return i<n.length&&(r=n.slice(i),l[a]?l[a]+=r:l[++a]=r),l.length<2?u[0]?function(e){return function(n){return e(n)+""}}(u[0].x):function(e){return function(){return e}}(n):(n=u.length,function(e){for(var t,o=0;o<n;++o)l[(t=u[o]).i]=t.x(e);return l.join("")})}function Pt(e,n){var t;return("number"===typeof n?Nn:n instanceof ot?kt:(t=ot(n))?(n=t,kt):Zt)(e,n)}function Ot(e){return function(){this.removeAttribute(e)}}function Dt(e){return function(){this.removeAttributeNS(e.space,e.local)}}function zt(e,n,t){var o,r,i=t+"";return function(){var a=this.getAttribute(e);return a===i?null:a===o?r:r=n(o=a,t)}}function It(e,n,t){var o,r,i=t+"";return function(){var a=this.getAttributeNS(e.space,e.local);return a===i?null:a===o?r:r=n(o=a,t)}}function At(e,n,t){var o,r,i;return function(){var a,l,u=t(this);if(null!=u)return(a=this.getAttribute(e))===(l=u+"")?null:a===o&&l===r?i:(r=l,i=n(o=a,u));this.removeAttribute(e)}}function Rt(e,n,t){var o,r,i;return function(){var a,l,u=t(this);if(null!=u)return(a=this.getAttributeNS(e.space,e.local))===(l=u+"")?null:a===o&&l===r?i:(r=l,i=n(o=a,u));this.removeAttributeNS(e.space,e.local)}}function Tt(e,n){return function(t){this.setAttribute(e,n.call(this,t))}}function Lt(e,n){return function(t){this.setAttributeNS(e.space,e.local,n.call(this,t))}}function Bt(e,n){var t,o;function r(){var r=n.apply(this,arguments);return r!==o&&(t=(o=r)&&Lt(e,r)),t}return r._value=n,r}function jt(e,n){var t,o;function r(){var r=n.apply(this,arguments);return r!==o&&(t=(o=r)&&Tt(e,r)),t}return r._value=n,r}function Vt(e,n){return function(){En(this,e).delay=+n.apply(this,arguments)}}function Ht(e,n){return n=+n,function(){En(this,e).delay=n}}function Xt(e,n){return function(){kn(this,e).duration=+n.apply(this,arguments)}}function Yt(e,n){return n=+n,function(){kn(this,e).duration=n}}function Wt(e,n){if("function"!==typeof n)throw new Error;return function(){kn(this,e).ease=n}}function Kt(e,n,t){var o,r,i=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||"start"===e}))}(n)?En:kn;return function(){var a=i(this,e),l=a.on;l!==o&&(r=(o=l).copy()).on(n,t),a.on=r}}var Ft=Le.prototype.constructor;function Gt(e){return function(){this.style.removeProperty(e)}}function qt(e,n,t){return function(o){this.style.setProperty(e,n.call(this,o),t)}}function Ut(e,n,t){var o,r;function i(){var i=n.apply(this,arguments);return i!==r&&(o=(r=i)&&qt(e,i,t)),o}return i._value=n,i}function Qt(e){return function(n){this.textContent=e.call(this,n)}}function $t(e){var n,t;function o(){var o=e.apply(this,arguments);return o!==t&&(n=(t=o)&&Qt(o)),n}return o._value=e,o}var Jt=0;function eo(e,n,t,o){this._groups=e,this._parents=n,this._name=t,this._id=o}function no(){return++Jt}var to=Le.prototype;eo.prototype=function(e){return Le().transition(e)}.prototype=(0,l.Z)({constructor:eo,select:function(e){var n=this._name,t=this._id;"function"!==typeof e&&(e=C(e));for(var o=this._groups,r=o.length,i=new Array(r),a=0;a<r;++a)for(var l,u,s=o[a],c=s.length,d=i[a]=new Array(c),f=0;f<c;++f)(l=s[f])&&(u=e.call(l,l.__data__,f,s))&&("__data__"in l&&(u.__data__=l.__data__),d[f]=u,Cn(d[f],n,t,f,d,_n(l,t)));return new eo(i,this._parents,n,t)},selectAll:function(e){var n=this._name,t=this._id;"function"!==typeof e&&(e=_(e));for(var o=this._groups,r=o.length,i=[],a=[],l=0;l<r;++l)for(var u,s=o[l],c=s.length,d=0;d<c;++d)if(u=s[d]){for(var f,h=e.call(u,u.__data__,d,s),v=_n(u,t),p=0,g=h.length;p<g;++p)(f=h[p])&&Cn(f,n,t,p,h,v);i.push(h),a.push(u)}return new eo(i,a,n,t)},selectChild:to.selectChild,selectChildren:to.selectChildren,filter:function(e){"function"!==typeof e&&(e=M(e));for(var n=this._groups,t=n.length,o=new Array(t),r=0;r<t;++r)for(var i,a=n[r],l=a.length,u=o[r]=[],s=0;s<l;++s)(i=a[s])&&e.call(i,i.__data__,s,a)&&u.push(i);return new eo(o,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var n=this._groups,t=e._groups,o=n.length,r=t.length,i=Math.min(o,r),a=new Array(o),l=0;l<i;++l)for(var u,s=n[l],c=t[l],d=s.length,f=a[l]=new Array(d),h=0;h<d;++h)(u=s[h]||c[h])&&(f[h]=u);for(;l<o;++l)a[l]=n[l];return new eo(a,this._parents,this._name,this._id)},selection:function(){return new Ft(this._groups,this._parents)},transition:function(){for(var e=this._name,n=this._id,t=no(),o=this._groups,r=o.length,i=0;i<r;++i)for(var a,l=o[i],u=l.length,s=0;s<u;++s)if(a=l[s]){var c=_n(a,n);Cn(a,e,t,s,l,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new eo(o,this._parents,e,t)},call:to.call,nodes:to.nodes,node:to.node,size:to.size,empty:to.empty,each:to.each,on:function(e,n){var t=this._id;return arguments.length<2?_n(this.node(),t).on.on(e):this.each(Kt(t,e,n))},attr:function(e,n){var t=X(e),o="transform"===t?An:Pt;return this.attrTween(e,"function"===typeof n?(t.local?Rt:At)(t,o,Ln(this,"attr."+e,n)):null==n?(t.local?Dt:Ot)(t):(t.local?It:zt)(t,o,n))},attrTween:function(e,n){var t="attr."+e;if(arguments.length<2)return(t=this.tween(t))&&t._value;if(null==n)return this.tween(t,null);if("function"!==typeof n)throw new Error;var o=X(e);return this.tween(t,(o.local?Bt:jt)(o,n))},style:function(e,n,t){var o="transform"===(e+="")?In:Pt;return null==n?this.styleTween(e,function(e,n){var t,o,r;return function(){var i=ee(this,e),a=(this.style.removeProperty(e),ee(this,e));return i===a?null:i===t&&a===o?r:r=n(t=i,o=a)}}(e,o)).on("end.style."+e,Gt(e)):"function"===typeof n?this.styleTween(e,function(e,n,t){var o,r,i;return function(){var a=ee(this,e),l=t(this),u=l+"";return null==l&&(this.style.removeProperty(e),u=l=ee(this,e)),a===u?null:a===o&&u===r?i:(r=u,i=n(o=a,l))}}(e,o,Ln(this,"style."+e,n))).each(function(e,n){var t,o,r,i,a="style."+n,l="end."+a;return function(){var u=kn(this,e),s=u.on,c=null==u.value[a]?i||(i=Gt(n)):void 0;s===t&&r===c||(o=(t=s).copy()).on(l,r=c),u.on=o}}(this._id,e)):this.styleTween(e,function(e,n,t){var o,r,i=t+"";return function(){var a=ee(this,e);return a===i?null:a===o?r:r=n(o=a,t)}}(e,o,n),t).on("end.style."+e,null)},styleTween:function(e,n,t){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(null==n)return this.tween(o,null);if("function"!==typeof n)throw new Error;return this.tween(o,Ut(e,n,null==t?"":t))},text:function(e){return this.tween("text","function"===typeof e?function(e){return function(){var n=e(this);this.textContent=null==n?"":n}}(Ln(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!==typeof e)throw new Error;return this.tween(n,$t(e))},remove:function(){return this.on("end.remove",function(e){return function(){var n=this.parentNode;for(var t in this.__transition)if(+t!==e)return;n&&n.removeChild(this)}}(this._id))},tween:function(e,n){var t=this._id;if(e+="",arguments.length<2){for(var o,r=_n(this.node(),t).tween,i=0,a=r.length;i<a;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((null==n?Rn:Tn)(t,e,n))},delay:function(e){var n=this._id;return arguments.length?this.each(("function"===typeof e?Vt:Ht)(n,e)):_n(this.node(),n).delay},duration:function(e){var n=this._id;return arguments.length?this.each(("function"===typeof e?Xt:Yt)(n,e)):_n(this.node(),n).duration},ease:function(e){var n=this._id;return arguments.length?this.each(Wt(n,e)):_n(this.node(),n).ease},easeVarying:function(e){if("function"!==typeof e)throw new Error;return this.each(function(e,n){return function(){var t=n.apply(this,arguments);if("function"!==typeof t)throw new Error;kn(this,e).ease=t}}(this._id,e))},end:function(){var e,n,t=this,o=t._id,r=t.size();return new Promise((function(i,a){var l={value:a},u={value:function(){0===--r&&i()}};t.each((function(){var t=kn(this,o),r=t.on;r!==e&&((n=(e=r).copy())._.cancel.push(l),n._.interrupt.push(l),n._.end.push(u)),t.on=n})),0===r&&i()}))}},Symbol.iterator,to[Symbol.iterator]);var oo={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function ro(e,n){for(var t;!(t=e.__transition)||!(t=t[n]);)if(!(e=e.parentNode))throw new Error("transition ".concat(n," not found"));return t}Le.prototype.interrupt=function(e){return this.each((function(){Mn(this,e)}))},Le.prototype.transition=function(e){var n,t;e instanceof eo?(n=e._id,e=e._name):(n=no(),(t=oo).time=hn(),e=null==e?null:e+"");for(var o=this._groups,r=o.length,i=0;i<r;++i)for(var a,l=o[i],u=l.length,s=0;s<u;++s)(a=l[s])&&Cn(a,e,n,s,l,t||ro(a,n));return new eo(o,this._parents,e,n)};var io=function(e){return function(){return e}};function ao(e,n){var t=n.sourceEvent,o=n.target,r=n.transform,i=n.dispatch;Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function lo(e,n,t){this.k=e,this.x=n,this.y=t}lo.prototype={constructor:lo,scale:function(e){return 1===e?this:new lo(this.k*e,this.x,this.y)},translate:function(e,n){return 0===e&0===n?this:new lo(this.k,this.x+this.k*e,this.y+this.k*n)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var uo=new lo(1,0,0);function so(e){for(;!e.__zoom;)if(!(e=e.parentNode))return uo;return e.__zoom}function co(e){e.stopImmediatePropagation()}function fo(e){e.preventDefault(),e.stopImmediatePropagation()}function ho(e){return(!e.ctrlKey||"wheel"===e.type)&&!e.button}function vo(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function po(){return this.__zoom||uo}function go(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function mo(){return navigator.maxTouchPoints||"ontouchstart"in this}function yo(e,n,t){var o=e.invertX(n[0][0])-t[0][0],r=e.invertX(n[1][0])-t[1][0],i=e.invertY(n[0][1])-t[0][1],a=e.invertY(n[1][1])-t[1][1];return e.translate(r>o?(o+r)/2:Math.min(0,o)||Math.max(0,r),a>i?(i+a)/2:Math.min(0,i)||Math.max(0,a))}function xo(){var e,n,t,o=ho,r=vo,i=yo,a=go,l=mo,u=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],c=250,d=on,f=b("start","zoom","end"),h=500,v=0,p=10;function g(e){e.property("__zoom",po).on("wheel.zoom",E,{passive:!1}).on("mousedown.zoom",k).on("dblclick.zoom",_).filter(l).on("touchstart.zoom",M).on("touchmove.zoom",N).on("touchend.zoom touchcancel.zoom",Z).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(e,n){return(n=Math.max(u[0],Math.min(u[1],n)))===e.k?e:new lo(n,e.x,e.y)}function y(e,n,t){var o=n[0]-t[0]*e.k,r=n[1]-t[1]*e.k;return o===e.x&&r===e.y?e:new lo(e.k,o,r)}function x(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function w(e,n,t,o){e.on("start.zoom",(function(){S(this,arguments).event(o).start()})).on("interrupt.zoom end.zoom",(function(){S(this,arguments).event(o).end()})).tween("zoom",(function(){var e=this,i=arguments,a=S(e,i).event(o),l=r.apply(e,i),u=null==t?x(l):"function"===typeof t?t.apply(e,i):t,s=Math.max(l[1][0]-l[0][0],l[1][1]-l[0][1]),c=e.__zoom,f="function"===typeof n?n.apply(e,i):n,h=d(c.invert(u).concat(s/c.k),f.invert(u).concat(s/f.k));return function(e){if(1===e)e=f;else{var n=h(e),t=s/n[2];e=new lo(t,u[0]-n[0]*t,u[1]-n[1]*t)}a.zoom(null,e)}}))}function S(e,n,t){return!t&&e.__zooming||new C(e,n)}function C(e,n){this.that=e,this.args=n,this.active=0,this.sourceEvent=null,this.extent=r.apply(e,n),this.taps=0}function E(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];if(o.apply(this,arguments)){var l=S(this,t).event(e),c=this.__zoom,d=Math.max(u[0],Math.min(u[1],c.k*Math.pow(2,a.apply(this,arguments)))),f=je(e);if(l.wheel)l.mouse[0][0]===f[0]&&l.mouse[0][1]===f[1]||(l.mouse[1]=c.invert(l.mouse[0]=f)),clearTimeout(l.wheel);else{if(c.k===d)return;l.mouse=[f,c.invert(f)],Mn(this),l.start()}fo(e),l.wheel=setTimeout(h,150),l.zoom("mouse",i(y(m(c,d),l.mouse[0],l.mouse[1]),l.extent,s))}function h(){l.wheel=null,l.end()}}function k(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];if(!t&&o.apply(this,arguments)){var l=e.currentTarget,u=S(this,r,!0).event(e),c=Be(e.view).on("mousemove.zoom",p,!0).on("mouseup.zoom",g,!0),d=je(e,l),f=e.clientX,h=e.clientY;We(e.view),co(e),u.mouse=[d,this.__zoom.invert(d)],Mn(this),u.start()}function p(e){if(fo(e),!u.moved){var n=e.clientX-f,t=e.clientY-h;u.moved=n*n+t*t>v}u.event(e).zoom("mouse",i(y(u.that.__zoom,u.mouse[0]=je(e,l),u.mouse[1]),u.extent,s))}function g(e){c.on("mousemove.zoom mouseup.zoom",null),Ke(e.view,u.moved),fo(e),u.event(e).end()}}function _(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),a=1;a<n;a++)t[a-1]=arguments[a];if(o.apply(this,arguments)){var l=this.__zoom,u=je(e.changedTouches?e.changedTouches[0]:e,this),d=l.invert(u),f=l.k*(e.shiftKey?.5:2),h=i(y(m(l,f),u,d),r.apply(this,t),s);fo(e),c>0?Be(this).transition().duration(c).call(w,h,u,e):Be(this).call(g.transform,h,u,e)}}function M(t){for(var r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];if(o.apply(this,arguments)){var l,u,s,c,d=t.touches,f=d.length,v=S(this,i,t.changedTouches.length===f).event(t);for(co(t),u=0;u<f;++u)c=[c=je(s=d[u],this),this.__zoom.invert(c),s.identifier],v.touch0?v.touch1||v.touch0[2]===c[2]||(v.touch1=c,v.taps=0):(v.touch0=c,l=!0,v.taps=1+!!e);e&&(e=clearTimeout(e)),l&&(v.taps<2&&(n=c[0],e=setTimeout((function(){e=null}),h)),Mn(this),v.start())}}function N(e){if(this.__zooming){for(var n=arguments.length,t=new Array(n>1?n-1:0),o=1;o<n;o++)t[o-1]=arguments[o];var r,a,l,u,c=S(this,t).event(e),d=e.changedTouches,f=d.length;for(fo(e),r=0;r<f;++r)l=je(a=d[r],this),c.touch0&&c.touch0[2]===a.identifier?c.touch0[0]=l:c.touch1&&c.touch1[2]===a.identifier&&(c.touch1[0]=l);if(a=c.that.__zoom,c.touch1){var h=c.touch0[0],v=c.touch0[1],p=c.touch1[0],g=c.touch1[1],x=(x=p[0]-h[0])*x+(x=p[1]-h[1])*x,w=(w=g[0]-v[0])*w+(w=g[1]-v[1])*w;a=m(a,Math.sqrt(x/w)),l=[(h[0]+p[0])/2,(h[1]+p[1])/2],u=[(v[0]+g[0])/2,(v[1]+g[1])/2]}else{if(!c.touch0)return;l=c.touch0[0],u=c.touch0[1]}c.zoom("touch",i(y(a,l,u),c.extent,s))}}function Z(e){for(var o=arguments.length,r=new Array(o>1?o-1:0),i=1;i<o;i++)r[i-1]=arguments[i];if(this.__zooming){var a,l,u=S(this,r).event(e),s=e.changedTouches,c=s.length;for(co(e),t&&clearTimeout(t),t=setTimeout((function(){t=null}),h),a=0;a<c;++a)l=s[a],u.touch0&&u.touch0[2]===l.identifier?delete u.touch0:u.touch1&&u.touch1[2]===l.identifier&&delete u.touch1;if(u.touch1&&!u.touch0&&(u.touch0=u.touch1,delete u.touch1),u.touch0)u.touch0[1]=this.__zoom.invert(u.touch0[0]);else if(u.end(),2===u.taps&&(l=je(l,this),Math.hypot(n[0]-l[0],n[1]-l[1])<p)){var d=Be(this).on("dblclick.zoom");d&&d.apply(this,arguments)}}}return g.transform=function(e,n,t,o){var r=e.selection?e.selection():e;r.property("__zoom",po),e!==r?w(e,n,t,o):r.interrupt().each((function(){S(this,arguments).event(o).start().zoom(null,"function"===typeof n?n.apply(this,arguments):n).end()}))},g.scaleBy=function(e,n,t,o){g.scaleTo(e,(function(){var e=this.__zoom.k,t="function"===typeof n?n.apply(this,arguments):n;return e*t}),t,o)},g.scaleTo=function(e,n,t,o){g.transform(e,(function(){var e=r.apply(this,arguments),o=this.__zoom,a=null==t?x(e):"function"===typeof t?t.apply(this,arguments):t,l=o.invert(a),u="function"===typeof n?n.apply(this,arguments):n;return i(y(m(o,u),a,l),e,s)}),t,o)},g.translateBy=function(e,n,t,o){g.transform(e,(function(){return i(this.__zoom.translate("function"===typeof n?n.apply(this,arguments):n,"function"===typeof t?t.apply(this,arguments):t),r.apply(this,arguments),s)}),null,o)},g.translateTo=function(e,n,t,o,a){g.transform(e,(function(){var e=r.apply(this,arguments),a=this.__zoom,l=null==o?x(e):"function"===typeof o?o.apply(this,arguments):o;return i(uo.translate(l[0],l[1]).scale(a.k).translate("function"===typeof n?-n.apply(this,arguments):-n,"function"===typeof t?-t.apply(this,arguments):-t),e,s)}),o,a)},C.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1===++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,n){return this.mouse&&"mouse"!==e&&(this.mouse[1]=n.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=n.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=n.invert(this.touch1[0])),this.that.__zoom=n,this.emit("zoom"),this},end:function(){return 0===--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var n=Be(this.that).datum();f.call(e,this.that,new ao(e,{sourceEvent:this.sourceEvent,target:g,type:e,transform:this.that.__zoom,dispatch:f}),n)}},g.wheelDelta=function(e){return arguments.length?(a="function"===typeof e?e:io(+e),g):a},g.filter=function(e){return arguments.length?(o="function"===typeof e?e:io(!!e),g):o},g.touchable=function(e){return arguments.length?(l="function"===typeof e?e:io(!!e),g):l},g.extent=function(e){return arguments.length?(r="function"===typeof e?e:io([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),g):r},g.scaleExtent=function(e){return arguments.length?(u[0]=+e[0],u[1]=+e[1],g):[u[0],u[1]]},g.translateExtent=function(e){return arguments.length?(s[0][0]=+e[0][0],s[1][0]=+e[1][0],s[0][1]=+e[0][1],s[1][1]=+e[1][1],g):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},g.constrain=function(e){return arguments.length?(i=e,g):i},g.duration=function(e){return arguments.length?(c=+e,g):c},g.interpolate=function(e){return arguments.length?(d=e,g):d},g.on=function(){var e=f.on.apply(f,arguments);return e===f?g:e},g.clickDistance=function(e){return arguments.length?(v=(e=+e)*e,g):Math.sqrt(v)},g.tapDistance=function(e){return arguments.length?(p=+e,g):p},g}so.prototype=lo.prototype;var wo,bo,So,Co,Eo,ko=function(){return"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001"},_o=function(e){return'Node type "'.concat(e,'" not found. Using fallback type "default".')},Mo=function(){return"The React Flow parent container needs a width and a height to render the graph."},No=function(){return"Only child nodes can use a parent extent."},Zo=function(){return"Can't create edge. An edge needs a source and a target."},Po=function(e){return'Marker type "'.concat(e,"\" doesn't exist.")},Oo=function(e,n){var t=n.id,o=n.sourceHandle,r=n.targetHandle;return"Couldn't create edge for ".concat(e,' handle id: "').concat(o?r:o,'", edge id: ').concat(t,".")},Do=function(){return"Handle: No node id found. Make sure to only use a Handle inside a custom Node."},zo=function(e){return'Edge type "'.concat(e,'" not found. Using fallback type "default".')},Io=function(e){return'Node with id "'.concat(e,'" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.')},Ao=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Ro=["Enter"," ","Escape"];!function(e){e.Strict="strict",e.Loose="loose"}(So||(So={})),function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"}(Co||(Co={})),function(e){e.Partial="partial",e.Full="full"}(Eo||(Eo={}));var To,Lo,Bo,jo={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};!function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"}(To||(To={})),function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"}(Lo||(Lo={})),function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"}(Bo||(Bo={}));var Vo=(wo={},(0,l.Z)(wo,Bo.Left,Bo.Right),(0,l.Z)(wo,Bo.Right,Bo.Left),(0,l.Z)(wo,Bo.Top,Bo.Bottom),(0,l.Z)(wo,Bo.Bottom,Bo.Top),wo);function Ho(e){return null===e?null:e?"valid":"invalid"}var Xo=function(e){return"id"in e&&"source"in e&&"target"in e},Yo=function(e){return"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e)},Wo=function(e){var n,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0],o=br(e),r=o.width,i=o.height,a=null!==(n=e.origin)&&void 0!==n?n:t,l=r*a[0],u=i*a[1];return{x:e.position.x-l,y:e.position.y-u}},Ko=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(0===e.size)return{x:0,y:0,width:0,height:0};var t={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach((function(e){if(void 0===n.filter||n.filter(e)){var o=sr(e);t=ir(t,o)}})),lr(t)},Fo=function(e,n){var t,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0,1],r=(0,u.Z)(o,3),i=r[0],a=r[1],l=r[2],c=arguments.length>3&&void 0!==arguments[3]&&arguments[3],f=arguments.length>4&&void 0!==arguments[4]&&arguments[4],h=(0,d.Z)((0,d.Z)({},gr(n,[i,a,l])),{},{width:n.width/l,height:n.height/l}),v=[],p=(0,s.Z)(e);try{for(p.s();!(t=p.n()).done;){var g,m,y,x,w,b,S=(0,u.Z)(t.value,2),C=S[1],E=C.measured,k=C.selectable,_=void 0===k||k,M=C.hidden,N=void 0!==M&&M,Z=null!==(g=null!==(m=null!==(y=E.width)&&void 0!==y?y:C.width)&&void 0!==m?m:C.initialWidth)&&void 0!==g?g:null,P=null!==(x=null!==(w=null!==(b=E.height)&&void 0!==b?b:C.height)&&void 0!==w?w:C.initialHeight)&&void 0!==x?x:null;if(!(f&&!_||N)){var O=dr(h,ur(C)),D=null===Z||null===P,z=c&&O>0,I=(null!==Z&&void 0!==Z?Z:0)*(null!==P&&void 0!==P?P:0),A=D||z||O>=I;(A||C.dragging)&&v.push(C)}}}catch(R){p.e(R)}finally{p.f()}return v},Go=function(e,n){var t=new Set;return e.forEach((function(e){t.add(e.id)})),n.filter((function(e){return t.has(e.source)||t.has(e.target)}))};function qo(e,n){var t=new Map,o=null!==n&&void 0!==n&&n.nodes?new Set(n.nodes.map((function(e){return e.id}))):null;return e.forEach((function(e){!(e.measured.width&&e.measured.height&&((null===n||void 0===n?void 0:n.includeHiddenNodes)||!e.hidden))||o&&!o.has(e.id)||t.set(e.id,e)})),t}function Uo(e,n){return Qo.apply(this,arguments)}function Qo(){return Qo=(0,o.Z)(r.mark((function e(n,t){var o,i,a,l,u,s,c,d,f,h,v;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=n.nodes,u=n.width,s=n.height,c=n.panZoom,d=n.minZoom,f=n.maxZoom,0!==l.size){e.next=3;break}return e.abrupt("return",Promise.resolve(!1));case 3:return h=Ko(l),v=yr(h,u,s,null!==(o=null===t||void 0===t?void 0:t.minZoom)&&void 0!==o?o:d,null!==(i=null===t||void 0===t?void 0:t.maxZoom)&&void 0!==i?i:f,null!==(a=null===t||void 0===t?void 0:t.padding)&&void 0!==a?a:.1),e.next=7,c.setViewport(v,{duration:null===t||void 0===t?void 0:t.duration});case 7:return e.abrupt("return",Promise.resolve(!0));case 8:case"end":return e.stop()}}),e)}))),Qo.apply(this,arguments)}function $o(e){var n,t=e.nodeId,o=e.nextPosition,r=e.nodeLookup,i=e.nodeOrigin,a=void 0===i?[0,0]:i,l=e.nodeExtent,u=e.onError,s=r.get(t),c=s.parentId?r.get(s.parentId):void 0,d=c?c.internals.positionAbsolute:{x:0,y:0},f=d.x,h=d.y,v=null!==(n=s.origin)&&void 0!==n?n:a,p=function(e,n){var t,o,r,i;return n&&"parent"!==n?[n[0],[n[1][0]-(null!==(t=null===(o=e.measured)||void 0===o?void 0:o.width)&&void 0!==t?t:0),n[1][1]-(null!==(r=null===(i=e.measured)||void 0===i?void 0:i.height)&&void 0!==r?r:0)]]:n}(s,s.extent||l);if("parent"!==s.extent||s.expandParent)c&&wr(s.extent)&&(p=[[s.extent[0][0]+f,s.extent[0][1]+h],[s.extent[1][0]+f,s.extent[1][1]+h]]);else if(c){var g=s.measured.width,m=s.measured.height,y=c.measured.width,x=c.measured.height;g&&m&&y&&x&&(p=[[f,h],[f+y-g,h+x-m]])}else null===u||void 0===u||u("005",No());var w=wr(p)?tr(o,p):o;return{position:{x:w.x-f+s.measured.width*v[0],y:w.y-h+s.measured.height*v[1]},positionAbsolute:w}}function Jo(e){return er.apply(this,arguments)}function er(){return er=(0,o.Z)(r.mark((function e(n){var t,o,i,a,l,u,c,d,f,h,v,p,g,m,y,x,w,b,S,C;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.nodesToRemove,o=void 0===t?[]:t,i=n.edgesToRemove,a=void 0===i?[]:i,l=n.nodes,u=n.edges,c=n.onBeforeDelete,d=new Set(o.map((function(e){return e.id}))),f=[],h=(0,s.Z)(l),e.prev=4,p=function(){var e=v.value;if(!1===e.deletable)return"continue";var n=d.has(e.id),t=!n&&e.parentId&&f.find((function(n){return n.id===e.parentId}));(n||t)&&f.push(e)},h.s();case 7:if((v=h.n()).done){e.next=13;break}if("continue"!==p()){e.next=11;break}return e.abrupt("continue",11);case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),h.e(e.t0);case 18:return e.prev=18,h.f(),e.finish(18);case 21:g=new Set(a.map((function(e){return e.id}))),m=u.filter((function(e){return!1!==e.deletable})),y=Go(f,m),x=y,w=(0,s.Z)(m);try{for(S=function(){var e=b.value;g.has(e.id)&&!x.find((function(n){return n.id===e.id}))&&x.push(e)},w.s();!(b=w.n()).done;)S()}catch(r){w.e(r)}finally{w.f()}if(c){e.next=29;break}return e.abrupt("return",{edges:x,nodes:f});case 29:return e.next=31,c({nodes:f,edges:x});case 31:if("boolean"!==typeof(C=e.sent)){e.next=34;break}return e.abrupt("return",C?{edges:x,nodes:f}:{edges:[],nodes:[]});case 34:return e.abrupt("return",C);case 35:case"end":return e.stop()}}),e,null,[[4,15,18,21]])}))),er.apply(this,arguments)}var nr=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(e,n),t)},tr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0},n=arguments.length>1?arguments[1]:void 0;return{x:nr(e.x,n[0][0],n[1][0]),y:nr(e.y,n[0][1],n[1][1])}},or=function(e,n,t){return e<n?nr(Math.abs(e-n),1,n)/n:e>t?-nr(Math.abs(e-t),1,n)/n:0},rr=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:15,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:40,r=or(e.x,o,n.width-o)*t,i=or(e.y,o,n.height-o)*t;return[r,i]},ir=function(e,n){return{x:Math.min(e.x,n.x),y:Math.min(e.y,n.y),x2:Math.max(e.x2,n.x2),y2:Math.max(e.y2,n.y2)}},ar=function(e){var n=e.x,t=e.y;return{x:n,y:t,x2:n+e.width,y2:t+e.height}},lr=function(e){var n=e.x,t=e.y;return{x:n,y:t,width:e.x2-n,height:e.y2-t}},ur=function(e){var n,t,o,r,i,a,l,u,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0],c=Yo(e)?e.internals.positionAbsolute:Wo(e,s),d=c.x,f=c.y;return{x:d,y:f,width:null!==(n=null!==(t=null!==(o=null===(r=e.measured)||void 0===r?void 0:r.width)&&void 0!==o?o:e.width)&&void 0!==t?t:e.initialWidth)&&void 0!==n?n:0,height:null!==(i=null!==(a=null!==(l=null===(u=e.measured)||void 0===u?void 0:u.height)&&void 0!==l?l:e.height)&&void 0!==a?a:e.initialHeight)&&void 0!==i?i:0}},sr=function(e){var n,t,o,r,i,a,l,u,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0],c=Yo(e)?e.internals.positionAbsolute:Wo(e,s),d=c.x,f=c.y;return{x:d,y:f,x2:d+(null!==(n=null!==(t=null!==(o=null===(r=e.measured)||void 0===r?void 0:r.width)&&void 0!==o?o:e.width)&&void 0!==t?t:e.initialWidth)&&void 0!==n?n:0),y2:f+(null!==(i=null!==(a=null!==(l=null===(u=e.measured)||void 0===u?void 0:u.height)&&void 0!==l?l:e.height)&&void 0!==a?a:e.initialHeight)&&void 0!==i?i:0)}},cr=function(e,n){return lr(ir(ar(e),ar(n)))},dr=function(e,n){var t=Math.max(0,Math.min(e.x+e.width,n.x+n.width)-Math.max(e.x,n.x)),o=Math.max(0,Math.min(e.y+e.height,n.y+n.height)-Math.max(e.y,n.y));return Math.ceil(t*o)},fr=function(e){return hr(e.width)&&hr(e.height)&&hr(e.x)&&hr(e.y)},hr=function(e){return!isNaN(e)&&isFinite(e)},vr=function(e,n){0},pr=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1];return{x:n[0]*Math.round(e.x/n[0]),y:n[1]*Math.round(e.y/n[1])}},gr=function(e,n){var t=e.x,o=e.y,r=(0,u.Z)(n,3),i=r[0],a=r[1],l=r[2],s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1],d={x:(t-i)/l,y:(o-a)/l};return s?pr(d,c):d},mr=function(e,n){var t=e.x,o=e.y,r=(0,u.Z)(n,3),i=r[0],a=r[1],l=r[2];return{x:t*l+i,y:o*l+a}},yr=function(e,n,t,o,r,i){var a=n/(e.width*(1+i)),l=t/(e.height*(1+i)),u=Math.min(a,l),s=nr(u,o,r);return{x:n/2-(e.x+e.width/2)*s,y:t/2-(e.y+e.height/2)*s,zoom:s}},xr=function(){var e,n;return"undefined"!==typeof navigator&&(null===(e=navigator)||void 0===e||null===(n=e.userAgent)||void 0===n?void 0:n.indexOf("Mac"))>=0};function wr(e){return void 0!==e&&"parent"!==e}function br(e){var n,t,o,r,i,a,l,u;return{width:null!==(n=null!==(t=null!==(o=null===(r=e.measured)||void 0===r?void 0:r.width)&&void 0!==o?o:e.width)&&void 0!==t?t:e.initialWidth)&&void 0!==n?n:0,height:null!==(i=null!==(a=null!==(l=null===(u=e.measured)||void 0===u?void 0:u.height)&&void 0!==l?l:e.height)&&void 0!==a?a:e.initialHeight)&&void 0!==i?i:0}}function Sr(e){var n,t,o,r,i,a;return void 0!==(null!==(n=null!==(t=null===(o=e.measured)||void 0===o?void 0:o.width)&&void 0!==t?t:e.width)&&void 0!==n?n:e.initialWidth)&&void 0!==(null!==(r=null!==(i=null===(a=e.measured)||void 0===a?void 0:a.height)&&void 0!==i?i:e.height)&&void 0!==r?r:e.initialHeight)}function Cr(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{width:0,height:0},t=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0,i=t,a=(0,d.Z)({},e);i;){var l=o.get(i);if(i=null===l||void 0===l?void 0:l.parentId,l){var u,s,c=l.origin||r;a.x+=l.internals.positionAbsolute.x-(null!==(u=n.width)&&void 0!==u?u:0)*c[0],a.y+=l.internals.positionAbsolute.y-(null!==(s=n.height)&&void 0!==s?s:0)*c[1]}}return a}function Er(e,n){var t=n.snapGrid,o=void 0===t?[0,0]:t,r=n.snapToGrid,i=void 0!==r&&r,a=n.transform,l=Pr(e),u=l.x,s=l.y,c=gr({x:u,y:s},a),f=i?pr(c,o):c,h=f.x,v=f.y;return(0,d.Z)({xSnapped:h,ySnapped:v},c)}var kr=function(e){return{width:e.offsetWidth,height:e.offsetHeight}},_r=function(e){var n,t;return(null===(n=e.getRootNode)||void 0===n?void 0:n.call(e))||(null===(t=window)||void 0===t?void 0:t.document)},Mr=["INPUT","SELECT","TEXTAREA"];function Nr(e){var n,t,o=(null===(n=e.composedPath)||void 0===n||null===(t=n.call(e))||void 0===t?void 0:t[0])||e.target;return Mr.includes(null===o||void 0===o?void 0:o.nodeName)||(null===o||void 0===o?void 0:o.hasAttribute("contenteditable"))||!(null===o||void 0===o||!o.closest(".nokey"))}var Zr=function(e){return"clientX"in e},Pr=function(e,n){var t,o,r,i,a=Zr(e),l=a?e.clientX:null===(t=e.touches)||void 0===t?void 0:t[0].clientX,u=a?e.clientY:null===(o=e.touches)||void 0===o?void 0:o[0].clientY;return{x:l-(null!==(r=null===n||void 0===n?void 0:n.left)&&void 0!==r?r:0),y:u-(null!==(i=null===n||void 0===n?void 0:n.top)&&void 0!==i?i:0)}},Or=function(e,n,t,o,r){var i=n.querySelectorAll(".".concat(e));return i&&i.length?Array.from(i).map((function(n){var i=n.getBoundingClientRect();return(0,d.Z)({id:n.getAttribute("data-handleid"),type:e,nodeId:r,position:n.getAttribute("data-handlepos"),x:(i.left-t.left)/o,y:(i.top-t.top)/o},kr(n))})):null};function Dr(e){var n=e.sourceX,t=e.sourceY,o=e.targetX,r=e.targetY,i=e.sourceControlX,a=e.sourceControlY,l=.125*n+.375*i+.375*e.targetControlX+.125*o,u=.125*t+.375*a+.375*e.targetControlY+.125*r;return[l,u,Math.abs(l-n),Math.abs(u-t)]}function zr(e,n){return e>=0?.5*e:25*n*Math.sqrt(-e)}function Ir(e){var n=e.pos,t=e.x1,o=e.y1,r=e.x2,i=e.y2,a=e.c;switch(n){case Bo.Left:return[t-zr(t-r,a),o];case Bo.Right:return[t+zr(r-t,a),o];case Bo.Top:return[t,o-zr(o-i,a)];case Bo.Bottom:return[t,o+zr(i-o,a)]}}function Ar(e){var n=e.sourceX,t=e.sourceY,o=e.sourcePosition,r=void 0===o?Bo.Bottom:o,i=e.targetX,a=e.targetY,l=e.targetPosition,s=void 0===l?Bo.Top:l,c=e.curvature,d=void 0===c?.25:c,f=Ir({pos:r,x1:n,y1:t,x2:i,y2:a,c:d}),h=(0,u.Z)(f,2),v=h[0],p=h[1],g=Ir({pos:s,x1:i,y1:a,x2:n,y2:t,c:d}),m=(0,u.Z)(g,2),y=m[0],x=m[1],w=Dr({sourceX:n,sourceY:t,targetX:i,targetY:a,sourceControlX:v,sourceControlY:p,targetControlX:y,targetControlY:x}),b=(0,u.Z)(w,4),S=b[0],C=b[1],E=b[2],k=b[3];return["M".concat(n,",").concat(t," C").concat(v,",").concat(p," ").concat(y,",").concat(x," ").concat(i,",").concat(a),S,C,E,k]}function Rr(e){var n=e.sourceX,t=e.sourceY,o=e.targetX,r=e.targetY,i=Math.abs(o-n)/2,a=o<n?o+i:o-i,l=Math.abs(r-t)/2;return[a,r<t?r+l:r-l,i,l]}function Tr(e){var n=e.sourceNode,t=e.targetNode,o=e.width,r=e.height,i=e.transform,a=ir(sr(n),sr(t));a.x===a.x2&&(a.x2+=1),a.y===a.y2&&(a.y2+=1);var l={x:-i[0]/i[2],y:-i[1]/i[2],width:o/i[2],height:r/i[2]};return dr(l,lr(a))>0}var Lr=function(e){var n=e.source,t=e.sourceHandle,o=e.target,r=e.targetHandle;return"xy-edge__".concat(n).concat(t||"","-").concat(o).concat(r||"")};function Br(e){var n=e.sourceX,t=e.sourceY,o=e.targetX,r=e.targetY,i=Rr({sourceX:n,sourceY:t,targetX:o,targetY:r}),a=(0,u.Z)(i,4),l=a[0],s=a[1],c=a[2],d=a[3];return["M ".concat(n,",").concat(t,"L ").concat(o,",").concat(r),l,s,c,d]}var jr=(bo={},(0,l.Z)(bo,Bo.Left,{x:-1,y:0}),(0,l.Z)(bo,Bo.Right,{x:1,y:0}),(0,l.Z)(bo,Bo.Top,{x:0,y:-1}),(0,l.Z)(bo,Bo.Bottom,{x:0,y:1}),bo),Vr=function(e,n){return Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2))};function Hr(e){var n,t,o=e.source,r=e.sourcePosition,i=void 0===r?Bo.Bottom:r,a=e.target,l=e.targetPosition,s=void 0===l?Bo.Top:l,d=e.center,f=e.offset,h=jr[i],v=jr[s],p={x:o.x+h.x*f,y:o.y+h.y*f},g={x:a.x+v.x*f,y:a.y+v.y*f},m=function(e){var n=e.source,t=e.sourcePosition,o=void 0===t?Bo.Bottom:t,r=e.target;return o===Bo.Left||o===Bo.Right?n.x<r.x?{x:1,y:0}:{x:-1,y:0}:n.y<r.y?{x:0,y:1}:{x:0,y:-1}}({source:p,sourcePosition:i,target:g}),y=0!==m.x?"x":"y",x=m[y],w=[],b={x:0,y:0},S={x:0,y:0},C=Rr({sourceX:o.x,sourceY:o.y,targetX:a.x,targetY:a.y}),E=(0,u.Z)(C,4),k=E[0],_=E[1],M=E[2],N=E[3];if(h[y]*v[y]===-1){var Z,P;n=null!==(Z=d.x)&&void 0!==Z?Z:k,t=null!==(P=d.y)&&void 0!==P?P:_;var O=[{x:n,y:p.y},{x:n,y:g.y}],D=[{x:p.x,y:t},{x:g.x,y:t}];w=h[y]===x?"x"===y?O:D:"x"===y?D:O}else{var z=[{x:p.x,y:g.y}],I=[{x:g.x,y:p.y}];if(w="x"===y?h.x===x?I:z:h.y===x?z:I,i===s){var A=Math.abs(o[y]-a[y]);if(A<=f){var R=Math.min(f-1,f-A);h[y]===x?b[y]=(p[y]>o[y]?-1:1)*R:S[y]=(g[y]>a[y]?-1:1)*R}}if(i!==s){var T="x"===y?"y":"x",L=h[y]===v[T],B=p[T]>g[T],j=p[T]<g[T];(1===h[y]&&(!L&&B||L&&j)||1!==h[y]&&(!L&&j||L&&B))&&(w="x"===y?z:I)}var V={x:p.x+b.x,y:p.y+b.y},H={x:g.x+S.x,y:g.y+S.y};Math.max(Math.abs(V.x-w[0].x),Math.abs(H.x-w[0].x))>=Math.max(Math.abs(V.y-w[0].y),Math.abs(H.y-w[0].y))?(n=(V.x+H.x)/2,t=w[0].y):(n=w[0].x,t=(V.y+H.y)/2)}return[[o,{x:p.x+b.x,y:p.y+b.y}].concat((0,c.Z)(w),[{x:g.x+S.x,y:g.y+S.y},a]),n,t,M,N]}function Xr(e){var n=e.sourceX,t=e.sourceY,o=e.sourcePosition,r=void 0===o?Bo.Bottom:o,i=e.targetX,a=e.targetY,l=e.targetPosition,s=void 0===l?Bo.Top:l,c=e.borderRadius,d=void 0===c?5:c,f=e.centerX,h=e.centerY,v=e.offset,p=Hr({source:{x:n,y:t},sourcePosition:r,target:{x:i,y:a},targetPosition:s,center:{x:f,y:h},offset:void 0===v?20:v}),g=(0,u.Z)(p,5),m=g[0],y=g[1],x=g[2],w=g[3],b=g[4],S=m.reduce((function(e,n,t){var o="";return o=t>0&&t<m.length-1?function(e,n,t,o){var r=Math.min(Vr(e,n)/2,Vr(n,t)/2,o),i=n.x,a=n.y;if(e.x===i&&i===t.x||e.y===a&&a===t.y)return"L".concat(i," ").concat(a);if(e.y===a){var l=e.x<t.x?-1:1,u=e.y<t.y?1:-1;return"L ".concat(i+r*l,",").concat(a,"Q ").concat(i,",").concat(a," ").concat(i,",").concat(a+r*u)}var s=e.x<t.x?1:-1,c=e.y<t.y?-1:1;return"L ".concat(i,",").concat(a+r*c,"Q ").concat(i,",").concat(a," ").concat(i+r*s,",").concat(a)}(m[t-1],n,m[t+1],d):"".concat(0===t?"M":"L").concat(n.x," ").concat(n.y),e+=o}),"");return[S,y,x,w,b]}function Yr(e){var n;return e&&!!(e.internals.handleBounds||null!==(n=e.handles)&&void 0!==n&&n.length)&&!!(e.measured.width||e.width||e.initialWidth)}function Wr(e){if(!e)return null;var n,t=[],o=[],r=(0,s.Z)(e);try{for(r.s();!(n=r.n()).done;){var i,a,l=n.value;l.width=null!==(i=l.width)&&void 0!==i?i:1,l.height=null!==(a=l.height)&&void 0!==a?a:1,"source"===l.type?t.push(l):"target"===l.type&&o.push(l)}}catch(u){r.e(u)}finally{r.f()}return{source:t,target:o}}function Kr(e,n){var t,o,r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Bo.Left,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=(null!==(t=null===n||void 0===n?void 0:n.x)&&void 0!==t?t:0)+e.internals.positionAbsolute.x,u=(null!==(o=null===n||void 0===n?void 0:n.y)&&void 0!==o?o:0)+e.internals.positionAbsolute.y,s=null!==n&&void 0!==n?n:br(e),c=s.width,d=s.height;if(a)return{x:l+c/2,y:u+d/2};var f=null!==(r=null===n||void 0===n?void 0:n.position)&&void 0!==r?r:i;switch(f){case Bo.Top:return{x:l+c/2,y:u};case Bo.Right:return{x:l+c,y:u+d/2};case Bo.Bottom:return{x:l+c/2,y:u+d};case Bo.Left:return{x:l,y:u+d/2}}}function Fr(e,n){return e&&(n?e.find((function(e){return e.id===n})):e[0])||null}function Gr(e,n){if(!e)return"";if("string"===typeof e)return e;var t=n?"".concat(n,"__"):"";return"".concat(t).concat(Object.keys(e).sort().map((function(n){return"".concat(n,"=").concat(e[n])})).join("&"))}var qr={nodeOrigin:[0,0],elevateNodesOnSelect:!0,defaults:{}},Ur=(0,d.Z)((0,d.Z)({},qr),{},{checkEquality:!0});function Qr(e,n,t,o){var r=(0,d.Z)((0,d.Z)({},Ur),o),i=new Map(n);n.clear(),t.clear();var a,l=null!==o&&void 0!==o&&o.elevateNodesOnSelect?1e3:0,u=(0,s.Z)(e);try{for(u.s();!(a=u.n()).done;){var c,f,h,v,p=a.value,g=i.get(p.id);if(r.checkEquality&&p===(null===(c=g)||void 0===c?void 0:c.internals.userNode))n.set(p.id,g);else g=(0,d.Z)((0,d.Z)((0,d.Z)({},r.defaults),p),{},{measured:{width:null===(f=p.measured)||void 0===f?void 0:f.width,height:null===(h=p.measured)||void 0===h?void 0:h.height},internals:{positionAbsolute:Wo(p,r.nodeOrigin),handleBounds:p.measured?null===(v=g)||void 0===v?void 0:v.internals.handleBounds:void 0,z:Jr(p,l),userNode:p}}),n.set(p.id,g);p.parentId&&$r(g,n,t,o)}}catch(m){u.e(m)}finally{u.f()}}function $r(e,n,t,o){var r=(0,d.Z)((0,d.Z)({},qr),o),i=e.parentId,a=n.get(i);if(a){var l=t.get(i);l?l.set(e.id,e):t.set(i,new Map([[e.id,e]]));var u=null!==o&&void 0!==o&&o.elevateNodesOnSelect?1e3:0,s=function(e,n,t,o){var r,i=Wo(e,t),a=Jr(e,o),l=null!==(r=n.internals.z)&&void 0!==r?r:0;return{x:n.internals.positionAbsolute.x+i.x,y:n.internals.positionAbsolute.y+i.y,z:l>a?l:a}}(e,a,r.nodeOrigin,u),c=s.x,f=s.y,h=s.z,v=e.internals.positionAbsolute,p=c!==v.x||f!==v.y;(p||h!==e.internals.z)&&(e.internals=(0,d.Z)((0,d.Z)({},e.internals),{},{positionAbsolute:p?{x:c,y:f}:v,z:h}))}else console.warn("Parent node ".concat(i," not found. Please make sure that parent nodes are in front of their child nodes in the nodes array."))}function Jr(e,n){return(hr(e.zIndex)?e.zIndex:0)+(e.selected?n:0)}function ei(e,n,t){var o,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[0,0],i=[],a=new Map,l=(0,s.Z)(e);try{for(l.s();!(o=l.n()).done;){var u,c,d=o.value,f=n.get(d.parentId);if(f){var h=null!==(u=null===(c=a.get(d.parentId))||void 0===c?void 0:c.expandedRect)&&void 0!==u?u:ur(f),v=cr(h,d.rect);a.set(d.parentId,{expandedRect:v,parent:f})}}}catch(p){l.e(p)}finally{l.f()}return a.size>0&&a.forEach((function(n,o){var a,l,u=n.expandedRect,s=n.parent,c=s.internals.positionAbsolute,d=br(s),f=null!==(a=s.origin)&&void 0!==a?a:r,h=u.x<c.x?Math.round(Math.abs(c.x-u.x)):0,v=u.y<c.y?Math.round(Math.abs(c.y-u.y)):0,p=Math.max(d.width,Math.round(u.width)),g=Math.max(d.height,Math.round(u.height)),m=(p-d.width)*f[0],y=(g-d.height)*f[1];(h>0||v>0||m||y)&&(i.push({id:o,type:"position",position:{x:s.position.x-h+m,y:s.position.y-v+y}}),null===(l=t.get(o))||void 0===l||l.forEach((function(n){e.some((function(e){return e.id===n.id}))||i.push({id:n.id,type:"position",position:{x:n.position.x+h,y:n.position.y+v}})})));(d.width<u.width||d.height<u.height||h||v)&&i.push({id:o,type:"dimensions",setAttributes:!0,dimensions:{width:p+(h?f[0]*h-m:0),height:g+(v?f[1]*v-y:0)}})})),i}function ni(){return(ni=(0,o.Z)(r.mark((function e(n){var t,o,i,a,l,u,s,c;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.delta,o=n.panZoom,i=n.transform,a=n.translateExtent,l=n.width,u=n.height,o&&(t.x||t.y)){e.next=3;break}return e.abrupt("return",Promise.resolve(!1));case 3:return e.next=5,o.setViewportConstrained({x:i[0]+t.x,y:i[1]+t.y,zoom:i[2]},[[0,0],[l,u]],a);case 5:return s=e.sent,c=!!s&&(s.x!==i[0]||s.y!==i[1]||s.k!==i[2]),e.abrupt("return",Promise.resolve(c));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ti(e,n,t){e.clear(),n.clear();var o,r=(0,s.Z)(t);try{for(r.s();!(o=r.n()).done;){var i=o.value,a=i.source,l=i.target,u=i.sourceHandle,c=void 0===u?null:u,d=i.targetHandle,f=void 0===d?null:d,h="".concat(a,"-source-").concat(c),v="".concat(l,"-target-").concat(f),p=e.get(h)||new Map,g=e.get(v)||new Map,m={edgeId:i.id,source:a,target:l,sourceHandle:c,targetHandle:f};n.set(i.id,i),e.set(h,p.set("".concat(l,"-").concat(f),m)),e.set(v,g.set("".concat(a,"-").concat(c),m))}}catch(y){r.e(y)}finally{r.f()}}function oi(e,n){if(!e.parentId)return!1;var t=n.get(e.parentId);return!!t&&(!!t.selected||oi(t,n))}function ri(e,n,t){var o=e;do{var r;if(null!==(r=o)&&void 0!==r&&r.matches(n))return!0;if(o===t)return!1;o=o.parentElement}while(o);return!1}function ii(e){var n,t,o=e.nodeId,r=e.dragItems,i=e.nodeLookup,a=e.dragging,l=void 0===a||a,c=[],f=(0,s.Z)(r);try{for(f.s();!(t=f.n()).done;){var h,v=(0,u.Z)(t.value,2),p=v[0],g=v[1],m=null===(h=i.get(p))||void 0===h?void 0:h.internals.userNode;m&&c.push((0,d.Z)((0,d.Z)({},m),{},{position:g.position,dragging:l}))}}catch(x){f.e(x)}finally{f.f()}if(!o)return[c[0],c];var y=i.get(o).internals.userNode;return[(0,d.Z)((0,d.Z)({},y),{},{position:(null===(n=r.get(o))||void 0===n?void 0:n.position)||y.position,dragging:l}),c]}function ai(e){var n=e.onNodeMouseDown,t=e.getStoreItems,i=e.onDragStart,a=e.onDrag,l=e.onDragStop,c={x:null,y:null},d=0,f=new Map,h=!1,v={x:0,y:0},p=null,g=!1,m=null,y=!1;return{update:function(e){var x=e.noDragClassName,w=e.handleSelector,b=e.domNode,S=e.isSelectable,C=e.nodeId,E=e.nodeClickDistance,k=void 0===E?0:E;function _(e,n){var o=e.x,r=e.y,i=t(),l=i.nodeLookup,d=i.nodeExtent,h=i.snapGrid,v=i.snapToGrid,p=i.nodeOrigin,g=i.onNodeDrag,m=i.onSelectionDrag,y=i.onError,x=i.updateNodePositions;c={x:o,y:r};var w=!1,b={x:0,y:0,x2:0,y2:0};if(f.size>1&&d){var S=Ko(f);b=ar(S)}var E,k=(0,s.Z)(f);try{for(k.s();!(E=k.n()).done;){var _=(0,u.Z)(E.value,2),M=_[0],N=_[1],Z={x:o-N.distance.x,y:r-N.distance.y};v&&(Z=pr(Z,h));var P=[[d[0][0],d[0][1]],[d[1][0],d[1][1]]];if(f.size>1&&d&&!N.extent){var O=N.internals.positionAbsolute,D=O.x-b.x+d[0][0],z=O.x+N.measured.width-b.x2+d[1][0];P=[[D,O.y-b.y+d[0][1]],[z,O.y+N.measured.height-b.y2+d[1][1]]]}var I=$o({nodeId:M,nextPosition:Z,nodeLookup:l,nodeExtent:P,nodeOrigin:p,onError:y}),A=I.position,R=I.positionAbsolute;w=w||N.position.x!==A.x||N.position.y!==A.y,N.position=A,N.internals.positionAbsolute=R}}catch(V){k.e(V)}finally{k.f()}if(w&&(x(f,!0),n&&(a||g||!C&&m))){var T=ii({nodeId:C,dragItems:f,nodeLookup:l}),L=(0,u.Z)(T,2),B=L[0],j=L[1];null===a||void 0===a||a(n,f,B,j),null===g||void 0===g||g(n,B,j),C||null===m||void 0===m||m(n,j)}}function M(){return N.apply(this,arguments)}function N(){return N=(0,o.Z)(r.mark((function e(){var n,o,i,a,l,s,f,h,g,m;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p){e.next=2;break}return e.abrupt("return");case 2:if(n=t(),o=n.transform,i=n.panBy,a=n.autoPanSpeed,l=rr(v,p,a),s=(0,u.Z)(l,2),f=s[0],h=s[1],0===f&&0===h){e.next=11;break}return c.x=(null!==(g=c.x)&&void 0!==g?g:0)-f/o[2],c.y=(null!==(m=c.y)&&void 0!==m?m:0)-h/o[2],e.next=9,i({x:f,y:h});case 9:if(!e.sent){e.next=11;break}_(c,null);case 11:d=requestAnimationFrame(M);case 12:case"end":return e.stop()}}),e)}))),N.apply(this,arguments)}function Z(e){var o,r=t(),a=r.nodeLookup,l=r.multiSelectionActive,d=r.nodesDraggable,h=r.transform,v=r.snapGrid,p=r.snapToGrid,m=r.selectNodesOnDrag,y=r.onNodeDragStart,x=r.onSelectionDragStart,w=r.unselectNodesAndEdges;(g=!0,m&&S||l||!C)||(null!==(o=a.get(C))&&void 0!==o&&o.selected||w());S&&m&&C&&(null===n||void 0===n||n(C));var b=Er(e.sourceEvent,{transform:h,snapGrid:v,snapToGrid:p});if(c=b,f=function(e,n,t,o){var r,i=new Map,a=(0,s.Z)(e);try{for(a.s();!(r=a.n()).done;){var l=(0,u.Z)(r.value,2),c=l[0],d=l[1];if((d.selected||d.id===o)&&(!d.parentId||!oi(d,e))&&(d.draggable||n&&"undefined"===typeof d.draggable)){var f,h,v=e.get(c);v&&i.set(c,{id:c,position:v.position||{x:0,y:0},distance:{x:t.x-v.internals.positionAbsolute.x,y:t.y-v.internals.positionAbsolute.y},extent:v.extent,parentId:v.parentId,origin:v.origin,expandParent:v.expandParent,internals:{positionAbsolute:v.internals.positionAbsolute||{x:0,y:0}},measured:{width:null!==(f=v.measured.width)&&void 0!==f?f:0,height:null!==(h=v.measured.height)&&void 0!==h?h:0}})}}}catch(p){a.e(p)}finally{a.f()}return i}(a,d,b,C),f.size>0&&(i||y||!C&&x)){var E=ii({nodeId:C,dragItems:f,nodeLookup:a}),k=(0,u.Z)(E,2),_=k[0],M=k[1];null===i||void 0===i||i(e.sourceEvent,f,_,M),null===y||void 0===y||y(e.sourceEvent,_,M),C||null===x||void 0===x||x(e.sourceEvent,M)}}m=Be(b);var P=Je().clickDistance(k).on("start",(function(e){var n=t(),o=n.domNode,r=n.nodeDragThreshold,i=n.transform,a=n.snapGrid,l=n.snapToGrid;y=!1,0===r&&Z(e);var u=Er(e.sourceEvent,{transform:i,snapGrid:a,snapToGrid:l});c=u,p=(null===o||void 0===o?void 0:o.getBoundingClientRect())||null,v=Pr(e.sourceEvent,p)})).on("drag",(function(e){var n=t(),o=n.autoPanOnNodeDrag,r=n.transform,i=n.snapGrid,a=n.snapToGrid,l=n.nodeDragThreshold,u=Er(e.sourceEvent,{transform:r,snapGrid:i,snapToGrid:a});if("touchmove"===e.sourceEvent.type&&e.sourceEvent.touches.length>1&&(y=!0),!y){if(!h&&o&&g&&(h=!0,M()),!g){var s,d,m=u.xSnapped-(null!==(s=c.x)&&void 0!==s?s:0),x=u.ySnapped-(null!==(d=c.y)&&void 0!==d?d:0);Math.sqrt(m*m+x*x)>l&&Z(e)}(c.x!==u.xSnapped||c.y!==u.ySnapped)&&f&&g&&(v=Pr(e.sourceEvent,p),_(u,e.sourceEvent))}})).on("end",(function(e){if(g&&!y&&(h=!1,g=!1,cancelAnimationFrame(d),f.size>0)){var n=t(),o=n.nodeLookup,r=n.updateNodePositions,i=n.onNodeDragStop,a=n.onSelectionDragStop;if(r(f,!1),l||i||!C&&a){var s=ii({nodeId:C,dragItems:f,nodeLookup:o,dragging:!1}),c=(0,u.Z)(s,2),v=c[0],p=c[1];null===l||void 0===l||l(e.sourceEvent,f,v,p),null===i||void 0===i||i(e.sourceEvent,v,p),C||null===a||void 0===a||a(e.sourceEvent,p)}}})).filter((function(e){var n=e.target;return!e.button&&(!x||!ri(n,".".concat(x),b))&&(!w||ri(n,w,b))}));m.call(P)},destroy:function(){var e;null===(e=m)||void 0===e||e.on(".drag",null)}}}function li(e,n,t,o){var r=null;return[(n[t]||[]).reduce((function(n,i){if(e.id===o.nodeId&&t===o.handleType&&i.id===o.handleId)r=i;else{var a=Kr(e,i,i.position,!0);n.push((0,d.Z)((0,d.Z)({},i),a))}return n}),[]),r]}function ui(e,n){return e||(null!==n&&void 0!==n&&n.classList.contains("target")?"target":null!==n&&void 0!==n&&n.classList.contains("source")?"source":null)}var si=function(){return!0};function ci(e,n){var t=n.handle,o=n.connectionMode,r=n.fromNodeId,i=n.fromHandleId,a=n.fromType,l=n.doc,u=n.lib,s=n.flowId,c=n.isValidConnection,f=void 0===c?si:c,h=n.handleLookup,v="target"===a,p=t?l.querySelector(".".concat(u,'-flow__handle[data-id="').concat(s,"-").concat(null===t||void 0===t?void 0:t.nodeId,"-").concat(null===t||void 0===t?void 0:t.id,"-").concat(null===t||void 0===t?void 0:t.type,'"]')):null,g=Pr(e),m=g.x,y=g.y,x=l.elementFromPoint(m,y),w=null!==x&&void 0!==x&&x.classList.contains("".concat(u,"-flow__handle"))?x:p,b={handleDomNode:w,isValid:!1,connection:null,toHandle:null};if(w){var S=ui(void 0,w),C=w.getAttribute("data-nodeid"),E=w.getAttribute("data-handleid"),k=w.classList.contains("connectable"),_=w.classList.contains("connectableend");if(!C)return b;var M={source:v?C:r,sourceHandle:v?E:i,target:v?r:C,targetHandle:v?i:E};b.connection=M;var N=k&&_&&(o===So.Strict?v&&"source"===S||!v&&"target"===S:C!==r||E!==i);b.isValid=N&&f(M);var Z=null===h||void 0===h?void 0:h.get("".concat(C,"-").concat(S,"-").concat(E));Z&&(b.toHandle=(0,d.Z)({},Z))}return b}var di={onPointerDown:function(e,n){var t,o=n.connectionMode,r=n.connectionRadius,i=n.handleId,a=n.nodeId,l=n.edgeUpdaterType,f=n.isTarget,h=n.domNode,v=n.nodeLookup,p=n.lib,g=n.autoPanOnConnect,m=n.flowId,y=n.panBy,x=n.cancelConnection,w=n.onConnectStart,b=n.onConnect,S=n.onConnectEnd,C=n.isValidConnection,E=void 0===C?si:C,k=n.onReconnectEnd,_=n.updateConnection,M=n.getTransform,N=n.getFromHandle,Z=n.autoPanSpeed,P=_r(e.target),O=0,D=Pr(e),z=D.x,I=D.y,A=null===P||void 0===P?void 0:P.elementFromPoint(z,I),R=ui(l,A),T=null===h||void 0===h?void 0:h.getBoundingClientRect();if(T&&R){var L=Pr(e,T),B=!1,j=null,V=!1,H=null,X=function(e){var n,t=e.nodeLookup,o=e.nodeId,r=e.handleId,i=e.handleType,a=new Map,l={nodeId:o,handleId:r,handleType:i},d=null,f=(0,s.Z)(t.values());try{for(f.s();!(n=f.n()).done;){var h=n.value;if(h.internals.handleBounds){var v=li(h,h.internals.handleBounds,"source",l),p=(0,u.Z)(v,2),g=p[0],m=p[1],y=li(h,h.internals.handleBounds,"target",l),x=(0,u.Z)(y,2),w=x[0],b=x[1];d=d||(null!==m&&void 0!==m?m:b),[].concat((0,c.Z)(g),(0,c.Z)(w)).forEach((function(e){return a.set("".concat(e.nodeId,"-").concat(e.type,"-").concat(e.id),e)}))}}}catch(E){f.e(E)}finally{f.f()}if(!d){var S=t.get(o);if(null!==S&&void 0!==S&&S.internals.handleBounds){l.handleType="source"===i?"target":"source";var C=li(S,S.internals.handleBounds,l.handleType,l);d=(0,u.Z)(C,2)[1]}}return[a,d]}({nodeLookup:v,nodeId:a,handleId:i,handleType:R}),Y=(0,u.Z)(X,2),W=Y[0],K=Y[1],F=(0,d.Z)((0,d.Z)({},K),{},{nodeId:a,type:R,position:K.position}),G=v.get(a),q={inProgress:!0,isValid:null,from:Kr(G,F,Bo.Left,!0),fromHandle:F,fromPosition:F.position,fromNode:G,to:L,toHandle:null,toPosition:Vo[F.position],toNode:null};_(q);var U=q;null===w||void 0===w||w(e,{nodeId:a,handleId:i,handleType:R}),P.addEventListener("mousemove",$),P.addEventListener("mouseup",J),P.addEventListener("touchmove",$),P.addEventListener("touchend",J)}function Q(){if(g&&T){var e=rr(L,T,Z),n=(0,u.Z)(e,2),t=n[0],o=n[1];y({x:t,y:o}),O=requestAnimationFrame(Q)}}function $(e){if(N()&&F){var n=M();L=Pr(e,T),t=function(e,n,t){var o,r=[],i=1/0,a=(0,s.Z)(t.values());try{for(a.s();!(o=a.n()).done;){var l=o.value,u=Math.sqrt(Math.pow(l.x-e.x,2)+Math.pow(l.y-e.y,2));u<=n&&(u<i?r=[l]:u===i&&r.push(l),i=u)}}catch(c){a.e(c)}finally{a.f()}return r.length?1===r.length?r[0]:r.find((function(e){return"target"===e.type}))||r[0]:null}(gr(L,n,!1,[1,1]),r,W),B||(Q(),B=!0);var l=ci(e,{handle:t,connectionMode:o,fromNodeId:a,fromHandleId:i,fromType:f?"target":"source",isValidConnection:E,doc:P,lib:p,flowId:m,handleLookup:W});H=l.handleDomNode,j=l.connection,V=function(e,n){var t=null;return n?t=!0:e&&!n&&(t=!1),t}(!!t,l.isValid);var u=(0,d.Z)((0,d.Z)({},U),{},{isValid:V,to:t&&V?mr({x:t.x,y:t.y},n):L,toHandle:l.toHandle,toPosition:V&&l.toHandle?l.toHandle.position:Vo[F.position],toNode:l.toHandle?v.get(l.toHandle.nodeId):null});V&&t&&U.toHandle&&u.toHandle&&U.toHandle.type===u.toHandle.type&&U.toHandle.nodeId===u.toHandle.nodeId&&U.toHandle.id===u.toHandle.id||(_(u),U=u)}else J(e)}function J(e){(t||H)&&j&&V&&(null===b||void 0===b||b(j)),null===S||void 0===S||S(e),l&&(null===k||void 0===k||k(e)),x(),cancelAnimationFrame(O),B=!1,V=!1,j=null,H=null,P.removeEventListener("mousemove",$),P.removeEventListener("mouseup",J),P.removeEventListener("touchmove",$),P.removeEventListener("touchend",J)}},isValid:ci};var fi,hi=function(e){return{x:e.x,y:e.y,zoom:e.k}},vi=function(e){var n=e.x,t=e.y,o=e.zoom;return uo.translate(n,t).scale(o)},pi=function(e,n){return e.target.closest(".".concat(n))},gi=function(e,n){return 2===n&&Array.isArray(e)&&e.includes(2)},mi=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},o="number"===typeof n&&n>0;return o||t(),o?e.transition().duration(n).on("end",t):e},yi=function(e){var n=e.ctrlKey&&xr()?10:1;return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*n};function xi(e){var n=e.domNode,t=e.minZoom,i=e.maxZoom,a=e.paneClickDistance,l=e.translateExtent,u=e.viewport,s=e.onPanZoom,c=e.onPanZoomStart,d=e.onPanZoomEnd,f=e.onTransformChange,h=e.onDraggingChange,v={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},p=n.getBoundingClientRect(),g=xo().clickDistance(!hr(a)||a<0?0:a).scaleExtent([t,i]).translateExtent(l),m=Be(n).call(g);S({x:u.x,y:u.y,zoom:nr(u.zoom,t,i)},[[0,0],[p.width,p.height]],l);var y=m.on("wheel.zoom"),x=m.on("dblclick.zoom");function w(e,n){return m?new Promise((function(t){null===g||void 0===g||g.transform(mi(m,null===n||void 0===n?void 0:n.duration,(function(){return t(!0)})),e)})):Promise.resolve(!1)}function b(){g.on("zoom",null)}function S(e,n,t){return C.apply(this,arguments)}function C(){return C=(0,o.Z)(r.mark((function e(n,t,o){var i,a;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=vi(n),!(a=null===g||void 0===g?void 0:g.constrain()(i,t,o))){e.next=5;break}return e.next=5,w(a);case 5:return e.abrupt("return",new Promise((function(e){return e(a)})));case 6:case"end":return e.stop()}}),e)}))),C.apply(this,arguments)}function E(){return E=(0,o.Z)(r.mark((function e(n,t){var o;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=vi(n),e.next=3,w(o,t);case 3:return e.abrupt("return",new Promise((function(e){return e(o)})));case 4:case"end":return e.stop()}}),e)}))),E.apply(this,arguments)}return g.wheelDelta(yi),{update:function(e){var n=e.noWheelClassName,t=e.noPanClassName,o=e.onPaneContextMenu,r=e.userSelectionActive,i=e.panOnScroll,a=e.panOnDrag,l=e.panOnScrollMode,u=e.panOnScrollSpeed,p=e.preventScrolling,w=e.zoomOnPinch,S=e.zoomOnScroll,C=e.zoomOnDoubleClick,E=e.zoomActivationKeyPressed,k=e.lib;r&&!v.isZoomingOrPanning&&b();var _=i&&!E&&!r?function(e){var n=e.zoomPanValues,t=e.noWheelClassName,o=e.d3Selection,r=e.d3Zoom,i=e.panOnScrollMode,a=e.panOnScrollSpeed,l=e.zoomOnPinch,u=e.onPanZoomStart,s=e.onPanZoom,c=e.onPanZoomEnd;return function(e){if(pi(e,t))return!1;e.preventDefault(),e.stopImmediatePropagation();var d=o.property("__zoom").k||1;if(e.ctrlKey&&l){var f=je(e),h=yi(e),v=d*Math.pow(2,h);r.scaleTo(o,v,f,e)}else{var p=1===e.deltaMode?20:1,g=i===Co.Vertical?0:e.deltaX*p,m=i===Co.Horizontal?0:e.deltaY*p;!xr()&&e.shiftKey&&i!==Co.Vertical&&(g=e.deltaY*p,m=0),r.translateBy(o,-g/d*a,-m/d*a,{internal:!0});var y=hi(o.property("__zoom"));clearTimeout(n.panScrollTimeout),n.isPanScrolling||(n.isPanScrolling=!0,null===u||void 0===u||u(e,y)),n.isPanScrolling&&(null===s||void 0===s||s(e,y),n.panScrollTimeout=setTimeout((function(){null===c||void 0===c||c(e,y),n.isPanScrolling=!1}),150))}}}({zoomPanValues:v,noWheelClassName:n,d3Selection:m,d3Zoom:g,panOnScrollMode:l,panOnScrollSpeed:u,zoomOnPinch:w,onPanZoomStart:c,onPanZoom:s,onPanZoomEnd:d}):function(e){var n=e.noWheelClassName,t=e.preventScrolling,o=e.d3ZoomHandler;return function(e,r){if(!t&&"wheel"===e.type&&!e.ctrlKey||pi(e,n))return null;e.preventDefault(),o.call(this,e,r)}}({noWheelClassName:n,preventScrolling:p,d3ZoomHandler:y});if(m.on("wheel.zoom",_,{passive:!1}),!r){var M=function(e){var n=e.zoomPanValues,t=e.onDraggingChange,o=e.onPanZoomStart;return function(e){var r,i,a;if(null===(r=e.sourceEvent)||void 0===r||!r.internal){var l=hi(e.transform);n.mouseButton=(null===(i=e.sourceEvent)||void 0===i?void 0:i.button)||0,n.isZoomingOrPanning=!0,n.prevViewport=l,"mousedown"===(null===(a=e.sourceEvent)||void 0===a?void 0:a.type)&&t(!0),o&&(null===o||void 0===o||o(e.sourceEvent,l))}}}({zoomPanValues:v,onDraggingChange:h,onPanZoomStart:c});g.on("start",M);var N=function(e){var n=e.zoomPanValues,t=e.panOnDrag,o=e.onPaneContextMenu,r=e.onTransformChange,i=e.onPanZoom;return function(e){var a,l,u;n.usedRightMouseButton=!(!o||!gi(t,null!==(a=n.mouseButton)&&void 0!==a?a:0)),null!==(l=e.sourceEvent)&&void 0!==l&&l.sync||r([e.transform.x,e.transform.y,e.transform.k]),!i||null!==(u=e.sourceEvent)&&void 0!==u&&u.internal||null===i||void 0===i||i(e.sourceEvent,hi(e.transform))}}({zoomPanValues:v,panOnDrag:a,onPaneContextMenu:!!o,onPanZoom:s,onTransformChange:f});g.on("zoom",N);var Z=function(e){var n=e.zoomPanValues,t=e.panOnDrag,o=e.panOnScroll,r=e.onDraggingChange,i=e.onPanZoomEnd,a=e.onPaneContextMenu;return function(e){var l,u,s,c;if((null===(l=e.sourceEvent)||void 0===l||!l.internal)&&(n.isZoomingOrPanning=!1,a&&gi(t,null!==(u=n.mouseButton)&&void 0!==u?u:0)&&!n.usedRightMouseButton&&e.sourceEvent&&a(e.sourceEvent),n.usedRightMouseButton=!1,r(!1),i&&(s=n.prevViewport,c=e.transform,s.x!==c.x||s.y!==c.y||s.zoom!==c.k))){var d=hi(e.transform);n.prevViewport=d,clearTimeout(n.timerId),n.timerId=setTimeout((function(){null===i||void 0===i||i(e.sourceEvent,d)}),o?150:0)}}}({zoomPanValues:v,panOnDrag:a,panOnScroll:i,onPaneContextMenu:o,onPanZoomEnd:d,onDraggingChange:h});g.on("end",Z)}var P=function(e){var n=e.zoomActivationKeyPressed,t=e.zoomOnScroll,o=e.zoomOnPinch,r=e.panOnDrag,i=e.panOnScroll,a=e.zoomOnDoubleClick,l=e.userSelectionActive,u=e.noWheelClassName,s=e.noPanClassName,c=e.lib;return function(e){var d,f=n||t,h=o&&e.ctrlKey;if(1===e.button&&"mousedown"===e.type&&(pi(e,"".concat(c,"-flow__node"))||pi(e,"".concat(c,"-flow__edge"))))return!0;if(!r&&!f&&!i&&!a&&!o)return!1;if(l)return!1;if(pi(e,u)&&"wheel"===e.type)return!1;if(pi(e,s)&&("wheel"!==e.type||i&&"wheel"===e.type&&!n))return!1;if(!o&&e.ctrlKey&&"wheel"===e.type)return!1;if(!o&&"touchstart"===e.type&&(null===(d=e.touches)||void 0===d?void 0:d.length)>1)return e.preventDefault(),!1;if(!f&&!i&&!h&&"wheel"===e.type)return!1;if(!r&&("mousedown"===e.type||"touchstart"===e.type))return!1;if(Array.isArray(r)&&!r.includes(e.button)&&"mousedown"===e.type)return!1;var v=Array.isArray(r)&&r.includes(e.button)||!e.button||e.button<=1;return(!e.ctrlKey||"wheel"===e.type)&&v}}({zoomActivationKeyPressed:E,panOnDrag:a,zoomOnScroll:S,panOnScroll:i,zoomOnDoubleClick:C,zoomOnPinch:w,userSelectionActive:r,noPanClassName:t,noWheelClassName:n,lib:k});g.filter(P),C?m.on("dblclick.zoom",x):m.on("dblclick.zoom",null)},destroy:b,setViewport:function(e,n){return E.apply(this,arguments)},setViewportConstrained:S,getViewport:function(){var e=m?so(m.node()):{x:0,y:0,k:1};return{x:e.x,y:e.y,zoom:e.k}},scaleTo:function(e,n){return m?new Promise((function(t){null===g||void 0===g||g.scaleTo(mi(m,null===n||void 0===n?void 0:n.duration,(function(){return t(!0)})),e)})):Promise.resolve(!1)},scaleBy:function(e,n){return m?new Promise((function(t){null===g||void 0===g||g.scaleBy(mi(m,null===n||void 0===n?void 0:n.duration,(function(){return t(!0)})),e)})):Promise.resolve(!1)},setScaleExtent:function(e){null===g||void 0===g||g.scaleExtent(e)},setTranslateExtent:function(e){null===g||void 0===g||g.translateExtent(e)},syncViewport:function(e){if(m){var n=vi(e),t=m.property("__zoom");t.k===e.zoom&&t.x===e.x&&t.y===e.y||null===g||void 0===g||g.transform(m,n,null,{sync:!0})}},setClickDistance:function(e){var n=!hr(e)||e<0?0:e;null===g||void 0===g||g.clickDistance(n)}}}!function(e){e.Line="line",e.Handle="handle"}(fi||(fi={}));function wi(e,n){return Math.max(0,n-e)}function bi(e,n){return Math.max(0,e-n)}function Si(e,n,t){return Math.max(0,n-e,e-t)}function Ci(e,n){return e?!n:n}var Ei={width:0,height:0,x:0,y:0},ki=(0,d.Z)((0,d.Z)({},Ei),{},{pointerX:0,pointerY:0,aspectRatio:1});function _i(e,n,t){var o,r,i=n.position.x+e.position.x,a=n.position.y+e.position.y,l=null!==(o=e.measured.width)&&void 0!==o?o:0,u=null!==(r=e.measured.height)&&void 0!==r?r:0,s=t[0]*l,c=t[1]*u;return[[i-s,a-c],[i+l-s,a+u-c]]}function Mi(e){var n=e.domNode,t=e.nodeId,o=e.getStoreItems,r=e.onChange,i=e.onEnd,a=Be(n);return{update:function(e){var n=e.controlPosition,l=e.boundaries,c=e.keepAspectRatio,f=e.onResizeStart,h=e.onResize,v=e.onResizeEnd,p=e.shouldResize,g=(0,d.Z)({},Ei),m=(0,d.Z)({},ki),y=function(e){return{isHorizontal:e.includes("right")||e.includes("left"),isVertical:e.includes("bottom")||e.includes("top"),affectsX:e.includes("left"),affectsY:e.includes("top")}}(n),x=void 0,w=[],b=void 0,S=void 0,C=void 0,E=Je().on("start",(function(e){var n,r,i,a,l=o(),c=l.nodeLookup,h=l.transform,v=l.snapGrid,p=l.snapToGrid,y=l.nodeOrigin;if(x=c.get(t)){var E=Er(e.sourceEvent,{transform:h,snapGrid:v,snapToGrid:p}),k=E.xSnapped,_=E.ySnapped;g={width:null!==(n=x.measured.width)&&void 0!==n?n:0,height:null!==(r=x.measured.height)&&void 0!==r?r:0,x:null!==(i=x.position.x)&&void 0!==i?i:0,y:null!==(a=x.position.y)&&void 0!==a?a:0},m=(0,d.Z)((0,d.Z)({},g),{},{pointerX:k,pointerY:_,aspectRatio:g.width/g.height}),b=void 0,x.parentId&&("parent"===x.extent||x.expandParent)&&(b=c.get(x.parentId),S=b&&"parent"===x.extent?function(e){return[[0,0],[e.measured.width,e.measured.height]]}(b):void 0),w=[],C=void 0;var M,N=(0,s.Z)(c);try{for(N.s();!(M=N.n()).done;){var Z=(0,u.Z)(M.value,2),P=Z[0],O=Z[1];if(O.parentId===t&&(w.push({id:P,position:(0,d.Z)({},O.position),extent:O.extent}),"parent"===O.extent||O.expandParent)){var D,z=_i(O,x,null!==(D=O.origin)&&void 0!==D?D:y);C=C?[[Math.min(z[0][0],C[0][0]),Math.min(z[0][1],C[0][1])],[Math.max(z[1][0],C[1][0]),Math.max(z[1][1],C[1][1])]]:z}}}catch(I){N.e(I)}finally{N.f()}null===f||void 0===f||f(e,(0,d.Z)({},g))}})).on("drag",(function(e){var n,t=o(),i=t.transform,a=t.snapGrid,u=t.snapToGrid,s=t.nodeOrigin,f=Er(e.sourceEvent,{transform:i,snapGrid:a,snapToGrid:u}),v=[];if(x){var E=g,k=E.x,_=E.y,M=E.width,N=E.height,Z={},P=null!==(n=x.origin)&&void 0!==n?n:s,O=function(e,n,t,o,r,i,a,l){var u=n.affectsX,s=n.affectsY,c=n.isHorizontal,d=n.isVertical,f=c&&d,h=t.xSnapped,v=t.ySnapped,p=o.minWidth,g=o.maxWidth,m=o.minHeight,y=o.maxHeight,x=e.x,w=e.y,b=e.width,S=e.height,C=e.aspectRatio,E=Math.floor(c?h-e.pointerX:0),k=Math.floor(d?v-e.pointerY:0),_=b+(u?-E:E),M=S+(s?-k:k),N=-i[0]*b,Z=-i[1]*S,P=Si(_,p,g),O=Si(M,m,y);if(a){var D=0,z=0;u&&E<0?D=wi(x+E+N,a[0][0]):!u&&E>0&&(D=bi(x+_+N,a[1][0])),s&&k<0?z=wi(w+k+Z,a[0][1]):!s&&k>0&&(z=bi(w+M+Z,a[1][1])),P=Math.max(P,D),O=Math.max(O,z)}if(l){var I=0,A=0;u&&E>0?I=bi(x+E,l[0][0]):!u&&E<0&&(I=wi(x+_,l[1][0])),s&&k>0?A=bi(w+k,l[0][1]):!s&&k<0&&(A=wi(w+M,l[1][1])),P=Math.max(P,I),O=Math.max(O,A)}if(r){if(c){var R=Si(_/C,m,y)*C;if(P=Math.max(P,R),a){var T=0;T=!u&&!s||u&&!s&&f?bi(w+Z+_/C,a[1][1])*C:wi(w+Z+(u?E:-E)/C,a[0][1])*C,P=Math.max(P,T)}if(l){var L=0;L=!u&&!s||u&&!s&&f?wi(w+_/C,l[1][1])*C:bi(w+(u?E:-E)/C,l[0][1])*C,P=Math.max(P,L)}}if(d){var B=Si(M*C,p,g)/C;if(O=Math.max(O,B),a){var j=0;j=!u&&!s||s&&!u&&f?bi(x+M*C+N,a[1][0])/C:wi(x+(s?k:-k)*C+N,a[0][0])/C,O=Math.max(O,j)}if(l){var V=0;V=!u&&!s||s&&!u&&f?wi(x+M*C,l[1][0])/C:bi(x+(s?k:-k)*C,l[0][0])/C,O=Math.max(O,V)}}}k+=k<0?O:-O,E+=E<0?P:-P,r&&(f?_>M*C?k=(Ci(u,s)?-E:E)/C:E=(Ci(u,s)?-k:k)*C:c?(k=E/C,s=u):(E=k*C,u=s));var H=u?x+E:x,X=s?w+k:w;return{width:b+(u?-E:E),height:S+(s?-k:k),x:i[0]*E*(u?-1:1)+H,y:i[1]*k*(s?-1:1)+X}}(m,y,f,l,c,P,S,C),D=O.width,z=O.height,I=O.x,A=O.y,R=D!==M,T=z!==N,L=I!==k&&R,B=A!==_&&T;if(L||B||R||T){if((L||B||1===P[0]||1===P[1])&&(Z.x=L?I:g.x,Z.y=B?A:g.y,g.x=Z.x,g.y=Z.y,w.length>0))for(var j=I-k,V=A-_,H=0,X=w;H<X.length;H++){var Y=X[H];Y.position={x:Y.position.x-j+P[0]*(D-M),y:Y.position.y-V+P[1]*(z-N)},v.push(Y)}if((R||T)&&(Z.width=R?D:g.width,Z.height=T?z:g.height,g.width=Z.width,g.height=Z.height),b&&x.expandParent){var W,K,F=P[0]*(null!==(W=Z.width)&&void 0!==W?W:0);Z.x&&Z.x<F&&(g.x=F,m.x=m.x-(Z.x-F));var G=P[1]*(null!==(K=Z.height)&&void 0!==K?K:0);Z.y&&Z.y<G&&(g.y=G,m.y=m.y-(Z.y-G))}var q=function(e){var n=e.width,t=e.prevWidth,o=e.height,r=e.prevHeight,i=e.affectsX,a=e.affectsY,l=n-t,u=o-r,s=[l>0?1:l<0?-1:0,u>0?1:u<0?-1:0];return l&&i&&(s[0]=-1*s[0]),u&&a&&(s[1]=-1*s[1]),s}({width:g.width,prevWidth:M,height:g.height,prevHeight:N,affectsX:y.affectsX,affectsY:y.affectsY}),U=(0,d.Z)((0,d.Z)({},g),{},{direction:q});!1!==(null===p||void 0===p?void 0:p(e,U))&&(null===h||void 0===h||h(e,U),r(Z,v))}}})).on("end",(function(e){null===v||void 0===v||v(e,(0,d.Z)({},g)),null===i||void 0===i||i()}));a.call(E)},destroy:function(){a.on(".drag",null)}}}var Ni=t(725),Zi=function(e){var n,t=new Set,o=function(e,o){var r="function"===typeof e?e(n):e;if(!Object.is(r,n)){var i=n;n=(null!=o?o:"object"!==typeof r||null===r)?r:Object.assign({},n,r),t.forEach((function(e){return e(n,i)}))}},r=function(){return n},i={setState:o,getState:r,getInitialState:function(){return a},subscribe:function(e){return t.add(e),function(){return t.delete(e)}},destroy:function(){console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}},a=n=e(o,r,i);return i},Pi=function(e){return e?Zi(e):Zi},Oi=a.useDebugValue,Di=Ni.useSyncExternalStoreWithSelector,zi=function(e){return e};function Ii(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:zi,t=arguments.length>2?arguments[2]:void 0,o=Di(e.subscribe,e.getState,e.getServerState||e.getInitialState,n,t);return Oi(o),o}var Ai=function(e,n){var t=Pi(e),o=function(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n;return Ii(t,e,o)};return Object.assign(o,t),o};function Ri(e,n){if(Object.is(e,n))return!0;if("object"!==typeof e||null===e||"object"!==typeof n||null===n)return!1;if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;var t,o=(0,s.Z)(e);try{for(o.s();!(t=o.n()).done;){var r=(0,u.Z)(t.value,2),i=r[0],a=r[1];if(!Object.is(a,n.get(i)))return!1}}catch(g){o.e(g)}finally{o.f()}return!0}if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;var l,c=(0,s.Z)(e);try{for(c.s();!(l=c.n()).done;){var d=l.value;if(!n.has(d))return!1}}catch(g){c.e(g)}finally{c.f()}return!0}var f=Object.keys(e);if(f.length!==Object.keys(n).length)return!1;for(var h=0,v=f;h<v.length;h++){var p=v[h];if(!Object.prototype.hasOwnProperty.call(n,p)||!Object.is(e[p],n[p]))return!1}return!0}t(4164);var Ti,Li,Bi=["position","children","className","style"],ji=["type","position","isValidConnection","isConnectable","isConnectableStart","isConnectableEnd","id","onConnect","children","className","onMouseDown","onTouchStart"],Vi=["x","y","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","children","className"],Hi=["id"],Xi=["nodes","edges","defaultNodes","defaultEdges","className","nodeTypes","edgeTypes","onNodeClick","onEdgeClick","onInit","onMove","onMoveStart","onMoveEnd","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","onNodeMouseEnter","onNodeMouseMove","onNodeMouseLeave","onNodeContextMenu","onNodeDoubleClick","onNodeDragStart","onNodeDrag","onNodeDragStop","onNodesDelete","onEdgesDelete","onDelete","onSelectionChange","onSelectionDragStart","onSelectionDrag","onSelectionDragStop","onSelectionContextMenu","onSelectionStart","onSelectionEnd","onBeforeDelete","connectionMode","connectionLineType","connectionLineStyle","connectionLineComponent","connectionLineContainerStyle","deleteKeyCode","selectionKeyCode","selectionOnDrag","selectionMode","panActivationKeyCode","multiSelectionKeyCode","zoomActivationKeyCode","snapToGrid","snapGrid","onlyRenderVisibleElements","selectNodesOnDrag","nodesDraggable","nodesConnectable","nodesFocusable","nodeOrigin","edgesFocusable","edgesReconnectable","elementsSelectable","defaultViewport","minZoom","maxZoom","translateExtent","preventScrolling","nodeExtent","defaultMarkerColor","zoomOnScroll","zoomOnPinch","panOnScroll","panOnScrollSpeed","panOnScrollMode","zoomOnDoubleClick","panOnDrag","onPaneClick","onPaneMouseEnter","onPaneMouseMove","onPaneMouseLeave","onPaneScroll","onPaneContextMenu","paneClickDistance","nodeClickDistance","children","onReconnect","onReconnectStart","onReconnectEnd","onEdgeContextMenu","onEdgeDoubleClick","onEdgeMouseEnter","onEdgeMouseMove","onEdgeMouseLeave","reconnectRadius","onNodesChange","onEdgesChange","noDragClassName","noWheelClassName","noPanClassName","fitView","fitViewOptions","connectOnClick","attributionPosition","proOptions","defaultEdgeOptions","elevateNodesOnSelect","elevateEdgesOnSelect","disableKeyboardA11y","autoPanOnConnect","autoPanOnNodeDrag","autoPanSpeed","connectionRadius","isValidConnection","onError","style","id","nodeDragThreshold","viewport","onViewportChange","width","height","colorMode","debug"],Yi=["children","className"],Wi=(0,a.createContext)(null),Ki=Wi.Provider,Fi=ko();function Gi(e,n){var t=(0,a.useContext)(Wi);if(null===t)throw new Error(Fi);return Ii(t,e,n)}function qi(){var e=(0,a.useContext)(Wi);if(null===e)throw new Error(Fi);return(0,a.useMemo)((function(){return{getState:e.getState,setState:e.setState,subscribe:e.subscribe}}),[e])}var Ui={display:"none"},Qi={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},$i="react-flow__node-desc",Ji="react-flow__edge-desc",ea=function(e){return e.ariaLiveMessage};function na(e){var n=e.rfId,t=Gi(ea);return(0,h.jsx)("div",{id:"".concat("react-flow__aria-live","-").concat(n),"aria-live":"assertive","aria-atomic":"true",style:Qi,children:t})}function ta(e){var n=e.rfId,t=e.disableKeyboardA11y;return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{id:"".concat($i,"-").concat(n),style:Ui,children:["Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),(0,h.jsx)("div",{id:"".concat(Ji,"-").concat(n),style:Ui,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!t&&(0,h.jsx)(na,{rfId:n})]})}var oa=function(e){return e.userSelectionActive?"none":"all"};function ra(e){var n=e.position,t=void 0===n?"top-left":n,o=e.children,r=e.className,i=e.style,a=(0,f.Z)(e,Bi),l=Gi(oa),u="".concat(t).split("-");return(0,h.jsx)("div",(0,d.Z)((0,d.Z)({className:v(["react-flow__panel",r].concat((0,c.Z)(u))),style:(0,d.Z)((0,d.Z)({},i),{},{pointerEvents:l})},a),{},{children:o}))}function ia(e){var n=e.proOptions,t=e.position,o=void 0===t?"bottom-right":t;return null!==n&&void 0!==n&&n.hideAttribution?null:(0,h.jsx)(ra,{position:o,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:(0,h.jsx)("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}var aa=function(e){var n,t=[],o=[],r=(0,s.Z)(e.nodeLookup);try{for(r.s();!(n=r.n()).done;){var i=(0,u.Z)(n.value,2)[1];i.selected&&t.push(i.internals.userNode)}}catch(d){r.e(d)}finally{r.f()}var a,l=(0,s.Z)(e.edgeLookup);try{for(l.s();!(a=l.n()).done;){var c=(0,u.Z)(a.value,2)[1];c.selected&&o.push(c)}}catch(d){l.e(d)}finally{l.f()}return{selectedNodes:t,selectedEdges:o}},la=function(e){return e.id};function ua(e,n){return Ri(e.selectedNodes.map(la),n.selectedNodes.map(la))&&Ri(e.selectedEdges.map(la),n.selectedEdges.map(la))}function sa(e){var n=e.onSelectionChange,t=qi(),o=Gi(aa,ua),r=o.selectedNodes,i=o.selectedEdges;return(0,a.useEffect)((function(){var e={nodes:r,edges:i};null===n||void 0===n||n(e),t.getState().onSelectionChangeHandlers.forEach((function(n){return n(e)}))}),[r,i,n]),null}var ca=function(e){return!!e.onSelectionChangeHandlers};function da(e){var n=e.onSelectionChange,t=Gi(ca);return n||t?(0,h.jsx)(sa,{onSelectionChange:n}):null}var fa=[0,0],ha={x:0,y:0,zoom:1},va=[].concat(["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance"],["rfId"]),pa=function(e){return{setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setPaneClickDistance:e.setPaneClickDistance}},ga={translateExtent:Ao,nodeOrigin:fa,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function ma(e){var n=Gi(pa,Ri),t=n.setNodes,o=n.setEdges,r=n.setMinZoom,i=n.setMaxZoom,u=n.setTranslateExtent,c=n.setNodeExtent,d=n.reset,f=n.setDefaultNodesAndEdges,h=n.setPaneClickDistance,v=qi();(0,a.useEffect)((function(){return f(e.defaultNodes,e.defaultEdges),function(){p.current=ga,d()}}),[]);var p=(0,a.useRef)(ga);return(0,a.useEffect)((function(){var n,a=(0,s.Z)(va);try{for(a.s();!(n=a.n()).done;){var d=n.value,f=e[d];f!==p.current[d]&&("undefined"!==typeof e[d]&&("nodes"===d?t(f):"edges"===d?o(f):"minZoom"===d?r(f):"maxZoom"===d?i(f):"translateExtent"===d?u(f):"nodeExtent"===d?c(f):"paneClickDistance"===d?h(f):"fitView"===d?v.setState({fitViewOnInit:f}):"fitViewOptions"===d?v.setState({fitViewOnInitOptions:f}):v.setState((0,l.Z)({},d,f))))}}catch(g){a.e(g)}finally{a.f()}p.current=e}),va.map((function(n){return e[n]}))),null}function ya(){return"undefined"!==typeof window&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):null}var xa="undefined"!==typeof document?document:null;function wa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{target:xa,actInsideInputWithModifier:!0},t=(0,a.useState)(!1),o=(0,u.Z)(t,2),r=o[0],i=o[1],l=(0,a.useRef)(!1),s=(0,a.useRef)(new Set([])),d=(0,a.useMemo)((function(){if(null!==e){var n=(Array.isArray(e)?e:[e]).filter((function(e){return"string"===typeof e})).map((function(e){return e.split("+")})),t=n.reduce((function(e,n){return e.concat.apply(e,(0,c.Z)(n))}),[]);return[n,t]}return[[],[]]}),[e]),f=(0,u.Z)(d,2),h=f[0],v=f[1];return(0,a.useEffect)((function(){var t=(null===n||void 0===n?void 0:n.target)||xa;if(null!==e){var o=function(e){if(l.current=e.ctrlKey||e.metaKey||e.shiftKey,(!l.current||l.current&&!n.actInsideInputWithModifier)&&Nr(e))return!1;var t=Sa(e.code,v);s.current.add(e[t]),ba(h,s.current,!1)&&(e.preventDefault(),i(!0))},r=function(e){if((!l.current||l.current&&!n.actInsideInputWithModifier)&&Nr(e))return!1;var t=Sa(e.code,v);ba(h,s.current,!0)?(i(!1),s.current.clear()):s.current.delete(e[t]),"Meta"===e.key&&s.current.clear(),l.current=!1},a=function(){s.current.clear(),i(!1)};return null===t||void 0===t||t.addEventListener("keydown",o),null===t||void 0===t||t.addEventListener("keyup",r),window.addEventListener("blur",a),window.addEventListener("contextmenu",a),function(){null===t||void 0===t||t.removeEventListener("keydown",o),null===t||void 0===t||t.removeEventListener("keyup",r),window.removeEventListener("blur",a),window.removeEventListener("contextmenu",a)}}}),[e,i]),r}function ba(e,n,t){return e.filter((function(e){return t||e.length===n.size})).some((function(e){return e.every((function(e){return n.has(e)}))}))}function Sa(e,n){return n.includes(e)?"code":"key"}function Ca(e,n){var t,o=[],r=new Map,i=(0,s.Z)(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if("add"!==a.type)if("remove"===a.type||"replace"===a.type)r.set(a.id,[a]);else{var l=r.get(a.id);l?l.push(a):r.set(a.id,[a])}else o.push(a.item)}}catch(m){i.e(m)}finally{i.f()}var u,c=(0,s.Z)(n);try{for(c.s();!(u=c.n()).done;){var f=u.value,h=r.get(f.id);if(h){if("remove"!==h[0].type)if("replace"!==h[0].type){var v,p=(0,d.Z)({},f),g=(0,s.Z)(h);try{for(g.s();!(v=g.n()).done;){Ea(v.value,p)}}catch(m){g.e(m)}finally{g.f()}o.push(p)}else o.push((0,d.Z)({},h[0].item))}else o.push(f)}}catch(m){c.e(m)}finally{c.f()}return o}function Ea(e,n){switch(e.type){case"select":n.selected=e.selected;break;case"position":"undefined"!==typeof e.position&&(n.position=e.position),"undefined"!==typeof e.dragging&&(n.dragging=e.dragging);break;case"dimensions":var t;if("undefined"!==typeof e.dimensions)null!==(t=n.measured)&&void 0!==t||(n.measured={}),n.measured.width=e.dimensions.width,n.measured.height=e.dimensions.height,e.setAttributes&&(n.width=e.dimensions.width,n.height=e.dimensions.height);"boolean"===typeof e.resizing&&(n.resizing=e.resizing)}}function ka(e,n){return Ca(e,n)}function _a(e,n){return Ca(e,n)}function Ma(e,n){return{id:e,type:"select",selected:n}}function Na(e){var n,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[],i=(0,s.Z)(e);try{for(i.s();!(n=i.n()).done;){var a=(0,u.Z)(n.value,2),l=a[0],c=a[1],d=t.has(l);void 0===c.selected&&!d||c.selected===d||(o&&(c.selected=d),r.push(Ma(c.id,d)))}}catch(f){i.e(f)}finally{i.f()}return r}function Za(e){var n,t=e.items,o=void 0===t?[]:t,r=e.lookup,i=[],a=new Map(o.map((function(e){return[e.id,e]}))),l=(0,s.Z)(o);try{for(l.s();!(n=l.n()).done;){var c,d,f=n.value,h=r.get(f.id),v=null!==(c=null===h||void 0===h||null===(d=h.internals)||void 0===d?void 0:d.userNode)&&void 0!==c?c:h;void 0!==v&&v!==f&&i.push({id:f.id,item:f,type:"replace"}),void 0===v&&i.push({item:f,type:"add"})}}catch(y){l.e(y)}finally{l.f()}var p,g=(0,s.Z)(r);try{for(g.s();!(p=g.n()).done;){var m=(0,u.Z)(p.value,1)[0];void 0===a.get(m)&&i.push({id:m,type:"remove"})}}catch(y){g.e(y)}finally{g.f()}return i}function Pa(e){return{id:e.id,type:"remove"}}var Oa=function(e){return function(e){return"id"in e&&"position"in e&&!("source"in e)&&!("target"in e)}(e)},Da=function(e){return Xo(e)};function za(e){return(0,a.forwardRef)(e)}var Ia="undefined"!==typeof window?a.useLayoutEffect:a.useEffect;function Aa(e){var n=(0,a.useState)(!1),t=(0,u.Z)(n,2),o=t[0],r=t[1],i=(0,a.useState)((function(){return function(e){var n=[];return{get:function(){return n},reset:function(){n=[]},push:function(t){n.push(t),e()}}}((function(){return r(!0)}))})),l=(0,u.Z)(i,1)[0];return Ia((function(){if(o){var n=l.get();n.length&&(e(n),l.reset()),r(!1)}else l.reset()}),[o]),l}var Ra=(0,a.createContext)(null);function Ta(e){var n=e.children,t=qi(),o=(0,a.useCallback)((function(e){var n,o=t.getState(),r=o.nodes,i=void 0===r?[]:r,a=o.setNodes,l=o.hasDefaultNodes,u=o.onNodesChange,c=o.nodeLookup,d=i,f=(0,s.Z)(e);try{for(f.s();!(n=f.n()).done;){var h=n.value;d="function"===typeof h?h(d):h}}catch(v){f.e(v)}finally{f.f()}l?a(d):u&&u(Za({items:d,lookup:c}))}),[]),r=Aa(o),i=Aa((0,a.useCallback)((function(e){var n,o=t.getState(),r=o.edges,i=void 0===r?[]:r,a=o.setEdges,l=o.hasDefaultEdges,u=o.onEdgesChange,c=o.edgeLookup,d=i,f=(0,s.Z)(e);try{for(f.s();!(n=f.n()).done;){var h=n.value;d="function"===typeof h?h(d):h}}catch(v){f.e(v)}finally{f.f()}l?a(d):u&&u(Za({items:d,lookup:c}))}),[])),l=(0,a.useMemo)((function(){return{nodeQueue:r,edgeQueue:i}}),[]);return(0,h.jsx)(Ra.Provider,{value:l,children:n})}var La=function(e){return!!e.panZoom};function Ba(){var e=function(){var e=qi();return(0,a.useMemo)((function(){return{zoomIn:function(n){var t=e.getState().panZoom;return t?t.scaleBy(1.2,{duration:null===n||void 0===n?void 0:n.duration}):Promise.resolve(!1)},zoomOut:function(n){var t=e.getState().panZoom;return t?t.scaleBy(1/1.2,{duration:null===n||void 0===n?void 0:n.duration}):Promise.resolve(!1)},zoomTo:function(n,t){var o=e.getState().panZoom;return o?o.scaleTo(n,{duration:null===t||void 0===t?void 0:t.duration}):Promise.resolve(!1)},getZoom:function(){return e.getState().transform[2]},setViewport:function(){var n=(0,o.Z)(r.mark((function n(t,o){var i,a,l,s,c,d,f,h,v;return r.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(s=e.getState(),c=(0,u.Z)(s.transform,3),d=c[0],f=c[1],h=c[2],v=s.panZoom){n.next=3;break}return n.abrupt("return",Promise.resolve(!1));case 3:return n.next=5,v.setViewport({x:null!==(i=t.x)&&void 0!==i?i:d,y:null!==(a=t.y)&&void 0!==a?a:f,zoom:null!==(l=t.zoom)&&void 0!==l?l:h},{duration:null===o||void 0===o?void 0:o.duration});case 5:return n.abrupt("return",Promise.resolve(!0));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),getViewport:function(){var n=(0,u.Z)(e.getState().transform,3);return{x:n[0],y:n[1],zoom:n[2]}},fitView:function(n){var t=e.getState(),o=t.nodeLookup,r=t.width,i=t.height,a=t.minZoom,l=t.maxZoom,u=t.panZoom,s=qo(o,n);return u?Uo({nodes:s,width:r,height:i,minZoom:a,maxZoom:l,panZoom:u},n):Promise.resolve(!1)},setCenter:function(){var n=(0,o.Z)(r.mark((function n(t,o,i){var a,l,u,s,c,d,f,h;return r.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=e.getState(),l=a.width,u=a.height,s=a.maxZoom,c=a.panZoom,d="undefined"!==typeof(null===i||void 0===i?void 0:i.zoom)?i.zoom:s,f=l/2-t*d,h=u/2-o*d,c){n.next=6;break}return n.abrupt("return",Promise.resolve(!1));case 6:return n.next=8,c.setViewport({x:f,y:h,zoom:d},{duration:null===i||void 0===i?void 0:i.duration});case 8:return n.abrupt("return",Promise.resolve(!0));case 9:case"end":return n.stop()}}),n)})));return function(e,t,o){return n.apply(this,arguments)}}(),fitBounds:function(){var n=(0,o.Z)(r.mark((function n(t,o){var i,a,l,u,s,c,d,f;return r.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=e.getState(),l=a.width,u=a.height,s=a.minZoom,c=a.maxZoom,d=a.panZoom,f=yr(t,l,u,s,c,null!==(i=null===o||void 0===o?void 0:o.padding)&&void 0!==i?i:.1),d){n.next=4;break}return n.abrupt("return",Promise.resolve(!1));case 4:return n.next=6,d.setViewport(f,{duration:null===o||void 0===o?void 0:o.duration});case 6:return n.abrupt("return",Promise.resolve(!0));case 7:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),screenToFlowPosition:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{snapToGrid:!0},o=e.getState(),r=o.transform,i=o.snapGrid,a=o.domNode;if(!a)return n;var l=a.getBoundingClientRect(),u=l.x,s=l.y,c={x:n.x-u,y:n.y-s};return gr(c,r,t.snapToGrid,i)},flowToScreenPosition:function(n){var t=e.getState(),o=t.transform,r=t.domNode;if(!r)return n;var i=r.getBoundingClientRect(),a=i.x,l=i.y,u=mr(n,o);return{x:u.x+a,y:u.y+l}}}}),[])}(),n=qi(),t=function(){var e=(0,a.useContext)(Ra);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}(),i=Gi(La),l=(0,a.useMemo)((function(){var e=function(e){return n.getState().nodeLookup.get(e)},i=function(e){t.nodeQueue.push(e)},a=function(e){t.edgeQueue.push(e)},l=function(e){var t,o,r,i,a=n.getState(),l=a.nodeLookup,u=a.nodeOrigin,s=Oa(e)?e:l.get(e.id),c=s.parentId?Cr(s.position,s.measured,s.parentId,l,u):s.position,d={id:s.id,position:c,width:null!==(t=null===(o=s.measured)||void 0===o?void 0:o.width)&&void 0!==t?t:s.width,height:null!==(r=null===(i=s.measured)||void 0===i?void 0:i.height)&&void 0!==r?r:s.height,data:s.data};return ur(d)},s=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{replace:!1};i((function(o){return o.map((function(o){if(o.id===e){var r="function"===typeof n?n(o):n;return t.replace&&Oa(r)?r:(0,d.Z)((0,d.Z)({},o),r)}return o}))}))},f=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{replace:!1};a((function(o){return o.map((function(o){if(o.id===e){var r="function"===typeof n?n(o):n;return t.replace&&Da(r)?r:(0,d.Z)((0,d.Z)({},o),r)}return o}))}))};return{getNodes:function(){return n.getState().nodes.map((function(e){return(0,d.Z)({},e)}))},getNode:function(n){var t;return null===(t=e(n))||void 0===t?void 0:t.internals.userNode},getInternalNode:e,getEdges:function(){var e=n.getState().edges;return(void 0===e?[]:e).map((function(e){return(0,d.Z)({},e)}))},getEdge:function(e){return n.getState().edgeLookup.get(e)},setNodes:i,setEdges:a,addNodes:function(e){var n=Array.isArray(e)?e:[e];t.nodeQueue.push((function(e){return[].concat((0,c.Z)(e),(0,c.Z)(n))}))},addEdges:function(e){var n=Array.isArray(e)?e:[e];t.edgeQueue.push((function(e){return[].concat((0,c.Z)(e),(0,c.Z)(n))}))},toObject:function(){var e=n.getState(),t=e.nodes,o=void 0===t?[]:t,r=e.edges,i=void 0===r?[]:r,a=e.transform,l=(0,u.Z)(a,3),s=l[0],c=l[1],f=l[2];return{nodes:o.map((function(e){return(0,d.Z)({},e)})),edges:i.map((function(e){return(0,d.Z)({},e)})),viewport:{x:s,y:c,zoom:f}}},deleteElements:function(){var e=(0,o.Z)(r.mark((function e(t){var o,i,a,l,u,s,c,d,f,h,v,p,g,m,y,x,w,b,S,C;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.nodes,i=void 0===o?[]:o,a=t.edges,l=void 0===a?[]:a,u=n.getState(),s=u.nodes,c=u.edges,d=u.onNodesDelete,f=u.onEdgesDelete,h=u.triggerNodeChanges,v=u.triggerEdgeChanges,p=u.onDelete,g=u.onBeforeDelete,e.next=4,Jo({nodesToRemove:i,edgesToRemove:l,nodes:s,edges:c,onBeforeDelete:g});case 4:return m=e.sent,y=m.nodes,x=m.edges,w=x.length>0,b=y.length>0,w&&(S=x.map(Pa),null===f||void 0===f||f(x),v(S)),b&&(C=y.map(Pa),null===d||void 0===d||d(y),h(C)),(b||w)&&(null===p||void 0===p||p({nodes:y,edges:x})),e.abrupt("return",{deletedNodes:y,deletedEdges:x});case 13:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),getIntersectingNodes:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=arguments.length>2?arguments[2]:void 0,r=fr(e),i=r?e:l(e),a=void 0!==o;return i?(o||n.getState().nodes).filter((function(o){var l=n.getState().nodeLookup.get(o.id);if(l&&!r&&(o.id===e.id||!l.internals.positionAbsolute))return!1;var u=ur(a?o:l),s=dr(u,i);return t&&s>0||s>=i.width*i.height})):[]},isNodeIntersecting:function(e,n){var t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=fr(e),r=o?e:l(e);if(!r)return!1;var i=dr(r,n),a=t&&i>0;return a||i>=r.width*r.height},updateNode:s,updateNodeData:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{replace:!1};s(e,(function(e){var o="function"===typeof n?n(e):n;return t.replace?(0,d.Z)((0,d.Z)({},e),{},{data:o}):(0,d.Z)((0,d.Z)({},e),{},{data:(0,d.Z)((0,d.Z)({},e.data),o)})}),t)},updateEdge:f,updateEdgeData:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{replace:!1};f(e,(function(e){var o="function"===typeof n?n(e):n;return t.replace?(0,d.Z)((0,d.Z)({},e),{},{data:o}):(0,d.Z)((0,d.Z)({},e),{},{data:(0,d.Z)((0,d.Z)({},e.data),o)})}),t)}}}),[]);return(0,a.useMemo)((function(){return(0,d.Z)((0,d.Z)((0,d.Z)({},l),e),{},{viewportInitialized:i})}),[i])}var ja=function(e){return e.selected},Va={actInsideInputWithModifier:!1},Ha="undefined"!==typeof window?window:void 0;var Xa={position:"absolute",width:"100%",height:"100%",top:0,left:0},Ya=function(e){return{userSelectionActive:e.userSelectionActive,lib:e.lib}};function Wa(e){var n=e.onPaneContextMenu,t=e.zoomOnScroll,o=void 0===t||t,r=e.zoomOnPinch,i=void 0===r||r,l=e.panOnScroll,u=void 0!==l&&l,s=e.panOnScrollSpeed,c=void 0===s?.5:s,d=e.panOnScrollMode,f=void 0===d?Co.Free:d,v=e.zoomOnDoubleClick,p=void 0===v||v,g=e.panOnDrag,m=void 0===g||g,y=e.defaultViewport,x=e.translateExtent,w=e.minZoom,b=e.maxZoom,S=e.zoomActivationKeyCode,C=e.preventScrolling,E=void 0===C||C,k=e.children,_=e.noWheelClassName,M=e.noPanClassName,N=e.onViewportChange,Z=e.isControlledViewport,P=e.paneClickDistance,O=qi(),D=(0,a.useRef)(null),z=Gi(Ya,Ri),I=z.userSelectionActive,A=z.lib,R=wa(S),T=(0,a.useRef)();return function(e){var n=qi();(0,a.useEffect)((function(){var t=function(){if(!e.current)return!1;var t,o,r=kr(e.current);0!==r.height&&0!==r.width||null===(t=(o=n.getState()).onError)||void 0===t||t.call(o,"004",Mo()),n.setState({width:r.width||500,height:r.height||500})};if(e.current){t(),window.addEventListener("resize",t);var o=new ResizeObserver((function(){return t()}));return o.observe(e.current),function(){window.removeEventListener("resize",t),o&&e.current&&o.unobserve(e.current)}}}),[])}(D),(0,a.useEffect)((function(){if(D.current){T.current=xi({domNode:D.current,minZoom:w,maxZoom:b,translateExtent:x,viewport:y,paneClickDistance:P,onTransformChange:function(e){null===N||void 0===N||N({x:e[0],y:e[1],zoom:e[2]}),Z||O.setState({transform:e})},onDraggingChange:function(e){return O.setState({paneDragging:e})},onPanZoomStart:function(e,n){var t=O.getState(),o=t.onViewportChangeStart,r=t.onMoveStart;null===r||void 0===r||r(e,n),null===o||void 0===o||o(n)},onPanZoom:function(e,n){var t=O.getState(),o=t.onViewportChange,r=t.onMove;null===r||void 0===r||r(e,n),null===o||void 0===o||o(n)},onPanZoomEnd:function(e,n){var t=O.getState(),o=t.onViewportChangeEnd,r=t.onMoveEnd;null===r||void 0===r||r(e,n),null===o||void 0===o||o(n)}});var e=T.current.getViewport(),n=e.x,t=e.y,o=e.zoom;return O.setState({panZoom:T.current,transform:[n,t,o],domNode:D.current.closest(".react-flow")}),function(){var e;null===(e=T.current)||void 0===e||e.destroy()}}}),[]),(0,a.useEffect)((function(){var e;null===(e=T.current)||void 0===e||e.update({onPaneContextMenu:n,zoomOnScroll:o,zoomOnPinch:i,panOnScroll:u,panOnScrollSpeed:c,panOnScrollMode:f,zoomOnDoubleClick:p,panOnDrag:m,zoomActivationKeyPressed:R,preventScrolling:E,noPanClassName:M,userSelectionActive:I,noWheelClassName:_,lib:A})}),[n,o,i,u,c,f,p,m,R,E,M,I,_,A]),(0,h.jsx)("div",{className:"react-flow__renderer",ref:D,style:Xa,children:k})}var Ka=function(e){return{userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect}};function Fa(){var e=Gi(Ka,Ri),n=e.userSelectionActive,t=e.userSelectionRect;return n&&t?(0,h.jsx)("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:"translate(".concat(t.x,"px, ").concat(t.y,"px)")}}):null}var Ga=function(e,n){return function(t){t.target===n.current&&(null===e||void 0===e||e(t))}},qa=function(e){return{userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}};function Ua(e){var n=e.isSelecting,t=e.selectionKeyPressed,o=e.selectionMode,r=void 0===o?Eo.Full:o,i=e.panOnDrag,l=e.selectionOnDrag,c=e.onSelectionStart,d=e.onSelectionEnd,f=e.onPaneClick,p=e.onPaneContextMenu,g=e.onPaneScroll,m=e.onPaneMouseEnter,y=e.onPaneMouseMove,x=e.onPaneMouseLeave,w=e.children,b=(0,a.useRef)(null),S=qi(),C=(0,a.useRef)(0),E=(0,a.useRef)(0),k=(0,a.useRef)(),_=(0,a.useRef)(new Map),M=Gi(qa,Ri),N=M.userSelectionActive,Z=M.elementsSelectable,P=M.dragging,O=Z&&(n||N),D=(0,a.useRef)(!1),z=(0,a.useRef)(!1),I=function(e){D.current?D.current=!1:(null===f||void 0===f||f(e),S.getState().resetSelectedElements(),S.setState({nodesSelectionActive:!1}))},A=g?function(e){return g(e)}:void 0;return(0,h.jsxs)("div",{className:v(["react-flow__pane",{draggable:i,dragging:P,selection:n}]),onClick:O?void 0:Ga(I,b),onContextMenu:Ga((function(e){Array.isArray(i)&&null!==i&&void 0!==i&&i.includes(2)?e.preventDefault():null===p||void 0===p||p(e)}),b),onWheel:Ga(A,b),onPointerEnter:O?void 0:m,onPointerDown:O?function(e){var t,o,r=S.getState(),i=r.resetSelectedElements,a=r.domNode,l=r.edgeLookup;if(k.current=null===a||void 0===a?void 0:a.getBoundingClientRect(),Z&&n&&0===e.button&&e.target===b.current&&k.current){null===(t=e.target)||void 0===t||null===(o=t.setPointerCapture)||void 0===o||o.call(t,e.pointerId),z.current=!0,D.current=!1,_.current=new Map;var d,f=(0,s.Z)(l);try{for(f.s();!(d=f.n()).done;){var h,v,p=(0,u.Z)(d.value,2),g=p[0],m=p[1];_.current.set(m.source,(null===(h=_.current.get(m.source))||void 0===h?void 0:h.add(g))||new Set([g])),_.current.set(m.target,(null===(v=_.current.get(m.target))||void 0===v?void 0:v.add(g))||new Set([g]))}}catch(C){f.e(C)}finally{f.f()}var y=Pr(e.nativeEvent,k.current),x=y.x,w=y.y;i(),S.setState({userSelectionRect:{width:0,height:0,startX:x,startY:w,x:x,y:w}}),null===c||void 0===c||c(e)}}:y,onPointerMove:O?function(e){var n=S.getState(),t=n.userSelectionRect,o=n.edgeLookup,i=n.transform,a=n.nodeLookup,l=n.triggerNodeChanges,u=n.triggerEdgeChanges;if(k.current&&t){D.current=!0;var c,d=Pr(e.nativeEvent,k.current),f=d.x,h=d.y,v=t.startX,p=t.startY,g={startX:v,startY:p,x:f<v?f:v,y:h<p?h:p,width:Math.abs(f-v),height:Math.abs(h-p)},m=Fo(a,g,i,r===Eo.Partial,!0),y=new Set,x=new Set,w=(0,s.Z)(m);try{for(w.s();!(c=w.n()).done;){var b=c.value;x.add(b.id);var M=_.current.get(b.id);if(M){var N,Z=(0,s.Z)(M);try{for(Z.s();!(N=Z.n()).done;){var P=N.value;y.add(P)}}catch(O){Z.e(O)}finally{Z.f()}}}}catch(O){w.e(O)}finally{w.f()}if(C.current!==x.size)C.current=x.size,l(Na(a,x,!0));if(E.current!==y.size)E.current=y.size,u(Na(o,y));S.setState({userSelectionRect:g,userSelectionActive:!0,nodesSelectionActive:!1})}}:y,onPointerUp:O?function(e){var n,o;if(0===e.button&&z.current){null===(n=e.target)||void 0===n||null===(o=n.releasePointerCapture)||void 0===o||o.call(n,e.pointerId);var r=S.getState().userSelectionRect;!N&&r&&e.target===b.current&&(null===I||void 0===I||I(e)),C.current>0&&S.setState({nodesSelectionActive:!0}),S.setState({userSelectionActive:!1,userSelectionRect:null}),C.current=0,E.current=0,null===d||void 0===d||d(e),(t||l)&&(D.current=!1),z.current=!1}}:void 0,onPointerLeave:x,ref:b,style:Xa,children:[w,(0,h.jsx)(Fa,{})]})}function Qa(e){var n=e.id,t=e.store,o=e.unselect,r=void 0!==o&&o,i=e.nodeRef,a=t.getState(),l=a.addSelectedNodes,u=a.unselectNodesAndEdges,s=a.multiSelectionActive,c=a.nodeLookup,d=a.onError,f=c.get(n);f?(t.setState({nodesSelectionActive:!1}),f.selected?(r||f.selected&&s)&&(u({nodes:[f],edges:[]}),requestAnimationFrame((function(){var e;return null===i||void 0===i||null===(e=i.current)||void 0===e?void 0:e.blur()}))):l([n])):null===d||void 0===d||d("012",Io(n))}function $a(e){var n=e.nodeRef,t=e.disabled,o=void 0!==t&&t,r=e.noDragClassName,i=e.handleSelector,l=e.nodeId,s=e.isSelectable,c=e.nodeClickDistance,d=qi(),f=(0,a.useState)(!1),h=(0,u.Z)(f,2),v=h[0],p=h[1],g=(0,a.useRef)();return(0,a.useEffect)((function(){g.current=ai({getStoreItems:function(){return d.getState()},onNodeMouseDown:function(e){Qa({id:e,store:d,nodeRef:n})},onDragStart:function(){p(!0)},onDragStop:function(){p(!1)}})}),[]),(0,a.useEffect)((function(){var e;if(o)null===(e=g.current)||void 0===e||e.destroy();else if(n.current){var t;return null===(t=g.current)||void 0===t||t.update({noDragClassName:r,handleSelector:i,domNode:n.current,isSelectable:s,nodeId:l,nodeClickDistance:c}),function(){var e;null===(e=g.current)||void 0===e||e.destroy()}}}),[r,i,o,s,n,l]),v}function Ja(){var e=qi(),n=(0,a.useCallback)((function(n){var t,o=e.getState(),r=o.nodeExtent,i=o.snapToGrid,a=o.snapGrid,l=o.nodesDraggable,c=o.onError,d=o.updateNodePositions,f=o.nodeLookup,h=o.nodeOrigin,v=new Map,p=function(e){return function(n){return n.selected&&(n.draggable||e&&"undefined"===typeof n.draggable)}}(l),g=i?a[0]:5,m=i?a[1]:5,y=n.direction.x*g*n.factor,x=n.direction.y*m*n.factor,w=(0,s.Z)(f);try{for(w.s();!(t=w.n()).done;){var b=(0,u.Z)(t.value,2)[1];if(p(b)){var S={x:b.internals.positionAbsolute.x+y,y:b.internals.positionAbsolute.y+x};i&&(S=pr(S,a));var C=$o({nodeId:b.id,nextPosition:S,nodeLookup:f,nodeExtent:r,nodeOrigin:h,onError:c}),E=C.position,k=C.positionAbsolute;b.position=E,b.internals.positionAbsolute=k,v.set(b.id,b)}}}catch(_){w.e(_)}finally{w.f()}d(v)}),[]);return n}var el=(0,a.createContext)(null),nl=el.Provider;el.Consumer;var tl=function(){return(0,a.useContext)(el)},ol=function(e){return{connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}};var rl=(0,a.memo)(za((function(e,n){var t,o,r=e.type,i=void 0===r?"source":r,a=e.position,l=void 0===a?Bo.Top:a,u=e.isValidConnection,s=e.isConnectable,c=void 0===s||s,p=e.isConnectableStart,g=void 0===p||p,m=e.isConnectableEnd,y=void 0===m||m,x=e.id,w=e.onConnect,b=e.children,S=e.className,C=e.onMouseDown,E=e.onTouchStart,k=(0,f.Z)(e,ji),_=x||null,M="target"===i,N=qi(),Z=tl(),P=Gi(ol,Ri),O=P.connectOnClick,D=P.noPanClassName,z=P.rfId,I=Gi(function(e,n,t){return function(o){var r=o.connectionClickStartHandle,i=o.connectionMode,a=o.connection,l=a.fromHandle,u=a.toHandle,s=a.isValid,c=(null===u||void 0===u?void 0:u.nodeId)===e&&(null===u||void 0===u?void 0:u.id)===n&&(null===u||void 0===u?void 0:u.type)===t;return{connectingFrom:(null===l||void 0===l?void 0:l.nodeId)===e&&(null===l||void 0===l?void 0:l.id)===n&&(null===l||void 0===l?void 0:l.type)===t,connectingTo:c,clickConnecting:(null===r||void 0===r?void 0:r.nodeId)===e&&(null===r||void 0===r?void 0:r.id)===n&&(null===r||void 0===r?void 0:r.type)===t,isPossibleEndHandle:i===So.Strict?(null===l||void 0===l?void 0:l.type)!==t:e!==(null===l||void 0===l?void 0:l.nodeId)||n!==(null===l||void 0===l?void 0:l.id),connectionInProcess:!!l,valid:c&&s}}}(Z,_,i),Ri),A=I.connectingFrom,R=I.connectingTo,T=I.clickConnecting,L=I.isPossibleEndHandle,B=I.connectionInProcess,j=I.valid;Z||null===(t=(o=N.getState()).onError)||void 0===t||t.call(o,"010",Do());var V=function(e){var n=N.getState(),t=n.defaultEdgeOptions,o=n.onConnect,r=n.hasDefaultEdges,i=(0,d.Z)((0,d.Z)({},t),e);if(r){var a=N.getState(),l=a.edges;(0,a.setEdges)(function(e,n){return e.source&&e.target?function(e,n){return n.some((function(n){return n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)}))}(t=Xo(e)?(0,d.Z)({},e):(0,d.Z)((0,d.Z)({},e),{},{id:Lr(e)}),n)?n:(null===t.sourceHandle&&delete t.sourceHandle,null===t.targetHandle&&delete t.targetHandle,n.concat(t)):(vr(0,Zo()),n);var t}(i,l))}null===o||void 0===o||o(i),null===w||void 0===w||w(i)},H=function(e){if(Z){var n=Zr(e.nativeEvent);if(g&&(n&&0===e.button||!n)){var t=N.getState();di.onPointerDown(e.nativeEvent,{autoPanOnConnect:t.autoPanOnConnect,connectionMode:t.connectionMode,connectionRadius:t.connectionRadius,domNode:t.domNode,nodeLookup:t.nodeLookup,lib:t.lib,isTarget:M,handleId:_,nodeId:Z,flowId:t.rfId,panBy:t.panBy,cancelConnection:t.cancelConnection,onConnectStart:t.onConnectStart,onConnectEnd:t.onConnectEnd,updateConnection:t.updateConnection,onConnect:V,isValidConnection:u||t.isValidConnection,getTransform:function(){return N.getState().transform},getFromHandle:function(){return N.getState().connection.fromHandle},autoPanSpeed:t.autoPanSpeed})}n?null===C||void 0===C||C(e):null===E||void 0===E||E(e)}};return(0,h.jsx)("div",(0,d.Z)((0,d.Z)({"data-handleid":_,"data-nodeid":Z,"data-handlepos":l,"data-id":"".concat(z,"-").concat(Z,"-").concat(_,"-").concat(i),className:v(["react-flow__handle","react-flow__handle-".concat(l),"nodrag",D,S,{source:!M,target:M,connectable:c,connectablestart:g,connectableend:y,clickconnecting:T,connectingfrom:A,connectingto:R,valid:j,connectionindicator:c&&(!B||L)&&(B?y:g)}]),onMouseDown:H,onTouchStart:H,onClick:O?function(e){var n=N.getState(),t=n.onClickConnectStart,o=n.onClickConnectEnd,r=n.connectionClickStartHandle,a=n.connectionMode,l=n.isValidConnection,s=n.lib,c=n.rfId;if(Z&&(r||g)){if(!r)return null===t||void 0===t||t(e.nativeEvent,{nodeId:Z,handleId:_,handleType:i}),void N.setState({connectionClickStartHandle:{nodeId:Z,type:i,id:_}});var d=_r(e.target),f=u||l,h=di.isValid(e.nativeEvent,{handle:{nodeId:Z,id:_,type:i},connectionMode:a,fromNodeId:r.nodeId,fromHandleId:r.id||null,fromType:r.type,isValidConnection:f,flowId:c,doc:d,lib:s}),v=h.connection;h.isValid&&v&&V(v),null===o||void 0===o||o(e),N.setState({connectionClickStartHandle:null})}}:void 0,ref:n},k),{},{children:b}))})));var il={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},al={input:function(e){var n=e.data,t=e.isConnectable,o=e.sourcePosition,r=void 0===o?Bo.Bottom:o;return(0,h.jsxs)(h.Fragment,{children:[null===n||void 0===n?void 0:n.label,(0,h.jsx)(rl,{type:"source",position:r,isConnectable:t})]})},default:function(e){var n=e.data,t=e.isConnectable,o=e.targetPosition,r=void 0===o?Bo.Top:o,i=e.sourcePosition,a=void 0===i?Bo.Bottom:i;return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(rl,{type:"target",position:r,isConnectable:t}),null===n||void 0===n?void 0:n.label,(0,h.jsx)(rl,{type:"source",position:a,isConnectable:t})]})},output:function(e){var n=e.data,t=e.isConnectable,o=e.targetPosition,r=void 0===o?Bo.Top:o;return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(rl,{type:"target",position:r,isConnectable:t}),null===n||void 0===n?void 0:n.label]})},group:function(){return null}};var ll=function(e){var n=Ko(e.nodeLookup,{filter:function(e){return!!e.selected}}),t=n.width,o=n.height,r=n.x,i=n.y;return{width:hr(t)?t:null,height:hr(o)?o:null,userSelectionActive:e.userSelectionActive,transformString:"translate(".concat(e.transform[0],"px,").concat(e.transform[1],"px) scale(").concat(e.transform[2],") translate(").concat(r,"px,").concat(i,"px)")}};function ul(e){var n=e.onSelectionContextMenu,t=e.noPanClassName,o=e.disableKeyboardA11y,r=qi(),i=Gi(ll,Ri),l=i.width,u=i.height,s=i.transformString,c=i.userSelectionActive,d=Ja(),f=(0,a.useRef)(null);if((0,a.useEffect)((function(){var e;o||(null===(e=f.current)||void 0===e||e.focus({preventScroll:!0}))}),[o]),$a({nodeRef:f}),c||!l||!u)return null;var p=n?function(e){var t=r.getState().nodes.filter((function(e){return e.selected}));n(e,t)}:void 0;return(0,h.jsx)("div",{className:v(["react-flow__nodesselection","react-flow__container",t]),style:{transform:s},children:(0,h.jsx)("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:p,tabIndex:o?void 0:-1,onKeyDown:o?void 0:function(e){Object.prototype.hasOwnProperty.call(il,e.key)&&d({direction:il[e.key],factor:e.shiftKey?4:1})},style:{width:l,height:u}})})}var sl="undefined"!==typeof window?window:void 0,cl=function(e){return{nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive}};function dl(e){var n=e.children,t=e.onPaneClick,o=e.onPaneMouseEnter,r=e.onPaneMouseMove,i=e.onPaneMouseLeave,l=e.onPaneContextMenu,u=e.onPaneScroll,s=e.paneClickDistance,c=e.deleteKeyCode,d=e.selectionKeyCode,f=e.selectionOnDrag,v=e.selectionMode,p=e.onSelectionStart,g=e.onSelectionEnd,m=e.multiSelectionKeyCode,y=e.panActivationKeyCode,x=e.zoomActivationKeyCode,w=e.elementsSelectable,b=e.zoomOnScroll,S=e.zoomOnPinch,C=e.panOnScroll,E=e.panOnScrollSpeed,k=e.panOnScrollMode,_=e.zoomOnDoubleClick,M=e.panOnDrag,N=e.defaultViewport,Z=e.translateExtent,P=e.minZoom,O=e.maxZoom,D=e.preventScrolling,z=e.onSelectionContextMenu,I=e.noWheelClassName,A=e.noPanClassName,R=e.disableKeyboardA11y,T=e.onViewportChange,L=e.isControlledViewport,B=Gi(cl),j=B.nodesSelectionActive,V=B.userSelectionActive,H=wa(d,{target:sl}),X=wa(y,{target:sl}),Y=X||M,W=X||C,K=f&&!0!==Y,F=H||V||K;return function(e){var n=e.deleteKeyCode,t=e.multiSelectionKeyCode,o=qi(),r=Ba().deleteElements,i=wa(n,Va),l=wa(t,{target:Ha});(0,a.useEffect)((function(){if(i){var e=o.getState(),n=e.edges,t=e.nodes;r({nodes:t.filter(ja),edges:n.filter(ja)}),o.setState({nodesSelectionActive:!1})}}),[i]),(0,a.useEffect)((function(){o.setState({multiSelectionActive:l})}),[l])}({deleteKeyCode:c,multiSelectionKeyCode:m}),(0,h.jsx)(Wa,{onPaneContextMenu:l,elementsSelectable:w,zoomOnScroll:b,zoomOnPinch:S,panOnScroll:W,panOnScrollSpeed:E,panOnScrollMode:k,zoomOnDoubleClick:_,panOnDrag:!H&&Y,defaultViewport:N,translateExtent:Z,minZoom:P,maxZoom:O,zoomActivationKeyCode:x,preventScrolling:D,noWheelClassName:I,noPanClassName:A,onViewportChange:T,isControlledViewport:L,paneClickDistance:s,children:(0,h.jsxs)(Ua,{onSelectionStart:p,onSelectionEnd:g,onPaneClick:t,onPaneMouseEnter:o,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:l,onPaneScroll:u,panOnDrag:Y,isSelecting:!!F,selectionMode:v,selectionKeyPressed:H,selectionOnDrag:K,children:[n,j&&(0,h.jsx)(ul,{onSelectionContextMenu:z,noPanClassName:A,disableKeyboardA11y:R})]})})}dl.displayName="FlowRenderer";var fl=(0,a.memo)(dl);function hl(e){var n=Gi((0,a.useCallback)(function(e){return function(n){return e?Fo(n.nodeLookup,{x:0,y:0,width:n.width,height:n.height},n.transform,!0).map((function(e){return e.id})):Array.from(n.nodeLookup.keys())}}(e),[e]),Ri);return n}var vl=function(e){return e.updateNodeInternals};function pl(e){var n,t=e.id,o=e.onClick,r=e.onMouseEnter,i=e.onMouseMove,u=e.onMouseLeave,s=e.onContextMenu,c=e.onDoubleClick,f=e.nodesDraggable,p=e.elementsSelectable,g=e.nodesConnectable,m=e.nodesFocusable,y=e.resizeObserver,x=e.noDragClassName,w=e.noPanClassName,b=e.disableKeyboardA11y,S=e.rfId,C=e.nodeTypes,E=e.nodeExtent,k=e.nodeClickDistance,_=e.onError,M=Gi((function(e){var n=e.nodeLookup.get(t),o=e.parentLookup.has(t);return{node:n,internals:n.internals,isParent:o}}),Ri),N=M.node,Z=M.internals,P=M.isParent,O=N.type||"default",D=(null===C||void 0===C?void 0:C[O])||al[O];void 0===D&&(null===_||void 0===_||_("003",_o(O)),O="default",D=al.default);var z=!!(N.draggable||f&&"undefined"===typeof N.draggable),I=!!(N.selectable||p&&"undefined"===typeof N.selectable),A=!!(N.connectable||g&&"undefined"===typeof N.connectable),R=!!(N.focusable||m&&"undefined"===typeof N.focusable),T=qi(),L=Sr(N),B=function(e){var n=e.node,t=e.nodeType,o=e.hasDimensions,r=e.resizeObserver,i=qi(),l=(0,a.useRef)(null),u=(0,a.useRef)(null),s=(0,a.useRef)(n.sourcePosition),c=(0,a.useRef)(n.targetPosition),d=(0,a.useRef)(t),f=o&&!!n.internals.handleBounds;return(0,a.useEffect)((function(){!l.current||n.hidden||f&&u.current===l.current||(u.current&&(null===r||void 0===r||r.unobserve(u.current)),null===r||void 0===r||r.observe(l.current),u.current=l.current)}),[f,n.hidden]),(0,a.useEffect)((function(){return function(){u.current&&(null===r||void 0===r||r.unobserve(u.current),u.current=null)}}),[]),(0,a.useEffect)((function(){if(l.current){var e=d.current!==t,o=s.current!==n.sourcePosition,r=c.current!==n.targetPosition;(e||o||r)&&(d.current=t,s.current=n.sourcePosition,c.current=n.targetPosition,i.getState().updateNodeInternals(new Map([[n.id,{id:n.id,nodeElement:l.current,force:!0}]])))}}),[n.id,t,n.sourcePosition,n.targetPosition]),l}({node:N,nodeType:O,hasDimensions:L,resizeObserver:y}),j=$a({nodeRef:B,disabled:N.hidden||!z,noDragClassName:x,handleSelector:N.dragHandle,nodeId:t,isSelectable:I,nodeClickDistance:k}),V=Ja();if(N.hidden)return null;var H=br(N),X=function(e){var n,t,o,r,i,a,l,u,s,c;return void 0===e.internals.handleBounds?{width:null!==(i=null!==(a=e.width)&&void 0!==a?a:e.initialWidth)&&void 0!==i?i:null===(l=e.style)||void 0===l?void 0:l.width,height:null!==(u=null!==(s=e.height)&&void 0!==s?s:e.initialHeight)&&void 0!==u?u:null===(c=e.style)||void 0===c?void 0:c.height}:{width:null!==(n=e.width)&&void 0!==n?n:null===(t=e.style)||void 0===t?void 0:t.width,height:null!==(o=e.height)&&void 0!==o?o:null===(r=e.style)||void 0===r?void 0:r.height}}(N),Y=E?tr(Z.positionAbsolute,E):Z.positionAbsolute,W=I||z||o||r||i||u,K=r?function(e){return r(e,(0,d.Z)({},Z.userNode))}:void 0,F=i?function(e){return i(e,(0,d.Z)({},Z.userNode))}:void 0,G=u?function(e){return u(e,(0,d.Z)({},Z.userNode))}:void 0,q=s?function(e){return s(e,(0,d.Z)({},Z.userNode))}:void 0,U=c?function(e){return c(e,(0,d.Z)({},Z.userNode))}:void 0;return(0,h.jsx)("div",{className:v(["react-flow__node","react-flow__node-".concat(O),(0,l.Z)({},w,z),N.className,{selected:N.selected,selectable:I,parent:P,draggable:z,dragging:j}]),ref:B,style:(0,d.Z)((0,d.Z)({zIndex:Z.z,transform:"translate(".concat(Y.x,"px,").concat(Y.y,"px)"),pointerEvents:W?"all":"none",visibility:L?"visible":"hidden"},N.style),X),"data-id":t,"data-testid":"rf__node-".concat(t),onMouseEnter:K,onMouseMove:F,onMouseLeave:G,onContextMenu:q,onClick:function(e){var n=T.getState(),r=n.selectNodesOnDrag,i=n.nodeDragThreshold;I&&(!r||!z||i>0)&&Qa({id:t,store:T,nodeRef:B}),o&&o(e,(0,d.Z)({},Z.userNode))},onDoubleClick:U,onKeyDown:R?function(e){if(!Nr(e.nativeEvent)&&!b)if(Ro.includes(e.key)&&I){var n="Escape"===e.key;Qa({id:t,store:T,unselect:n,nodeRef:B})}else z&&N.selected&&Object.prototype.hasOwnProperty.call(il,e.key)&&(T.setState({ariaLiveMessage:"Moved selected node ".concat(e.key.replace("Arrow","").toLowerCase(),". New position, x: ").concat(~~Y.x,", y: ").concat(~~Y.y)}),V({direction:il[e.key],factor:e.shiftKey?4:1}))}:void 0,tabIndex:R?0:void 0,role:R?"button":void 0,"aria-describedby":b?void 0:"".concat($i,"-").concat(S),"aria-label":N.ariaLabel,children:(0,h.jsx)(nl,{value:t,children:(0,h.jsx)(D,(0,d.Z)({id:t,data:N.data,type:O,positionAbsoluteX:Y.x,positionAbsoluteY:Y.y,selected:N.selected,selectable:I,draggable:z,deletable:null===(n=N.deletable)||void 0===n||n,isConnectable:A,sourcePosition:N.sourcePosition,targetPosition:N.targetPosition,dragging:j,dragHandle:N.dragHandle,zIndex:Z.z,parentId:N.parentId},H))})})}var gl=function(e){return{nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError}};function ml(e){var n=Gi(gl,Ri),t=n.nodesDraggable,o=n.nodesConnectable,r=n.nodesFocusable,i=n.elementsSelectable,l=n.onError,s=hl(e.onlyRenderVisibleElements),c=function(){var e=Gi(vl),n=(0,a.useState)((function(){return"undefined"===typeof ResizeObserver?null:new ResizeObserver((function(n){var t=new Map;n.forEach((function(e){var n=e.target.getAttribute("data-id");t.set(n,{id:n,nodeElement:e.target,force:!0})})),e(t)}))})),t=(0,u.Z)(n,1)[0];return(0,a.useEffect)((function(){return function(){null===t||void 0===t||t.disconnect()}}),[t]),t}();return(0,h.jsx)("div",{className:"react-flow__nodes",style:Xa,children:s.map((function(n){return(0,h.jsx)(pl,{id:n,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:c,nodesDraggable:t,nodesConnectable:o,nodesFocusable:r,elementsSelectable:i,nodeClickDistance:e.nodeClickDistance,onError:l},n)}))})}ml.displayName="NodeRenderer";var yl=(0,a.memo)(ml);var xl=(Ti={},(0,l.Z)(Ti,Lo.Arrow,(function(e){var n=e.color,t=void 0===n?"none":n,o=e.strokeWidth,r=void 0===o?1:o;return(0,h.jsx)("polyline",{style:{stroke:t,strokeWidth:r},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"})})),(0,l.Z)(Ti,Lo.ArrowClosed,(function(e){var n=e.color,t=void 0===n?"none":n,o=e.strokeWidth,r=void 0===o?1:o;return(0,h.jsx)("polyline",{style:{stroke:t,fill:t,strokeWidth:r},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})})),Ti);var wl=function(e){var n=e.id,t=e.type,o=e.color,r=e.width,i=void 0===r?12.5:r,l=e.height,u=void 0===l?12.5:l,s=e.markerUnits,c=void 0===s?"strokeWidth":s,d=e.strokeWidth,f=e.orient,v=void 0===f?"auto-start-reverse":f,p=function(e){var n=qi();return(0,a.useMemo)((function(){var t,o;return Object.prototype.hasOwnProperty.call(xl,e)?xl[e]:(null===(t=(o=n.getState()).onError)||void 0===t||t.call(o,"009",Po(e)),null)}),[e])}(t);return p?(0,h.jsx)("marker",{className:"react-flow__arrowhead",id:n,markerWidth:"".concat(i),markerHeight:"".concat(u),viewBox:"-10 -10 20 20",markerUnits:c,orient:v,refX:"0",refY:"0",children:(0,h.jsx)(p,{color:o,strokeWidth:d})}):null},bl=function(e){var n=e.defaultColor,t=e.rfId,o=Gi((function(e){return e.edges})),r=Gi((function(e){return e.defaultEdgeOptions})),i=(0,a.useMemo)((function(){var e=function(e,n){var t=n.id,o=n.defaultColor,r=n.defaultMarkerStart,i=n.defaultMarkerEnd,a=new Set;return e.reduce((function(e,n){return[n.markerStart||r,n.markerEnd||i].forEach((function(n){if(n&&"object"===typeof n){var r=Gr(n,t);a.has(r)||(e.push((0,d.Z)({id:r,color:n.color||o},n)),a.add(r))}})),e}),[]).sort((function(e,n){return e.id.localeCompare(n.id)}))}(o,{id:t,defaultColor:n,defaultMarkerStart:null===r||void 0===r?void 0:r.markerStart,defaultMarkerEnd:null===r||void 0===r?void 0:r.markerEnd});return e}),[o,r,t,n]);return i.length?(0,h.jsx)("svg",{className:"react-flow__marker",children:(0,h.jsx)("defs",{children:i.map((function(e){return(0,h.jsx)(wl,{id:e.id,type:e.type,color:e.color,width:e.width,height:e.height,markerUnits:e.markerUnits,strokeWidth:e.strokeWidth,orient:e.orient},e.id)}))})}):null};bl.displayName="MarkerDefinitions";var Sl=(0,a.memo)(bl);function Cl(e){var n=e.x,t=e.y,o=e.label,r=e.labelStyle,i=void 0===r?{}:r,l=e.labelShowBg,s=void 0===l||l,c=e.labelBgStyle,p=void 0===c?{}:c,g=e.labelBgPadding,m=void 0===g?[2,4]:g,y=e.labelBgBorderRadius,x=void 0===y?2:y,w=e.children,b=e.className,S=(0,f.Z)(e,Vi),C=(0,a.useState)({x:1,y:0,width:0,height:0}),E=(0,u.Z)(C,2),k=E[0],_=E[1],M=v(["react-flow__edge-textwrapper",b]),N=(0,a.useRef)(null);return(0,a.useEffect)((function(){if(N.current){var e=N.current.getBBox();_({x:e.x,y:e.y,width:e.width,height:e.height})}}),[o]),"undefined"!==typeof o&&o?(0,h.jsxs)("g",(0,d.Z)((0,d.Z)({transform:"translate(".concat(n-k.width/2," ").concat(t-k.height/2,")"),className:M,visibility:k.width?"visible":"hidden"},S),{},{children:[s&&(0,h.jsx)("rect",{width:k.width+2*m[0],x:-m[0],y:-m[1],height:k.height+2*m[1],className:"react-flow__edge-textbg",style:p,rx:x,ry:x}),(0,h.jsx)("text",{className:"react-flow__edge-text",y:k.height/2,dy:"0.3em",ref:N,style:i,children:o}),w]})):null}Cl.displayName="EdgeText";var El=(0,a.memo)(Cl);function kl(e){var n=e.id,t=e.path,o=e.labelX,r=e.labelY,i=e.label,a=e.labelStyle,l=e.labelShowBg,u=e.labelBgStyle,s=e.labelBgPadding,c=e.labelBgBorderRadius,d=e.style,f=e.markerEnd,p=e.markerStart,g=e.className,m=e.interactionWidth,y=void 0===m?20:m;return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("path",{id:n,style:d,d:t,fill:"none",className:v(["react-flow__edge-path",g]),markerEnd:f,markerStart:p}),y&&(0,h.jsx)("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:y,className:"react-flow__edge-interaction"}),i&&hr(o)&&hr(r)?(0,h.jsx)(El,{x:o,y:r,label:i,labelStyle:a,labelShowBg:l,labelBgStyle:u,labelBgPadding:s,labelBgBorderRadius:c}):null]})}function _l(e){var n=e.pos,t=e.x1,o=e.y1,r=e.x2,i=e.y2;return n===Bo.Left||n===Bo.Right?[.5*(t+r),o]:[t,.5*(o+i)]}function Ml(e){var n=e.sourceX,t=e.sourceY,o=e.sourcePosition,r=void 0===o?Bo.Bottom:o,i=e.targetX,a=e.targetY,l=e.targetPosition,s=void 0===l?Bo.Top:l,c=_l({pos:r,x1:n,y1:t,x2:i,y2:a}),d=(0,u.Z)(c,2),f=d[0],h=d[1],v=_l({pos:s,x1:i,y1:a,x2:n,y2:t}),p=(0,u.Z)(v,2),g=p[0],m=p[1],y=Dr({sourceX:n,sourceY:t,targetX:i,targetY:a,sourceControlX:f,sourceControlY:h,targetControlX:g,targetControlY:m}),x=(0,u.Z)(y,4),w=x[0],b=x[1],S=x[2],C=x[3];return["M".concat(n,",").concat(t," C").concat(f,",").concat(h," ").concat(g,",").concat(m," ").concat(i,",").concat(a),w,b,S,C]}function Nl(e){return(0,a.memo)((function(n){var t=n.id,o=n.sourceX,r=n.sourceY,i=n.targetX,a=n.targetY,l=n.sourcePosition,s=void 0===l?Bo.Bottom:l,c=n.targetPosition,d=void 0===c?Bo.Top:c,f=n.label,v=n.labelStyle,p=n.labelShowBg,g=n.labelBgStyle,m=n.labelBgPadding,y=n.labelBgBorderRadius,x=n.style,w=n.markerEnd,b=n.markerStart,S=n.interactionWidth,C=Ml({sourceX:o,sourceY:r,sourcePosition:s,targetX:i,targetY:a,targetPosition:d}),E=(0,u.Z)(C,3),k=E[0],_=E[1],M=E[2],N=e.isInternal?void 0:t;return(0,h.jsx)(kl,{id:N,path:k,labelX:_,labelY:M,label:f,labelStyle:v,labelShowBg:p,labelBgStyle:g,labelBgPadding:m,labelBgBorderRadius:y,style:x,markerEnd:w,markerStart:b,interactionWidth:S})}))}var Zl=Nl({isInternal:!1}),Pl=Nl({isInternal:!0});function Ol(e){return(0,a.memo)((function(n){var t=n.id,o=n.sourceX,r=n.sourceY,i=n.targetX,a=n.targetY,l=n.label,s=n.labelStyle,c=n.labelShowBg,d=n.labelBgStyle,f=n.labelBgPadding,v=n.labelBgBorderRadius,p=n.style,g=n.sourcePosition,m=void 0===g?Bo.Bottom:g,y=n.targetPosition,x=void 0===y?Bo.Top:y,w=n.markerEnd,b=n.markerStart,S=n.pathOptions,C=n.interactionWidth,E=Xr({sourceX:o,sourceY:r,sourcePosition:m,targetX:i,targetY:a,targetPosition:x,borderRadius:null===S||void 0===S?void 0:S.borderRadius,offset:null===S||void 0===S?void 0:S.offset}),k=(0,u.Z)(E,3),_=k[0],M=k[1],N=k[2],Z=e.isInternal?void 0:t;return(0,h.jsx)(kl,{id:Z,path:_,labelX:M,labelY:N,label:l,labelStyle:s,labelShowBg:c,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:v,style:p,markerEnd:w,markerStart:b,interactionWidth:C})}))}Zl.displayName="SimpleBezierEdge",Pl.displayName="SimpleBezierEdgeInternal";var Dl=Ol({isInternal:!1}),zl=Ol({isInternal:!0});function Il(e){return(0,a.memo)((function(n){var t,o=n.id,r=(0,f.Z)(n,Hi),i=e.isInternal?void 0:o;return(0,h.jsx)(Dl,(0,d.Z)((0,d.Z)({},r),{},{id:i,pathOptions:(0,a.useMemo)((function(){var e;return{borderRadius:0,offset:null===(e=r.pathOptions)||void 0===e?void 0:e.offset}}),[null===(t=r.pathOptions)||void 0===t?void 0:t.offset])}))}))}Dl.displayName="SmoothStepEdge",zl.displayName="SmoothStepEdgeInternal";var Al=Il({isInternal:!1}),Rl=Il({isInternal:!0});function Tl(e){return(0,a.memo)((function(n){var t=n.id,o=n.sourceX,r=n.sourceY,i=n.targetX,a=n.targetY,l=n.label,s=n.labelStyle,c=n.labelShowBg,d=n.labelBgStyle,f=n.labelBgPadding,v=n.labelBgBorderRadius,p=n.style,g=n.markerEnd,m=n.markerStart,y=n.interactionWidth,x=Br({sourceX:o,sourceY:r,targetX:i,targetY:a}),w=(0,u.Z)(x,3),b=w[0],S=w[1],C=w[2],E=e.isInternal?void 0:t;return(0,h.jsx)(kl,{id:E,path:b,labelX:S,labelY:C,label:l,labelStyle:s,labelShowBg:c,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:v,style:p,markerEnd:g,markerStart:m,interactionWidth:y})}))}Al.displayName="StepEdge",Rl.displayName="StepEdgeInternal";var Ll=Tl({isInternal:!1}),Bl=Tl({isInternal:!0});function jl(e){return(0,a.memo)((function(n){var t=n.id,o=n.sourceX,r=n.sourceY,i=n.targetX,a=n.targetY,l=n.sourcePosition,s=void 0===l?Bo.Bottom:l,c=n.targetPosition,d=void 0===c?Bo.Top:c,f=n.label,v=n.labelStyle,p=n.labelShowBg,g=n.labelBgStyle,m=n.labelBgPadding,y=n.labelBgBorderRadius,x=n.style,w=n.markerEnd,b=n.markerStart,S=n.pathOptions,C=n.interactionWidth,E=Ar({sourceX:o,sourceY:r,sourcePosition:s,targetX:i,targetY:a,targetPosition:d,curvature:null===S||void 0===S?void 0:S.curvature}),k=(0,u.Z)(E,3),_=k[0],M=k[1],N=k[2],Z=e.isInternal?void 0:t;return(0,h.jsx)(kl,{id:Z,path:_,labelX:M,labelY:N,label:f,labelStyle:v,labelShowBg:p,labelBgStyle:g,labelBgPadding:m,labelBgBorderRadius:y,style:x,markerEnd:w,markerStart:b,interactionWidth:C})}))}Ll.displayName="StraightEdge",Bl.displayName="StraightEdgeInternal";var Vl=jl({isInternal:!1}),Hl=jl({isInternal:!0});Vl.displayName="BezierEdge",Hl.displayName="BezierEdgeInternal";var Xl={default:Hl,straight:Bl,step:Rl,smoothstep:zl,simplebezier:Pl},Yl={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},Wl=function(e,n,t){return t===Bo.Left?e-n:t===Bo.Right?e+n:e},Kl=function(e,n,t){return t===Bo.Top?e-n:t===Bo.Bottom?e+n:e},Fl="react-flow__edgeupdater";function Gl(e){var n=e.position,t=e.centerX,o=e.centerY,r=e.radius,i=void 0===r?10:r,a=e.onMouseDown,l=e.onMouseEnter,u=e.onMouseOut,s=e.type;return(0,h.jsx)("circle",{onMouseDown:a,onMouseEnter:l,onMouseOut:u,className:v([Fl,"".concat(Fl,"-").concat(s)]),cx:Wl(t,i,n),cy:Kl(o,i,n),r:i,stroke:"transparent",fill:"transparent"})}function ql(e){var n=e.isReconnectable,t=e.reconnectRadius,o=e.edge,r=e.targetHandleId,i=e.sourceHandleId,a=e.sourceX,l=e.sourceY,u=e.targetX,s=e.targetY,c=e.sourcePosition,d=e.targetPosition,f=e.onReconnect,v=e.onReconnectStart,p=e.onReconnectEnd,g=e.setReconnecting,m=e.setUpdateHover,y=qi(),x=function(e,n){if(0===e.button){var t=y.getState(),a=t.autoPanOnConnect,l=t.domNode,u=t.isValidConnection,s=t.connectionMode,c=t.connectionRadius,d=t.lib,h=t.onConnectStart,m=t.onConnectEnd,x=t.cancelConnection,w=t.nodeLookup,b=t.rfId,S=t.panBy,C=t.updateConnection,E=n?o.target:o.source,k=(n?r:i)||null,_=n?"target":"source",M=n;g(!0),null===v||void 0===v||v(e,o,_);di.onPointerDown(e.nativeEvent,{autoPanOnConnect:a,connectionMode:s,connectionRadius:c,domNode:l,handleId:k,nodeId:E,nodeLookup:w,isTarget:M,edgeUpdaterType:_,lib:d,flowId:b,cancelConnection:x,panBy:S,isValidConnection:u,onConnect:function(e){return null===f||void 0===f?void 0:f(o,e)},onConnectStart:h,onConnectEnd:m,onReconnectEnd:function(e){g(!1),null===p||void 0===p||p(e,o,_)},updateConnection:C,getTransform:function(){return y.getState().transform},getFromHandle:function(){return y.getState().connection.fromHandle}})}},w=function(){return m(!0)},b=function(){return m(!1)};return(0,h.jsxs)(h.Fragment,{children:[("source"===n||!0===n)&&(0,h.jsx)(Gl,{position:c,centerX:a,centerY:l,radius:t,onMouseDown:function(e){return x(e,!0)},onMouseEnter:w,onMouseOut:b,type:"source"}),("target"===n||!0===n)&&(0,h.jsx)(Gl,{position:d,centerX:u,centerY:s,radius:t,onMouseDown:function(e){return x(e,!1)},onMouseEnter:w,onMouseOut:b,type:"target"})]})}function Ul(e){var n,t=e.id,o=e.edgesFocusable,r=e.edgesReconnectable,i=e.elementsSelectable,l=e.onClick,s=e.onDoubleClick,c=e.onContextMenu,f=e.onMouseEnter,p=e.onMouseMove,g=e.onMouseLeave,m=e.reconnectRadius,y=e.onReconnect,x=e.onReconnectStart,w=e.onReconnectEnd,b=e.rfId,S=e.edgeTypes,C=e.noPanClassName,E=e.onError,k=e.disableKeyboardA11y,_=Gi((function(e){return e.edgeLookup.get(t)})),M=Gi((function(e){return e.defaultEdgeOptions})),N=(_=M?(0,d.Z)((0,d.Z)({},M),_):_).type||"default",Z=(null===S||void 0===S?void 0:S[N])||Xl[N];void 0===Z&&(null===E||void 0===E||E("011",zo(N)),N="default",Z=Xl.default);var P=!!(_.focusable||o&&"undefined"===typeof _.focusable),O="undefined"!==typeof y&&(_.reconnectable||r&&"undefined"===typeof _.reconnectable),D=!!(_.selectable||i&&"undefined"===typeof _.selectable),z=(0,a.useRef)(null),I=(0,a.useState)(!1),A=(0,u.Z)(I,2),R=A[0],T=A[1],L=(0,a.useState)(!1),B=(0,u.Z)(L,2),j=B[0],V=B[1],H=qi(),X=Gi((0,a.useCallback)((function(e){var n=e.nodeLookup.get(_.source),o=e.nodeLookup.get(_.target);if(!n||!o)return(0,d.Z)({zIndex:_.zIndex},Yl);var r=function(e){var n,t,o,r,i=e.sourceNode,a=e.targetNode;if(!Yr(i)||!Yr(a))return null;var l,u=i.internals.handleBounds||Wr(i.handles),s=a.internals.handleBounds||Wr(a.handles),c=Fr(null!==(n=null===u||void 0===u?void 0:u.source)&&void 0!==n?n:[],e.sourceHandle),d=Fr(e.connectionMode===So.Strict?null!==(t=null===s||void 0===s?void 0:s.target)&&void 0!==t?t:[]:(null!==(o=null===s||void 0===s?void 0:s.target)&&void 0!==o?o:[]).concat(null!==(r=null===s||void 0===s?void 0:s.source)&&void 0!==r?r:[]),e.targetHandle);if(!c||!d)return null===(l=e.onError)||void 0===l||l.call(e,"008",Oo(c?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;var f=(null===c||void 0===c?void 0:c.position)||Bo.Bottom,h=(null===d||void 0===d?void 0:d.position)||Bo.Top,v=Kr(i,c,f),p=Kr(a,d,h);return{sourceX:v.x,sourceY:v.y,targetX:p.x,targetY:p.y,sourcePosition:f,targetPosition:h}}({id:t,sourceNode:n,targetNode:o,sourceHandle:_.sourceHandle||null,targetHandle:_.targetHandle||null,connectionMode:e.connectionMode,onError:E}),i=function(e){var n=e.sourceNode,t=e.targetNode,o=e.selected,r=void 0!==o&&o,i=e.zIndex,a=void 0===i?0:i,l=e.elevateOnSelect;if(void 0===l||!l)return a;var u=r||t.selected||n.selected,s=Math.max(n.internals.z||0,t.internals.z||0,1e3);return a+(u?s:0)}({selected:_.selected,zIndex:_.zIndex,sourceNode:n,targetNode:o,elevateOnSelect:e.elevateEdgesOnSelect});return(0,d.Z)({zIndex:i},r||Yl)}),[_.source,_.target,_.sourceHandle,_.targetHandle,_.selected,_.zIndex]),Ri),Y=X.zIndex,W=X.sourceX,K=X.sourceY,F=X.targetX,G=X.targetY,q=X.sourcePosition,U=X.targetPosition,Q=(0,a.useMemo)((function(){return _.markerStart?"url('#".concat(Gr(_.markerStart,b),"')"):void 0}),[_.markerStart,b]),$=(0,a.useMemo)((function(){return _.markerEnd?"url('#".concat(Gr(_.markerEnd,b),"')"):void 0}),[_.markerEnd,b]);if(_.hidden||null===W||null===K||null===F||null===G)return null;var J=s?function(e){s(e,(0,d.Z)({},_))}:void 0,ee=c?function(e){c(e,(0,d.Z)({},_))}:void 0,ne=f?function(e){f(e,(0,d.Z)({},_))}:void 0,te=p?function(e){p(e,(0,d.Z)({},_))}:void 0,oe=g?function(e){g(e,(0,d.Z)({},_))}:void 0;return(0,h.jsx)("svg",{style:{zIndex:Y},children:(0,h.jsxs)("g",{className:v(["react-flow__edge","react-flow__edge-".concat(N),_.className,C,{selected:_.selected,animated:_.animated,inactive:!D&&!l,updating:R,selectable:D}]),onClick:function(e){var n,o=H.getState(),r=o.addSelectedEdges,i=o.unselectNodesAndEdges,a=o.multiSelectionActive;D&&(H.setState({nodesSelectionActive:!1}),_.selected&&a?(i({nodes:[],edges:[_]}),null===(n=z.current)||void 0===n||n.blur()):r([t]));l&&l(e,_)},onDoubleClick:J,onContextMenu:ee,onMouseEnter:ne,onMouseMove:te,onMouseLeave:oe,onKeyDown:P?function(e){if(!k&&Ro.includes(e.key)&&D){var n,o=H.getState(),r=o.unselectNodesAndEdges,i=o.addSelectedEdges;if("Escape"===e.key)null===(n=z.current)||void 0===n||n.blur(),r({edges:[_]});else i([t])}}:void 0,tabIndex:P?0:void 0,role:P?"button":"img","data-id":t,"data-testid":"rf__edge-".concat(t),"aria-label":null===_.ariaLabel?void 0:_.ariaLabel||"Edge from ".concat(_.source," to ").concat(_.target),"aria-describedby":P?"".concat(Ji,"-").concat(b):void 0,ref:z,children:[!j&&(0,h.jsx)(Z,{id:t,source:_.source,target:_.target,type:_.type,selected:_.selected,animated:_.animated,selectable:D,deletable:null===(n=_.deletable)||void 0===n||n,label:_.label,labelStyle:_.labelStyle,labelShowBg:_.labelShowBg,labelBgStyle:_.labelBgStyle,labelBgPadding:_.labelBgPadding,labelBgBorderRadius:_.labelBgBorderRadius,sourceX:W,sourceY:K,targetX:F,targetY:G,sourcePosition:q,targetPosition:U,data:_.data,style:_.style,sourceHandleId:_.sourceHandle,targetHandleId:_.targetHandle,markerStart:Q,markerEnd:$,pathOptions:"pathOptions"in _?_.pathOptions:void 0,interactionWidth:_.interactionWidth}),O&&(0,h.jsx)(ql,{edge:_,isReconnectable:O,reconnectRadius:m,onReconnect:y,onReconnectStart:x,onReconnectEnd:w,sourceX:W,sourceY:K,targetX:F,targetY:G,sourcePosition:q,targetPosition:U,setUpdateHover:T,setReconnecting:V,sourceHandleId:_.sourceHandle,targetHandleId:_.targetHandle})]})})}var Ql=function(e){return{width:e.width,height:e.height,edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError}};function $l(e){var n,t=e.defaultMarkerColor,o=e.onlyRenderVisibleElements,r=e.rfId,i=e.edgeTypes,l=e.noPanClassName,u=e.onReconnect,c=e.onEdgeContextMenu,d=e.onEdgeMouseEnter,f=e.onEdgeMouseMove,v=e.onEdgeMouseLeave,p=e.onEdgeClick,g=e.reconnectRadius,m=e.onEdgeDoubleClick,y=e.onReconnectStart,x=e.onReconnectEnd,w=e.disableKeyboardA11y,b=Gi(Ql,Ri),S=b.edgesFocusable,C=b.edgesReconnectable,E=b.elementsSelectable,k=b.onError,_=(n=o,Gi((0,a.useCallback)((function(e){if(!n)return e.edges.map((function(e){return e.id}));var t=[];if(e.width&&e.height){var o,r=(0,s.Z)(e.edges);try{for(r.s();!(o=r.n()).done;){var i=o.value,a=e.nodeLookup.get(i.source),l=e.nodeLookup.get(i.target);a&&l&&Tr({sourceNode:a,targetNode:l,width:e.width,height:e.height,transform:e.transform})&&t.push(i.id)}}catch(u){r.e(u)}finally{r.f()}}return t}),[n]),Ri));return(0,h.jsxs)("div",{className:"react-flow__edges",children:[(0,h.jsx)(Sl,{defaultColor:t,rfId:r}),_.map((function(e){return(0,h.jsx)(Ul,{id:e,edgesFocusable:S,edgesReconnectable:C,elementsSelectable:E,noPanClassName:l,onReconnect:u,onContextMenu:c,onMouseEnter:d,onMouseMove:f,onMouseLeave:v,onClick:p,reconnectRadius:g,onDoubleClick:m,onReconnectStart:y,onReconnectEnd:x,rfId:r,onError:k,edgeTypes:i,disableKeyboardA11y:w},e)}))]})}$l.displayName="EdgeRenderer";var Jl=(0,a.memo)($l),eu=function(e){return"translate(".concat(e.transform[0],"px,").concat(e.transform[1],"px) scale(").concat(e.transform[2],")")};function nu(e){var n=e.children,t=Gi(eu);return(0,h.jsx)("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:n})}var tu=function(e){var n;return null===(n=e.panZoom)||void 0===n?void 0:n.syncViewport};var ou=function(e){return e.connection.inProgress?(0,d.Z)((0,d.Z)({},e.connection),{},{to:gr(e.connection.to,e.transform)}):(0,d.Z)({},e.connection)};var ru=function(e){return{nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height}};function iu(e){var n=e.containerStyle,t=e.style,o=e.type,r=e.component,i=Gi(ru,Ri),a=i.nodesConnectable,l=i.width,u=i.height,s=i.isValid,c=i.inProgress;return!!(l&&a&&c)?(0,h.jsx)("svg",{style:n,width:l,height:u,className:"react-flow__connectionline react-flow__container",children:(0,h.jsx)("g",{className:v(["react-flow__connection",Ho(s)]),children:(0,h.jsx)(au,{style:t,type:o,CustomComponent:r,isValid:s})})}):null}var au=function(e){var n=e.style,t=e.type,o=void 0===t?To.Bezier:t,r=e.CustomComponent,i=e.isValid,a=Gi(ou,Ri),l=a.inProgress,s=a.from,c=a.fromNode,f=a.fromHandle,v=a.fromPosition,p=a.to,g=a.toNode,m=a.toHandle,y=a.toPosition;if(l){if(r)return(0,h.jsx)(r,{connectionLineType:o,connectionLineStyle:n,fromNode:c,fromHandle:f,fromX:s.x,fromY:s.y,toX:p.x,toY:p.y,fromPosition:v,toPosition:y,connectionStatus:Ho(i),toNode:g,toHandle:m});var x="",w={sourceX:s.x,sourceY:s.y,sourcePosition:v,targetX:p.x,targetY:p.y,targetPosition:y};switch(o){case To.Bezier:var b=Ar(w);x=(0,u.Z)(b,1)[0];break;case To.SimpleBezier:var S=Ml(w);x=(0,u.Z)(S,1)[0];break;case To.Step:var C=Xr((0,d.Z)((0,d.Z)({},w),{},{borderRadius:0}));x=(0,u.Z)(C,1)[0];break;case To.SmoothStep:var E=Xr(w);x=(0,u.Z)(E,1)[0];break;default:var k=Br(w);x=(0,u.Z)(k,1)[0]}return(0,h.jsx)("path",{d:x,fill:"none",className:"react-flow__connection-path",style:n})}};au.displayName="ConnectionLine";var lu={};function uu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lu;(0,a.useRef)(e),qi();(0,a.useEffect)((function(){}),[e])}function su(e){var n=e.nodeTypes,t=e.edgeTypes,o=e.onInit,r=e.onNodeClick,i=e.onEdgeClick,l=e.onNodeDoubleClick,u=e.onEdgeDoubleClick,s=e.onNodeMouseEnter,c=e.onNodeMouseMove,d=e.onNodeMouseLeave,f=e.onNodeContextMenu,v=e.onSelectionContextMenu,p=e.onSelectionStart,g=e.onSelectionEnd,m=e.connectionLineType,y=e.connectionLineStyle,x=e.connectionLineComponent,w=e.connectionLineContainerStyle,b=e.selectionKeyCode,S=e.selectionOnDrag,C=e.selectionMode,E=e.multiSelectionKeyCode,k=e.panActivationKeyCode,_=e.zoomActivationKeyCode,M=e.deleteKeyCode,N=e.onlyRenderVisibleElements,Z=e.elementsSelectable,P=e.defaultViewport,O=e.translateExtent,D=e.minZoom,z=e.maxZoom,I=e.preventScrolling,A=e.defaultMarkerColor,R=e.zoomOnScroll,T=e.zoomOnPinch,L=e.panOnScroll,B=e.panOnScrollSpeed,j=e.panOnScrollMode,V=e.zoomOnDoubleClick,H=e.panOnDrag,X=e.onPaneClick,Y=e.onPaneMouseEnter,W=e.onPaneMouseMove,K=e.onPaneMouseLeave,F=e.onPaneScroll,G=e.onPaneContextMenu,q=e.paneClickDistance,U=e.nodeClickDistance,Q=e.onEdgeContextMenu,$=e.onEdgeMouseEnter,J=e.onEdgeMouseMove,ee=e.onEdgeMouseLeave,ne=e.reconnectRadius,te=e.onReconnect,oe=e.onReconnectStart,re=e.onReconnectEnd,ie=e.noDragClassName,ae=e.noWheelClassName,le=e.noPanClassName,ue=e.disableKeyboardA11y,se=e.nodeExtent,ce=e.rfId,de=e.viewport,fe=e.onViewportChange;return uu(n),uu(t),qi(),(0,a.useRef)(!1),(0,a.useEffect)((function(){}),[]),function(e){var n=Ba(),t=(0,a.useRef)(!1);(0,a.useEffect)((function(){!t.current&&n.viewportInitialized&&e&&(setTimeout((function(){return e(n)}),1),t.current=!0)}),[e,n.viewportInitialized])}(o),function(e){var n=Gi(tu),t=qi();(0,a.useEffect)((function(){e&&(null===n||void 0===n||n(e),t.setState({transform:[e.x,e.y,e.zoom]}))}),[e,n])}(de),(0,h.jsx)(fl,{onPaneClick:X,onPaneMouseEnter:Y,onPaneMouseMove:W,onPaneMouseLeave:K,onPaneContextMenu:G,onPaneScroll:F,paneClickDistance:q,deleteKeyCode:M,selectionKeyCode:b,selectionOnDrag:S,selectionMode:C,onSelectionStart:p,onSelectionEnd:g,multiSelectionKeyCode:E,panActivationKeyCode:k,zoomActivationKeyCode:_,elementsSelectable:Z,zoomOnScroll:R,zoomOnPinch:T,zoomOnDoubleClick:V,panOnScroll:L,panOnScrollSpeed:B,panOnScrollMode:j,panOnDrag:H,defaultViewport:P,translateExtent:O,minZoom:D,maxZoom:z,onSelectionContextMenu:v,preventScrolling:I,noDragClassName:ie,noWheelClassName:ae,noPanClassName:le,disableKeyboardA11y:ue,onViewportChange:fe,isControlledViewport:!!de,children:(0,h.jsxs)(nu,{children:[(0,h.jsx)(Jl,{edgeTypes:t,onEdgeClick:i,onEdgeDoubleClick:u,onReconnect:te,onReconnectStart:oe,onReconnectEnd:re,onlyRenderVisibleElements:N,onEdgeContextMenu:Q,onEdgeMouseEnter:$,onEdgeMouseMove:J,onEdgeMouseLeave:ee,reconnectRadius:ne,defaultMarkerColor:A,noPanClassName:le,disableKeyboardA11y:ue,rfId:ce}),(0,h.jsx)(iu,{style:y,type:m,component:x,containerStyle:w}),(0,h.jsx)("div",{className:"react-flow__edgelabel-renderer"}),(0,h.jsx)(yl,{nodeTypes:n,onNodeClick:r,onNodeDoubleClick:l,onNodeMouseEnter:s,onNodeMouseMove:c,onNodeMouseLeave:d,onNodeContextMenu:f,nodeClickDistance:U,onlyRenderVisibleElements:N,noPanClassName:le,noDragClassName:ie,disableKeyboardA11y:ue,nodeExtent:se,rfId:ce}),(0,h.jsx)("div",{className:"react-flow__viewport-portal"})]})})}su.displayName="GraphView";var cu=(0,a.memo)(su),du=function(){var e,n,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=t.nodes,r=t.edges,i=t.defaultNodes,a=t.defaultEdges,l=t.width,u=t.height,s=t.fitView,c=t.nodeOrigin,f=new Map,h=new Map,v=new Map,p=new Map,g=null!==(e=null!==a&&void 0!==a?a:r)&&void 0!==e?e:[],m=null!==(n=null!==i&&void 0!==i?i:o)&&void 0!==n?n:[],y=null!==c&&void 0!==c?c:[0,0];ti(v,p,g),Qr(m,f,h,{nodeOrigin:y,elevateNodesOnSelect:!1});var x=[0,0,1];if(s&&l&&u){var w=Ko(f,{filter:function(e){return!(!e.width&&!e.initialWidth||!e.height&&!e.initialHeight)}}),b=yr(w,l,u,.5,2,.1),S=b.x,C=b.y,E=b.zoom;x=[S,C,E]}return{rfId:"1",width:0,height:0,transform:x,nodes:m,nodeLookup:f,parentLookup:h,edges:g,edgeLookup:p,connectionLookup:v,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:void 0!==i,hasDefaultEdges:void 0!==a,panZoom:null,minZoom:.5,maxZoom:2,translateExtent:Ao,nodeExtent:Ao,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:So.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:y,nodeDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,fitViewOnInit:!1,fitViewDone:!1,fitViewOnInitOptions:void 0,selectNodesOnDrag:!0,multiSelectionActive:!1,connection:(0,d.Z)({},jo),connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanSpeed:15,connectionRadius:20,onError:vr,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1}},fu=function(e){var n,t,o=e.nodes,r=e.edges,i=e.defaultNodes,a=e.defaultEdges,l=e.width,f=e.height,h=e.fitView,v=e.nodeOrigin;return n=function(e,n){return(0,d.Z)((0,d.Z)({},du({nodes:o,edges:r,width:l,height:f,fitView:h,nodeOrigin:v,defaultNodes:i,defaultEdges:a})),{},{setNodes:function(t){var o=n();Qr(t,o.nodeLookup,o.parentLookup,{nodeOrigin:o.nodeOrigin,elevateNodesOnSelect:o.elevateNodesOnSelect,checkEquality:!0}),e({nodes:t})},setEdges:function(t){var o=n();ti(o.connectionLookup,o.edgeLookup,t),e({edges:t})},setDefaultNodesAndEdges:function(t,o){t&&((0,n().setNodes)(t),e({hasDefaultNodes:!0})),o&&((0,n().setEdges)(o),e({hasDefaultEdges:!0}))},updateNodeInternals:function(t){var o=n(),r=o.triggerNodeChanges,i=o.nodeLookup,a=o.parentLookup,l=o.fitViewOnInit,u=o.fitViewDone,f=o.fitViewOnInitOptions,h=o.domNode,v=o.nodeOrigin,p=o.debug,g=o.fitViewSync,m=function(e,n,t,o,r){var i=null===o||void 0===o?void 0:o.querySelector(".xyflow__viewport"),a=!1;if(!i)return{changes:[],updatedInternals:a};var l,u=[],f=window.getComputedStyle(i),h=new window.DOMMatrixReadOnly(f.transform).m22,v=[],p=(0,s.Z)(e.values());try{for(p.s();!(l=p.n()).done;){var g=l.value,m=n.get(g.id);if(m)if(m.hidden)m.internals=(0,d.Z)((0,d.Z)({},m.internals),{},{handleBounds:void 0}),a=!0;else{var y=kr(g.nodeElement),x=m.measured.width!==y.width||m.measured.height!==y.height;if(y.width&&y.height&&(x||!m.internals.handleBounds||g.force)){var w=g.nodeElement.getBoundingClientRect();m.measured=y,m.internals=(0,d.Z)((0,d.Z)({},m.internals),{},{positionAbsolute:Wo(m,r),handleBounds:{source:Or("source",g.nodeElement,w,h,m.id),target:Or("target",g.nodeElement,w,h,m.id)}}),m.parentId&&$r(m,n,t,{nodeOrigin:r}),a=!0,x&&(u.push({id:m.id,type:"dimensions",dimensions:y}),m.expandParent&&m.parentId&&v.push({id:m.id,parentId:m.parentId,rect:ur(m,r)}))}}}}catch(S){p.e(S)}finally{p.f()}if(v.length>0){var b=ei(v,n,t,r);u.push.apply(u,(0,c.Z)(b))}return{changes:u,updatedInternals:a}}(t,i,a,h,v),y=m.changes;if(m.updatedInternals){!function(e,n,t){var o,r=(0,d.Z)((0,d.Z)({},qr),t),i=(0,s.Z)(e.values());try{for(i.s();!(o=i.n()).done;){var a=o.value;a.parentId&&$r(a,e,n,r)}}catch(l){i.e(l)}finally{i.f()}}(i,a,{nodeOrigin:v});var x=u;!u&&l&&(x=g((0,d.Z)((0,d.Z)({},f),{},{nodes:null===f||void 0===f?void 0:f.nodes}))),e({fitViewDone:x}),(null===y||void 0===y?void 0:y.length)>0&&(p&&console.log("React Flow: trigger node changes",y),null===r||void 0===r||r(y))}},updateNodePositions:function(e){var t,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=[],i=[],a=(0,s.Z)(e);try{for(a.s();!(t=a.n()).done;){var l=(0,u.Z)(t.value,2),f=l[0],h=l[1],v={id:f,type:"position",position:h.position,dragging:o};null!==h&&void 0!==h&&h.expandParent&&null!==h&&void 0!==h&&h.parentId&&v.position&&(r.push({id:f,parentId:h.parentId,rect:(0,d.Z)((0,d.Z)({},h.internals.positionAbsolute),{},{width:h.measured.width,height:h.measured.height})}),v.position.x=Math.max(0,v.position.x),v.position.y=Math.max(0,v.position.y)),i.push(v)}}catch(w){a.e(w)}finally{a.f()}if(r.length>0){var p=n(),g=p.nodeLookup,m=p.parentLookup,y=p.nodeOrigin,x=ei(r,g,m,y);i.push.apply(i,(0,c.Z)(x))}n().triggerNodeChanges(i)},triggerNodeChanges:function(e){var t=n(),o=t.onNodesChange,r=t.setNodes,i=t.nodes,a=t.hasDefaultNodes,l=t.debug;null!==e&&void 0!==e&&e.length&&(a&&r(ka(e,i)),l&&console.log("React Flow: trigger node changes",e),null===o||void 0===o||o(e))},triggerEdgeChanges:function(e){var t=n(),o=t.onEdgesChange,r=t.setEdges,i=t.edges,a=t.hasDefaultEdges,l=t.debug;null!==e&&void 0!==e&&e.length&&(a&&r(_a(e,i)),l&&console.log("React Flow: trigger edge changes",e),null===o||void 0===o||o(e))},addSelectedNodes:function(e){var t=n(),o=t.multiSelectionActive,r=t.edgeLookup,i=t.nodeLookup,a=t.triggerNodeChanges,l=t.triggerEdgeChanges;o?a(e.map((function(e){return Ma(e,!0)}))):(a(Na(i,new Set((0,c.Z)(e)),!0)),l(Na(r)))},addSelectedEdges:function(e){var t=n(),o=t.multiSelectionActive,r=t.edgeLookup,i=t.nodeLookup,a=t.triggerNodeChanges,l=t.triggerEdgeChanges;o?l(e.map((function(e){return Ma(e,!0)}))):(l(Na(r,new Set((0,c.Z)(e)))),a(Na(i,new Set,!0)))},unselectNodesAndEdges:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.nodes,o=e.edges,r=n(),i=r.edges,a=r.nodes,l=r.triggerNodeChanges,u=r.triggerEdgeChanges,s=t||a,c=o||i,d=s.map((function(e){return e.selected=!1,Ma(e.id,!1)})),f=c.map((function(e){return Ma(e.id,!1)}));l(d),u(f)},setMinZoom:function(t){var o=n(),r=o.panZoom,i=o.maxZoom;null===r||void 0===r||r.setScaleExtent([t,i]),e({minZoom:t})},setMaxZoom:function(t){var o=n(),r=o.panZoom,i=o.minZoom;null===r||void 0===r||r.setScaleExtent([i,t]),e({maxZoom:t})},setTranslateExtent:function(t){var o;null===(o=n().panZoom)||void 0===o||o.setTranslateExtent(t),e({translateExtent:t})},setPaneClickDistance:function(e){var t;null===(t=n().panZoom)||void 0===t||t.setClickDistance(e)},resetSelectedElements:function(){var e=n(),t=e.edges,o=e.nodes,r=e.triggerNodeChanges,i=e.triggerEdgeChanges,a=o.reduce((function(e,n){return n.selected?[].concat((0,c.Z)(e),[Ma(n.id,!1)]):e}),[]),l=t.reduce((function(e,n){return n.selected?[].concat((0,c.Z)(e),[Ma(n.id,!1)]):e}),[]);r(a),i(l)},setNodeExtent:function(t){var o,r=n().nodeLookup,i=(0,s.Z)(r);try{for(i.s();!(o=i.n()).done;){var a=(0,u.Z)(o.value,2)[1],l=tr(a.internals.positionAbsolute,t);r.set(a.id,(0,d.Z)((0,d.Z)({},a),{},{internals:(0,d.Z)((0,d.Z)({},a.internals),{},{positionAbsolute:l})}))}}catch(c){i.e(c)}finally{i.f()}e({nodeExtent:t})},panBy:function(e){var t=n(),o=t.transform,r=t.width,i=t.height;return function(e){return ni.apply(this,arguments)}({delta:e,panZoom:t.panZoom,transform:o,translateExtent:t.translateExtent,width:r,height:i})},fitView:function(e){var t=n(),o=t.panZoom,r=t.width,i=t.height,a=t.minZoom,l=t.maxZoom,u=t.nodeLookup;return o?Uo({nodes:qo(u,e),width:r,height:i,panZoom:o,minZoom:a,maxZoom:l},e):Promise.resolve(!1)},fitViewSync:function(e){var t=n(),o=t.panZoom,r=t.width,i=t.height,a=t.minZoom,l=t.maxZoom,u=t.nodeLookup;if(!o)return!1;var s=qo(u,e);return Uo({nodes:s,width:r,height:i,panZoom:o,minZoom:a,maxZoom:l},e),s.size>0},cancelConnection:function(){e({connection:(0,d.Z)({},jo)})},updateConnection:function(n){e({connection:n})},reset:function(){return e((0,d.Z)({},du()))}})},t=Object.is,n?Ai(n,t):Ai};function hu(e){var n=e.initialNodes,t=e.initialEdges,o=e.defaultNodes,r=e.defaultEdges,i=e.initialWidth,l=e.initialHeight,s=e.fitView,c=e.nodeOrigin,d=e.children,f=(0,a.useState)((function(){return fu({nodes:n,edges:t,defaultNodes:o,defaultEdges:r,width:i,height:l,fitView:s,nodeOrigin:c})})),v=(0,u.Z)(f,1)[0];return(0,h.jsx)(Ki,{value:v,children:(0,h.jsx)(Ta,{children:d})})}function vu(e){var n=e.children,t=e.nodes,o=e.edges,r=e.defaultNodes,i=e.defaultEdges,l=e.width,u=e.height,s=e.fitView,c=e.nodeOrigin;return(0,a.useContext)(Wi)?(0,h.jsx)(h.Fragment,{children:n}):(0,h.jsx)(hu,{initialNodes:t,initialEdges:o,defaultNodes:r,defaultEdges:i,initialWidth:l,initialHeight:u,fitView:s,nodeOrigin:c,children:n})}var pu={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};var gu=za((function(e,n){var t=e.nodes,o=e.edges,r=e.defaultNodes,i=e.defaultEdges,l=e.className,s=e.nodeTypes,c=e.edgeTypes,p=e.onNodeClick,g=e.onEdgeClick,m=e.onInit,y=e.onMove,x=e.onMoveStart,w=e.onMoveEnd,b=e.onConnect,S=e.onConnectStart,C=e.onConnectEnd,E=e.onClickConnectStart,k=e.onClickConnectEnd,_=e.onNodeMouseEnter,M=e.onNodeMouseMove,N=e.onNodeMouseLeave,Z=e.onNodeContextMenu,P=e.onNodeDoubleClick,O=e.onNodeDragStart,D=e.onNodeDrag,z=e.onNodeDragStop,I=e.onNodesDelete,A=e.onEdgesDelete,R=e.onDelete,T=e.onSelectionChange,L=e.onSelectionDragStart,B=e.onSelectionDrag,j=e.onSelectionDragStop,V=e.onSelectionContextMenu,H=e.onSelectionStart,X=e.onSelectionEnd,Y=e.onBeforeDelete,W=e.connectionMode,K=e.connectionLineType,F=void 0===K?To.Bezier:K,G=e.connectionLineStyle,q=e.connectionLineComponent,U=e.connectionLineContainerStyle,Q=e.deleteKeyCode,$=void 0===Q?"Backspace":Q,J=e.selectionKeyCode,ee=void 0===J?"Shift":J,ne=e.selectionOnDrag,te=void 0!==ne&&ne,oe=e.selectionMode,re=void 0===oe?Eo.Full:oe,ie=e.panActivationKeyCode,ae=void 0===ie?"Space":ie,le=e.multiSelectionKeyCode,ue=void 0===le?xr()?"Meta":"Control":le,se=e.zoomActivationKeyCode,ce=void 0===se?xr()?"Meta":"Control":se,de=e.snapToGrid,fe=e.snapGrid,he=e.onlyRenderVisibleElements,ve=void 0!==he&&he,pe=e.selectNodesOnDrag,ge=e.nodesDraggable,me=e.nodesConnectable,ye=e.nodesFocusable,xe=e.nodeOrigin,we=void 0===xe?fa:xe,be=e.edgesFocusable,Se=e.edgesReconnectable,Ce=e.elementsSelectable,Ee=void 0===Ce||Ce,ke=e.defaultViewport,_e=void 0===ke?ha:ke,Me=e.minZoom,Ne=void 0===Me?.5:Me,Ze=e.maxZoom,Pe=void 0===Ze?2:Ze,Oe=e.translateExtent,De=void 0===Oe?Ao:Oe,ze=e.preventScrolling,Ie=void 0===ze||ze,Ae=e.nodeExtent,Re=e.defaultMarkerColor,Te=void 0===Re?"#b1b1b7":Re,Le=e.zoomOnScroll,Be=void 0===Le||Le,je=e.zoomOnPinch,Ve=void 0===je||je,He=e.panOnScroll,Xe=void 0!==He&&He,Ye=e.panOnScrollSpeed,We=void 0===Ye?.5:Ye,Ke=e.panOnScrollMode,Fe=void 0===Ke?Co.Free:Ke,Ge=e.zoomOnDoubleClick,qe=void 0===Ge||Ge,Ue=e.panOnDrag,Qe=void 0===Ue||Ue,$e=e.onPaneClick,Je=e.onPaneMouseEnter,en=e.onPaneMouseMove,nn=e.onPaneMouseLeave,tn=e.onPaneScroll,on=e.onPaneContextMenu,rn=e.paneClickDistance,an=void 0===rn?0:rn,ln=e.nodeClickDistance,un=void 0===ln?0:ln,sn=e.children,cn=e.onReconnect,dn=e.onReconnectStart,fn=e.onReconnectEnd,hn=e.onEdgeContextMenu,vn=e.onEdgeDoubleClick,pn=e.onEdgeMouseEnter,gn=e.onEdgeMouseMove,mn=e.onEdgeMouseLeave,yn=e.reconnectRadius,xn=void 0===yn?10:yn,wn=e.onNodesChange,bn=e.onEdgesChange,Sn=e.noDragClassName,Cn=void 0===Sn?"nodrag":Sn,En=e.noWheelClassName,kn=void 0===En?"nowheel":En,_n=e.noPanClassName,Mn=void 0===_n?"nopan":_n,Nn=e.fitView,Zn=e.fitViewOptions,Pn=e.connectOnClick,On=e.attributionPosition,Dn=e.proOptions,zn=e.defaultEdgeOptions,In=e.elevateNodesOnSelect,An=e.elevateEdgesOnSelect,Rn=e.disableKeyboardA11y,Tn=void 0!==Rn&&Rn,Ln=e.autoPanOnConnect,Bn=e.autoPanOnNodeDrag,jn=e.autoPanSpeed,Vn=e.connectionRadius,Hn=e.isValidConnection,Xn=e.onError,Yn=e.style,Wn=e.id,Kn=e.nodeDragThreshold,Fn=e.viewport,Gn=e.onViewportChange,qn=e.width,Un=e.height,Qn=e.colorMode,$n=void 0===Qn?"light":Qn,Jn=e.debug,et=(0,f.Z)(e,Xi),nt=Wn||"1",tt=function(e){var n,t=(0,a.useState)("system"===e?null:e),o=(0,u.Z)(t,2),r=o[0],i=o[1];return(0,a.useEffect)((function(){if("system"===e){var n=ya(),t=function(){return i(null!==n&&void 0!==n&&n.matches?"dark":"light")};return t(),null===n||void 0===n||n.addEventListener("change",t),function(){null===n||void 0===n||n.removeEventListener("change",t)}}i(e)}),[e]),null!==r?r:null!==(n=ya())&&void 0!==n&&n.matches?"dark":"light"}($n);return(0,h.jsx)("div",(0,d.Z)((0,d.Z)({},et),{},{style:(0,d.Z)((0,d.Z)({},Yn),pu),ref:n,className:v(["react-flow",l,tt]),"data-testid":"rf__wrapper",id:Wn,children:(0,h.jsxs)(vu,{nodes:t,edges:o,width:qn,height:Un,fitView:Nn,nodeOrigin:we,children:[(0,h.jsx)(cu,{onInit:m,onNodeClick:p,onEdgeClick:g,onNodeMouseEnter:_,onNodeMouseMove:M,onNodeMouseLeave:N,onNodeContextMenu:Z,onNodeDoubleClick:P,nodeTypes:s,edgeTypes:c,connectionLineType:F,connectionLineStyle:G,connectionLineComponent:q,connectionLineContainerStyle:U,selectionKeyCode:ee,selectionOnDrag:te,selectionMode:re,deleteKeyCode:$,multiSelectionKeyCode:ue,panActivationKeyCode:ae,zoomActivationKeyCode:ce,onlyRenderVisibleElements:ve,defaultViewport:_e,translateExtent:De,minZoom:Ne,maxZoom:Pe,preventScrolling:Ie,zoomOnScroll:Be,zoomOnPinch:Ve,zoomOnDoubleClick:qe,panOnScroll:Xe,panOnScrollSpeed:We,panOnScrollMode:Fe,panOnDrag:Qe,onPaneClick:$e,onPaneMouseEnter:Je,onPaneMouseMove:en,onPaneMouseLeave:nn,onPaneScroll:tn,onPaneContextMenu:on,paneClickDistance:an,nodeClickDistance:un,onSelectionContextMenu:V,onSelectionStart:H,onSelectionEnd:X,onReconnect:cn,onReconnectStart:dn,onReconnectEnd:fn,onEdgeContextMenu:hn,onEdgeDoubleClick:vn,onEdgeMouseEnter:pn,onEdgeMouseMove:gn,onEdgeMouseLeave:mn,reconnectRadius:xn,defaultMarkerColor:Te,noDragClassName:Cn,noWheelClassName:kn,noPanClassName:Mn,rfId:nt,disableKeyboardA11y:Tn,nodeExtent:Ae,viewport:Fn,onViewportChange:Gn}),(0,h.jsx)(ma,{nodes:t,edges:o,defaultNodes:r,defaultEdges:i,onConnect:b,onConnectStart:S,onConnectEnd:C,onClickConnectStart:E,onClickConnectEnd:k,nodesDraggable:ge,nodesConnectable:me,nodesFocusable:ye,edgesFocusable:be,edgesReconnectable:Se,elementsSelectable:Ee,elevateNodesOnSelect:In,elevateEdgesOnSelect:An,minZoom:Ne,maxZoom:Pe,nodeExtent:Ae,onNodesChange:wn,onEdgesChange:bn,snapToGrid:de,snapGrid:fe,connectionMode:W,translateExtent:De,connectOnClick:Pn,defaultEdgeOptions:zn,fitView:Nn,fitViewOptions:Zn,onNodesDelete:I,onEdgesDelete:A,onDelete:R,onNodeDragStart:O,onNodeDrag:D,onNodeDragStop:z,onSelectionDrag:B,onSelectionDragStart:L,onSelectionDragStop:j,onMove:y,onMoveStart:x,onMoveEnd:w,noPanClassName:Mn,nodeOrigin:we,rfId:nt,autoPanOnConnect:Ln,autoPanOnNodeDrag:Bn,autoPanSpeed:jn,onError:Xn,connectionRadius:Vn,isValidConnection:Hn,selectNodesOnDrag:pe,nodeDragThreshold:Kn,onBeforeDelete:Y,paneClickDistance:an,debug:Jn}),(0,h.jsx)(da,{onSelectionChange:T}),sn,(0,h.jsx)(ia,{proOptions:Dn,position:On}),(0,h.jsx)(ta,{rfId:nt,disableKeyboardA11y:Tn})]})}))}));var mu;function yu(e){var n=e.dimensions,t=e.lineWidth,o=e.variant,r=e.className;return(0,h.jsx)("path",{strokeWidth:t,d:"M".concat(n[0]/2," 0 V").concat(n[1]," M0 ").concat(n[1]/2," H").concat(n[0]),className:v(["react-flow__background-pattern",o,r])})}function xu(e){var n=e.radius,t=e.className;return(0,h.jsx)("circle",{cx:n,cy:n,r:n,className:v(["react-flow__background-pattern","dots",t])})}!function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"}(mu||(mu={}));var wu=(Li={},(0,l.Z)(Li,mu.Dots,1),(0,l.Z)(Li,mu.Lines,1),(0,l.Z)(Li,mu.Cross,6),Li),bu=function(e){return{transform:e.transform,patternId:"pattern-".concat(e.rfId)}};function Su(e){var n=e.id,t=e.variant,o=void 0===t?mu.Dots:t,r=e.gap,i=void 0===r?20:r,l=e.size,u=e.lineWidth,s=void 0===u?1:u,c=e.offset,f=void 0===c?2:c,p=e.color,g=e.bgColor,m=e.style,y=e.className,x=e.patternClassName,w=(0,a.useRef)(null),b=Gi(bu,Ri),S=b.transform,C=b.patternId,E=l||wu[o],k=o===mu.Dots,_=o===mu.Cross,M=Array.isArray(i)?i:[i,i],N=[M[0]*S[2]||1,M[1]*S[2]||1],Z=E*S[2],P=_?[Z,Z]:N,O=k?[Z/f,Z/f]:[P[0]/f,P[1]/f],D="".concat(C).concat(n||"");return(0,h.jsxs)("svg",{className:v(["react-flow__background",y]),style:(0,d.Z)((0,d.Z)((0,d.Z)({},m),Xa),{},{"--xy-background-color-props":g,"--xy-background-pattern-color-props":p}),ref:w,"data-testid":"rf__background",children:[(0,h.jsx)("pattern",{id:D,x:S[0]%N[0],y:S[1]%N[1],width:N[0],height:N[1],patternUnits:"userSpaceOnUse",patternTransform:"translate(-".concat(O[0],",-").concat(O[1],")"),children:k?(0,h.jsx)(xu,{radius:Z/f,className:x}):(0,h.jsx)(yu,{dimensions:P,lineWidth:s,variant:o,className:x})}),(0,h.jsx)("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#".concat(D,")")})]})}Su.displayName="Background";(0,a.memo)(Su);function Cu(){return(0,h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:(0,h.jsx)("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function Eu(){return(0,h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:(0,h.jsx)("path",{d:"M0 0h32v4.2H0z"})})}function ku(){return(0,h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:(0,h.jsx)("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function _u(){return(0,h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:(0,h.jsx)("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function Mu(){return(0,h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:(0,h.jsx)("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function Nu(e){var n=e.children,t=e.className,o=(0,f.Z)(e,Yi);return(0,h.jsx)("button",(0,d.Z)((0,d.Z)({type:"button",className:v(["react-flow__controls-button",t])},o),{},{children:n}))}var Zu=function(e){return{isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}};function Pu(e){var n=e.style,t=e.showZoom,o=void 0===t||t,r=e.showFitView,i=void 0===r||r,a=e.showInteractive,l=void 0===a||a,u=e.fitViewOptions,s=e.onZoomIn,c=e.onZoomOut,d=e.onFitView,f=e.onInteractiveChange,p=e.className,g=e.children,m=e.position,y=void 0===m?"bottom-left":m,x=e.orientation,w=void 0===x?"vertical":x,b=e["aria-label"],S=void 0===b?"React Flow controls":b,C=qi(),E=Gi(Zu,Ri),k=E.isInteractive,_=E.minZoomReached,M=E.maxZoomReached,N=Ba(),Z=N.zoomIn,P=N.zoomOut,O=N.fitView,D="horizontal"===w?"horizontal":"vertical";return(0,h.jsxs)(ra,{className:v(["react-flow__controls",D,p]),position:y,style:n,"data-testid":"rf__controls","aria-label":S,children:[o&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(Nu,{onClick:function(){Z(),null===s||void 0===s||s()},className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:M,children:(0,h.jsx)(Cu,{})}),(0,h.jsx)(Nu,{onClick:function(){P(),null===c||void 0===c||c()},className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:_,children:(0,h.jsx)(Eu,{})})]}),i&&(0,h.jsx)(Nu,{className:"react-flow__controls-fitview",onClick:function(){O(u),null===d||void 0===d||d()},title:"fit view","aria-label":"fit view",children:(0,h.jsx)(ku,{})}),l&&(0,h.jsx)(Nu,{className:"react-flow__controls-interactive",onClick:function(){C.setState({nodesDraggable:!k,nodesConnectable:!k,elementsSelectable:!k}),null===f||void 0===f||f(!k)},title:"toggle interactivity","aria-label":"toggle interactivity",children:k?(0,h.jsx)(Mu,{}):(0,h.jsx)(_u,{})}),g]})}Pu.displayName="Controls";(0,a.memo)(Pu);var Ou=(0,a.memo)((function(e){var n=e.id,t=e.x,o=e.y,r=e.width,i=e.height,a=e.style,l=e.color,u=e.strokeColor,s=e.strokeWidth,c=e.className,d=e.borderRadius,f=e.shapeRendering,p=e.selected,g=e.onClick,m=a||{},y=m.background,x=m.backgroundColor,w=l||y||x;return(0,h.jsx)("rect",{className:v(["react-flow__minimap-node",{selected:p},c]),x:t,y:o,rx:d,ry:d,width:r,height:i,style:{fill:w,stroke:u,strokeWidth:s},shapeRendering:f,onClick:g?function(e){return g(e,n)}:void 0})})),Du=function(e){return e.nodes.map((function(e){return e.id}))},zu=function(e){return e instanceof Function?e:function(){return e}};var Iu=(0,a.memo)((function(e){var n=e.id,t=e.nodeColorFunc,o=e.nodeStrokeColorFunc,r=e.nodeClassNameFunc,i=e.nodeBorderRadius,a=e.nodeStrokeWidth,l=e.shapeRendering,u=e.NodeComponent,s=e.onClick,c=Gi((function(e){var t=e.nodeLookup.get(n),o=t.internals.positionAbsolute;return{node:t,x:o.x,y:o.y}}),Ri),d=c.node,f=c.x,v=c.y;if(!d||d.hidden||!Sr(d))return null;var p=br(d),g=p.width,m=p.height;return(0,h.jsx)(u,{x:f,y:v,width:g,height:m,style:d.style,selected:!!d.selected,className:r(d),color:t(d),borderRadius:i,strokeColor:o(d),strokeWidth:a,shapeRendering:l,onClick:s,id:d.id})})),Au=(0,a.memo)((function(e){var n=e.nodeStrokeColor,t=e.nodeColor,o=e.nodeClassName,r=void 0===o?"":o,i=e.nodeBorderRadius,a=void 0===i?5:i,l=e.nodeStrokeWidth,u=e.nodeComponent,s=void 0===u?Ou:u,c=e.onClick,d=Gi(Du,Ri),f=zu(t),v=zu(n),p=zu(r),g="undefined"===typeof window||window.chrome?"crispEdges":"geometricPrecision";return(0,h.jsx)(h.Fragment,{children:d.map((function(e){return(0,h.jsx)(Iu,{id:e,nodeColorFunc:f,nodeStrokeColorFunc:v,nodeClassNameFunc:p,nodeBorderRadius:a,nodeStrokeWidth:l,NodeComponent:s,onClick:c,shapeRendering:g},e)}))})})),Ru=function(e){var n={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:n,boundingRect:e.nodeLookup.size>0?cr(Ko(e.nodeLookup),n):n,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height}};function Tu(e){var n,t,o=e.style,r=e.className,i=e.nodeStrokeColor,l=e.nodeColor,s=e.nodeClassName,c=void 0===s?"":s,f=e.nodeBorderRadius,p=void 0===f?5:f,g=e.nodeStrokeWidth,m=e.nodeComponent,y=e.bgColor,x=e.maskColor,w=e.maskStrokeColor,b=e.maskStrokeWidth,S=e.position,C=void 0===S?"bottom-right":S,E=e.onClick,k=e.onNodeClick,_=e.pannable,M=void 0!==_&&_,N=e.zoomable,Z=void 0!==N&&N,P=e.ariaLabel,O=void 0===P?"React Flow mini map":P,D=e.inversePan,z=e.zoomStep,I=void 0===z?10:z,A=e.offsetScale,R=void 0===A?5:A,T=qi(),L=(0,a.useRef)(null),B=Gi(Ru,Ri),j=B.boundingRect,V=B.viewBB,H=B.rfId,X=B.panZoom,Y=B.translateExtent,W=B.flowWidth,K=B.flowHeight,F=null!==(n=null===o||void 0===o?void 0:o.width)&&void 0!==n?n:200,G=null!==(t=null===o||void 0===o?void 0:o.height)&&void 0!==t?t:150,q=j.width/F,U=j.height/G,Q=Math.max(q,U),$=Q*F,J=Q*G,ee=R*Q,ne=j.x-($-j.width)/2-ee,te=j.y-(J-j.height)/2-ee,oe=$+2*ee,re=J+2*ee,ie="".concat("react-flow__minimap-desc","-").concat(H),ae=(0,a.useRef)(0),le=(0,a.useRef)();ae.current=Q,(0,a.useEffect)((function(){if(L.current&&X)return le.current=function(e){var n=e.domNode,t=e.panZoom,o=e.getTransform,r=e.getViewScale,i=Be(n);return{update:function(e){var n=e.translateExtent,a=e.width,l=e.height,u=e.zoomStep,s=void 0===u?10:u,c=e.pannable,d=void 0===c||c,f=e.zoomable,h=void 0===f||f,v=e.inversePan,p=void 0!==v&&v,g=[0,0],m=xo().on("start",(function(e){var n,t;"mousedown"!==e.sourceEvent.type&&"touchstart"!==e.sourceEvent.type||(g=[null!==(n=e.sourceEvent.clientX)&&void 0!==n?n:e.sourceEvent.touches[0].clientX,null!==(t=e.sourceEvent.clientY)&&void 0!==t?t:e.sourceEvent.touches[0].clientY])})).on("zoom",d?function(e){var i,u,s=o();if(("mousemove"===e.sourceEvent.type||"touchmove"===e.sourceEvent.type)&&t){var c=[null!==(i=e.sourceEvent.clientX)&&void 0!==i?i:e.sourceEvent.touches[0].clientX,null!==(u=e.sourceEvent.clientY)&&void 0!==u?u:e.sourceEvent.touches[0].clientY],d=[c[0]-g[0],c[1]-g[1]];g=c;var f=r()*Math.max(s[2],Math.log(s[2]))*(p?-1:1),h={x:s[0]-d[0]*f,y:s[1]-d[1]*f},v=[[0,0],[a,l]];t.setViewportConstrained({x:h.x,y:h.y,zoom:s[2]},v,n)}}:null).on("zoom.wheel",h?function(e){var n=o();if("wheel"===e.sourceEvent.type&&t){var r=-e.sourceEvent.deltaY*(1===e.sourceEvent.deltaMode?.05:e.sourceEvent.deltaMode?1:.002)*s,i=n[2]*Math.pow(2,r);t.scaleTo(i)}}:null);i.call(m,{})},destroy:function(){i.on("zoom",null)},pointer:je}}({domNode:L.current,panZoom:X,getTransform:function(){return T.getState().transform},getViewScale:function(){return ae.current}}),function(){var e;null===(e=le.current)||void 0===e||e.destroy()}}),[X]),(0,a.useEffect)((function(){var e;null===(e=le.current)||void 0===e||e.update({translateExtent:Y,width:W,height:K,inversePan:D,pannable:M,zoomStep:I,zoomable:Z})}),[M,Z,D,I,Y,W,K]);var ue=E?function(e){var n,t=(null===(n=le.current)||void 0===n?void 0:n.pointer(e))||[0,0],o=(0,u.Z)(t,2),r=o[0],i=o[1];E(e,{x:r,y:i})}:void 0,se=k?(0,a.useCallback)((function(e,n){var t=T.getState().nodeLookup.get(n);k(e,t)}),[]):void 0;return(0,h.jsx)(ra,{position:C,style:(0,d.Z)((0,d.Z)({},o),{},{"--xy-minimap-background-color-props":"string"===typeof y?y:void 0,"--xy-minimap-mask-background-color-props":"string"===typeof x?x:void 0,"--xy-minimap-mask-stroke-color-props":"string"===typeof w?w:void 0,"--xy-minimap-mask-stroke-width-props":"number"===typeof b?b*Q:void 0,"--xy-minimap-node-background-color-props":"string"===typeof l?l:void 0,"--xy-minimap-node-stroke-color-props":"string"===typeof i?i:void 0,"--xy-minimap-node-stroke-width-props":"string"===typeof g?g:void 0}),className:v(["react-flow__minimap",r]),"data-testid":"rf__minimap",children:(0,h.jsxs)("svg",{width:F,height:G,viewBox:"".concat(ne," ").concat(te," ").concat(oe," ").concat(re),className:"react-flow__minimap-svg",role:"img","aria-labelledby":ie,ref:L,onClick:ue,children:[O&&(0,h.jsx)("title",{id:ie,children:O}),(0,h.jsx)(Au,{onClick:se,nodeColor:l,nodeStrokeColor:i,nodeBorderRadius:p,nodeClassName:c,nodeStrokeWidth:g,nodeComponent:m}),(0,h.jsx)("path",{className:"react-flow__minimap-mask",d:"M".concat(ne-ee,",").concat(te-ee,"h").concat(oe+2*ee,"v").concat(re+2*ee,"h").concat(-oe-2*ee,"z\n        M").concat(V.x,",").concat(V.y,"h").concat(V.width,"v").concat(V.height,"h").concat(-V.width,"z"),fillRule:"evenodd",pointerEvents:"none"})]})})}Tu.displayName="MiniMap";(0,a.memo)(Tu);(0,a.memo)((function(e){var n=e.nodeId,t=e.position,o=e.variant,r=void 0===o?fi.Handle:o,i=e.className,u=e.style,f=void 0===u?{}:u,p=e.children,g=e.color,m=e.minWidth,y=void 0===m?10:m,x=e.minHeight,w=void 0===x?10:x,b=e.maxWidth,S=void 0===b?Number.MAX_VALUE:b,C=e.maxHeight,E=void 0===C?Number.MAX_VALUE:C,k=e.keepAspectRatio,_=void 0!==k&&k,M=e.shouldResize,N=e.onResizeStart,Z=e.onResize,P=e.onResizeEnd,O=tl(),D="string"===typeof n?n:O,z=qi(),I=(0,a.useRef)(null),A=r===fi.Line?"right":"bottom-right",R=null!==t&&void 0!==t?t:A,T=(0,a.useRef)(null);(0,a.useEffect)((function(){if(I.current&&D)return T.current||(T.current=Mi({domNode:I.current,nodeId:D,getStoreItems:function(){var e=z.getState();return{nodeLookup:e.nodeLookup,transform:e.transform,snapGrid:e.snapGrid,snapToGrid:e.snapToGrid,nodeOrigin:e.nodeOrigin}},onChange:function(e,n){var t=z.getState(),o=t.triggerNodeChanges,r=t.nodeLookup,i=t.parentLookup,a=t.nodeOrigin,l=[],u={x:e.x,y:e.y},f=r.get(D);if(f&&f.expandParent&&f.parentId){var h,v,p,g,m,y=null!==(h=f.origin)&&void 0!==h?h:a,x=null!==(v=e.width)&&void 0!==v?v:f.measured.width,w=null!==(p=e.height)&&void 0!==p?p:f.measured.height,b=ei([{id:f.id,parentId:f.parentId,rect:(0,d.Z)({width:x,height:w},Cr({x:null!==(g=e.x)&&void 0!==g?g:f.position.x,y:null!==(m=e.y)&&void 0!==m?m:f.position.y},{width:x,height:w},f.parentId,r,y))}],r,i,a);l.push.apply(l,(0,c.Z)(b)),u.x=e.x?Math.max(y[0]*x,e.x):void 0,u.y=e.y?Math.max(y[1]*w,e.y):void 0}if(void 0!==u.x&&void 0!==u.y){var S={id:D,type:"position",position:(0,d.Z)({},u)};l.push(S)}if(void 0!==e.width&&void 0!==e.height){var C={id:D,type:"dimensions",resizing:!0,setAttributes:!0,dimensions:{width:e.width,height:e.height}};l.push(C)}var E,k=(0,s.Z)(n);try{for(k.s();!(E=k.n()).done;){var _=E.value,M=(0,d.Z)((0,d.Z)({},_),{},{type:"position"});l.push(M)}}catch(N){k.e(N)}finally{k.f()}o(l)},onEnd:function(){var e={id:D,type:"dimensions",resizing:!1};z.getState().triggerNodeChanges([e])}})),T.current.update({controlPosition:R,boundaries:{minWidth:y,minHeight:w,maxWidth:S,maxHeight:E},keepAspectRatio:_,onResizeStart:N,onResize:Z,onResizeEnd:P,shouldResize:M}),function(){var e;null===(e=T.current)||void 0===e||e.destroy()}}),[R,y,w,S,E,_,N,Z,P,M]);var L=R.split("-"),B=r===fi.Line?"borderColor":"backgroundColor",j=g?(0,d.Z)((0,d.Z)({},f),{},(0,l.Z)({},B,g)):f;return(0,h.jsx)("div",{className:v(["react-flow__resize-control","nodrag"].concat((0,c.Z)(L),[r,i])),ref:I,style:j,children:p})}));var Lu,Bu=t(4092),ju=t(4420),Vu=t(7689),Hu=t(9318),Xu=t(9525),Yu=t(168),Wu=t(5867).ZP.div(Lu||(Lu=(0,Yu.Z)(["\n  width: 200px;\n  padding: 8px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  color: white;\n"]))),Ku=function(e){var n=e.data;return(0,h.jsxs)(Wu,{children:[(0,h.jsx)("div",{children:(0,h.jsx)("img",{src:n.image,alt:n.label,style:{width:"150px",height:"150px",borderRadius:"50%"}})}),(0,h.jsx)("div",{style:{marginTop:10},children:(0,h.jsx)("strong",{children:n.label})}),(0,h.jsx)(rl,{type:"source",position:"bottom"}),(0,h.jsx)(rl,{type:"target",position:"top"})]})},Fu={customNode:Ku},Gu={backgroundColor:"#0d1117"},qu=function(){var e=(0,Vu.UO)().heroId,n=(0,ju.v9)(Bu.hr),t=n.nodes,r=n.edges,l=(0,ju.I0)();return(0,a.useEffect)((function(){var n=function(){var n=(0,o.Z)(i().mark((function n(){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.all([l((0,Hu.DK)(e)),l((0,Hu.X8)(e)),l((0,Hu.UG)(e))]);case 2:l((0,Xu.bd)());case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}),[e,l]),(0,h.jsx)("div",{style:{width:"99vw",height:"90vh"},children:(0,h.jsx)(gu,{nodes:t,edges:r,nodeTypes:Fu,snapToGrid:!0,snapGrid:[16,16],style:Gu})})}},4092:function(e,n,t){t.d(n,{Q$:function(){return a},hr:function(){return r},iq:function(){return i},t2:function(){return o}});var o=function(e){return e.swHeroes.heroes},r=function(e){return e.swHeroes.elements},i=function(e){return e.swHeroes.pageCount},a=function(e){return e.swHeroes.currentPage}},9074:function(e,n,t){var o=t(2791);var r="function"===typeof Object.is?Object.is:function(e,n){return e===n&&(0!==e||1/e===1/n)||e!==e&&n!==n},i=o.useState,a=o.useEffect,l=o.useLayoutEffect,u=o.useDebugValue;function s(e){var n=e.getSnapshot;e=e.value;try{var t=n();return!r(e,t)}catch(o){return!0}}var c="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,n){return n()}:function(e,n){var t=n(),o=i({inst:{value:t,getSnapshot:n}}),r=o[0].inst,c=o[1];return l((function(){r.value=t,r.getSnapshot=n,s(r)&&c({inst:r})}),[e,t,n]),a((function(){return s(r)&&c({inst:r}),e((function(){s(r)&&c({inst:r})}))}),[e]),u(t),t};n.useSyncExternalStore=void 0!==o.useSyncExternalStore?o.useSyncExternalStore:c},158:function(e,n,t){var o=t(2791),r=t(5310);var i="function"===typeof Object.is?Object.is:function(e,n){return e===n&&(0!==e||1/e===1/n)||e!==e&&n!==n},a=r.useSyncExternalStore,l=o.useRef,u=o.useEffect,s=o.useMemo,c=o.useDebugValue;n.useSyncExternalStoreWithSelector=function(e,n,t,o,r){var d=l(null);if(null===d.current){var f={hasValue:!1,value:null};d.current=f}else f=d.current;d=s((function(){function e(e){if(!u){if(u=!0,a=e,e=o(e),void 0!==r&&f.hasValue){var n=f.value;if(r(n,e))return l=n}return l=e}if(n=l,i(a,e))return n;var t=o(e);return void 0!==r&&r(n,t)?n:(a=e,l=t)}var a,l,u=!1,s=void 0===t?null:t;return[function(){return e(n())},null===s?void 0:function(){return e(s())}]}),[n,t,o,r]);var h=a(e,d[0],d[1]);return u((function(){f.hasValue=!0,f.value=h}),[h]),c(h),h}},5310:function(e,n,t){e.exports=t(9074)},725:function(e,n,t){e.exports=t(158)}}]);
//# sourceMappingURL=824.f6582261.chunk.js.map